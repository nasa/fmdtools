<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Defining Fault Sampling Approaches in fmdtools &mdash; fmdtools 2.0-alpha5 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/fmdtools_ico.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Defining Nominal Approaches in fmdtools" href="Nominal_Approach_Use-Cases.html" />
    <link rel="prev" title="Rover Model Explanation and Preliminaries" href="Rover_Setup_Notebook.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo_glow.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../README.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../README.html#contributors">Contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#license-notices">License/Notices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../README.html#disclaimers">Disclaimers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Development%20Guide.html">Development Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#why-fmdtools">Why fmdtools?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#key-features">Key Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#intro-to-fmdtools">Intro to fmdtools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html">Intro to resilience modelling, simulation, and visualization in Python with fmdtools.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#author-daniel-hulse">Author: Daniel Hulse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#version-2-0-alpha5">Version: 2.0-alpha5</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#motivation-modelling-system-resilience">Motivation: Modelling System Resilience</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#why-is-resilience-important">Why is Resilience Important?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#enabling-proactive-design-process">Enabling proactive design process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#why-fmdtools-possible-competitors">Why fmdtools? Possible Competitors:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#why-fmdtools-pros">Why fmdtools? Pros:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#why-not-fmdtools-cons">Why <strong>not</strong> fmdtools? Cons:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#what-is-fmdtools-a-python-package-for-design-simulation-and-analysis-of-resilience">What is fmdtools? A Python package for <strong>design</strong>, <strong>simulation</strong>, and <strong>analysis</strong> of resilience.</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#what-is-fmdtools-repo-structure">What is fmdtools? Repo Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#activity-download-and-install-fmdtools">Activity: Download and Install fmdtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#analysis-workflow-structure">Analysis Workflow/Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#defining-a-model">Defining a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#id1">Defining a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#function-code-template">Function Code Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#model-code-template">Model Code Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#demo-model-activity-examples-pump-ex-pump-py">Demo Model Activity: examples/pump/ex_pump.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#more-resources-for-model-definition">More Resources for Model Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#notebook-activity">Notebook Activity:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#simulation-concepts-static-undirected-propagation">Simulation Concepts: Static/Undirected Propagation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#simulation-concepts-propagation-over-time">Simulation Concepts: Propagation over Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#simulation-concepts-types-of-simulations">Simulation Concepts: Types of Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#simulation-concepts-sampling-approaches">Simulation Concepts: Sampling Approaches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#simulation-concepts-things-to-consider">Simulation Concepts: Things to Consider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#activity-simulate-the-model">Activity: Simulate the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#analysis-modules">Analysis Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#analysis-activity">Analysis Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#conclusions-summary">Conclusions/Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Intro_to_fmdtools.html#further-reading-links">Further Reading/Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#repo-structure">Repo Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Development%20Guide.html#remote-structure">Remote Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#development-process">Development Process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Development%20Guide.html#release-checklist">Release Checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Development%20Guide.html#upload-to-pypi">Upload to PyPI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#roles">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#style-formatting">Style/Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#contributors">Contributors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../CONTRIBUTORS.html">CONTRIBUTORS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#model-development-best-practices">Model Development Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#pay-attention-to-and-document-the-fmdtools-version">Pay attention to and document the fmdtools version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#plan-your-model-to-avoid-technical-debt">Plan your model to avoid technical debt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#don-t-copy-inherit-and-functionalize">Don’t copy, inherit and functionalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#document-your-code-sometimes-before-your-write-it">Document your code, sometimes <em>before</em> your write it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#don-t-get-ahead-of-yourself-try-to-get-a-running-simulation-first">Don’t get ahead of yourself–try to get a running simulation first</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#preserve-your-prototype-setup-by-formalizing-it-as-a-test">Preserve your prototype setup by formalizing it as a test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#edit-your-code">Edit your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#structuring-a-model">Structuring a model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#use-model-constructs-to-simplify-your-code">Use model constructs to simplify your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#style-advice">Style advice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#see-also">See also</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../Examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Examples.html#pump">Pump</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pump/Tutorial_complete.html">fmdtools Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pump/Tutorial_complete.html#1.)-Loading-the-environment-and-model">1.) Loading the environment and model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Tutorial_complete.html#2.),-3.),-and-4.)-Simulate-and-visualize-the-results!">2.), 3.), and 4.) Simulate and visualize the results!</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Tutorial_complete.html#5.)-Saving-Work">5.) Saving Work</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pump/Pump_Example_Notebook.html">Pump Example Notebook</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pump/Pump_Example_Notebook.html#Initial-Model-Checks">Initial Model Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Pump_Example_Notebook.html#History">History</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Pump_Example_Notebook.html#Propagating-and-Viewing-Results-for-Individual-Faults">Propagating and Viewing Results for Individual Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Pump_Example_Notebook.html#Visualization-of-resilience-metrics">Visualization of resilience metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Pump_Example_Notebook.html#Running-a-List-of-Faults">Running a List of Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Pump_Example_Notebook.html#Running-a-Fault-Sampling-Approach">Running a Fault Sampling Approach</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pump/Parallelism_Tutorial.html">Using Parallel Computing in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pump/Parallelism_Tutorial.html#Model-Checks">Model Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Parallelism_Tutorial.html#Using-Parallelism-in-Simulation">Using Parallelism in Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Parallelism_Tutorial.html#Performance-Comparison">Performance Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Parallelism_Tutorial.html#Comparison:-Lower-Tracking-Time-Resolution">Comparison: Lower Tracking Time Resolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Parallelism_Tutorial.html#Comparison-Conclusions:">Comparison Conclusions:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Parallelism_Tutorial.html#Further-Computational-Cost-Reduction-via-Profiling">Further Computational Cost Reduction via Profiling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pump/Optimization.html">Optimization using the ProblemInterface class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pump/Optimization.html#ProblemInterface-Setup">ProblemInterface Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Optimization.html#Problem-interfaces">Problem interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Optimization.html#Optimization:">Optimization:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Optimization.html#Multi-scenario-Optimization">Multi-scenario Optimization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pump/Stochastic_Modelling.html">Stochastic Modelling in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pump/Stochastic_Modelling.html#Model-Setup">Model Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/Stochastic_Modelling.html#Simulation-and-Analysis">Simulation and Analysis</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pump/AST_Sampling.html">fmdtools-AdaStress integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pump/AST_Sampling.html#Python-setup:">Python setup:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/AST_Sampling.html#Running-AdaStress-Methods">Running AdaStress Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/AST_Sampling.html#MCTS">MCTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/AST_Sampling.html#Pump">Pump</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pump/AST_Sampling.html#Simulator">Simulator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Examples.html#multirotor">Multirotor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../multirotor/Demonstration.html">fmdtools Paper Demonstration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Demonstration.html#Initial-Model">Initial Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Demonstration.html#Setting-Node-Positions">Setting Node Positions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Demonstration.html#Network-Model">Network Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Demonstration.html#Static-Model">Static Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Demonstration.html#Dynamic-Model">Dynamic Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Demonstration.html#Hierarchical-Model">Hierarchical Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../multirotor/Multirotor_Optimization.html">Integrated Resilience Optimization Architectures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Multirotor_Optimization.html#Design-Model">Design Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Multirotor_Optimization.html#Operational-Model">Operational Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Multirotor_Optimization.html#Resilience-Model">Resilience Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../multirotor/Multirotor_Optimization.html#Combined-Simulation/Optimization">Combined Simulation/Optimization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Examples.html#tank">Tank</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tank/Tank_Analysis.html">Hold-up Tank Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Analysis.html#Verifying-the-nominal-state:">Verifying the nominal state:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Analysis.html#History">History</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Analysis.html#What-happens-under-component-faults?">What happens under component faults?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Analysis.html#What-about-human-induced-faults?">What about human-induced faults?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Analysis.html#Evaluating-Joint-Component-Human-fault-modes">Evaluating Joint Component-Human fault modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Analysis.html#Testing-different-reaction-times">Testing different reaction times</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tank/Tank_Optimization.html">Cooling Tank Model Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tank/Tank_Optimization.html#Simulation">Simulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Optimization.html#Verifying-the-nominal-state:">Verifying the nominal state:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Optimization.html#What-happens-under-component-faults?">What happens under component faults?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Optimization.html#Full-set-of-modes">Full set of modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Optimization.html#Defining-Optimization-Problem">Defining Optimization Problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tank/Tank_Optimization.html#Optimization">Optimization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Examples.html#eps">EPS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../eps/EPS_Example_Notebook.html">EPS Example Notebook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Examples.html#action-sequence-graph">Action Sequence Graph</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../asg_demo/Action_Sequence_Graph.html">Action Sequence Graph Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../asg_demo/Action_Sequence_Graph.html#Function-level-Simulation">Function-level Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../asg_demo/Action_Sequence_Graph.html#Model-Simulation">Model Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../asg_demo/Action_Sequence_Graph.html#Fault-Simulation">Fault Simulation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../Examples.html#rover">Rover</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Rover_Setup_Notebook.html">Rover Model Explanation and Preliminaries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Rover_Setup_Notebook.html#Model-Setup">Model Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="Rover_Setup_Notebook.html#Model-simulation">Model simulation</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Defining Fault Sampling Approaches in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Basics">Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Model-Setup">Model Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Setting-up-an-approach">Setting up an approach</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Propagating-Faults">Propagating Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Pruning">Pruning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Nominal_Approach_Use-Cases.html">Defining Nominal Approaches in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Nominal_Approach_Use-Cases.html#Quantifying-probabilities">Quantifying probabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="Nominal_Approach_Use-Cases.html#Random-input-generation">Random input generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="Nominal_Approach_Use-Cases.html#Nested-Scenario-Sampling">Nested Scenario Sampling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="HFAC_Analyses/HFAC_Analyses.html">More Human Failure Analyses</a></li>
<li class="toctree-l3"><a class="reference internal" href="HFAC_Analyses/IDETC_Human_Paper_Analysis.html">Human Failure Representation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="HFAC_Analyses/IDETC_Human_Paper_Analysis.html#Testing-behavioral-simulation">Testing behavioral simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="HFAC_Analyses/IDETC_Human_Paper_Analysis.html#Testing-Faults">Testing Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="HFAC_Analyses/IDETC_Human_Paper_Analysis.html#Examining-Performance-Shaping-Factors">Examining Performance Shaping Factors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="degradation_modelling/Degradation_Modelling_Notebook.html">Degradation Modelling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="degradation_modelling/Degradation_Modelling_Notebook.html#Drive-Degradation">Drive Degradation</a></li>
<li class="toctree-l4"><a class="reference internal" href="degradation_modelling/Degradation_Modelling_Notebook.html#Human-Degradation">Human Degradation</a></li>
<li class="toctree-l4"><a class="reference internal" href="degradation_modelling/Degradation_Modelling_Notebook.html#Combined-Degradation">Combined Degradation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fault_sampling/Rover_Mode_Notebook.html">Synthetic Mode Generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="fault_sampling/Rover_Mode_Notebook.html#Cluster-Analysis">Cluster Analysis</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="optimization/Search_Comparison.html">Faulty State-Space Search Method Comparison</a><ul>
<li class="toctree-l4"><a class="reference internal" href="optimization/Search_Comparison.html#Performance-Comparison">Performance Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="optimization/Search_Comparison.html#Comparing-Solutions-over-weights---Fault-Space-Formulation">Comparing Solutions over weights - Fault-Space Formulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="optimization/Search_Comparison.html#Comparing-Solutions-over-weights---Result-Space-Formulation">Comparing Solutions over weights - Result-Space Formulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="optimization/Rover_Response_Optimization.html">Rover Response Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="optimization/Rover_Response_Optimization.html#Optimization">Optimization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Examples.html#multiflow-demo">Multiflow Demo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../multiflow_demo/Multiflow_and_Commsflow_Demonstration.html">Demonstration on Using MultiFlow and CommsFlow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/fmdtools.html">Module Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.define.html">fmdtools.define package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#fmdtools-define-block">fmdtools.define.block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.common">fmdtools.define.common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.flow">fmdtools.define.flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.mode">fmdtools.define.mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#fmdtools-define-model">fmdtools.define.model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.parameter">fmdtools.define.parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.rand">fmdtools.define.rand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.state">fmdtools.define.state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.time">fmdtools.define.time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.sim.html">fmdtools.sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#fmdtools-sim-propagate">fmdtools.sim.propagate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.scenario">fmdtools.sim.scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.approach">fmdtools.sim.approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.search">fmdtools.sim.search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.analyze.html">fmdtools.analyze package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.result">fmdtools.analyze.result</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.plot">fmdtools.analyze.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.graph">fmdtools.analyze.graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.tabulate">fmdtools.analyze.tabulate</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">fmdtools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../Examples.html">Examples</a> &raquo;</li>
      <li>Defining Fault Sampling Approaches in fmdtools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/rover/Approach_Use-Cases.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Defining-Fault-Sampling-Approaches-in-fmdtools">
<h1>Defining Fault Sampling Approaches in fmdtools<a class="headerlink" href="#Defining-Fault-Sampling-Approaches-in-fmdtools" title="Permalink to this headline"></a></h1>
<p>Fault Sampling is used to evaluate the overall resilience of a system to a set of faults and the corresponding risks associated with these faults. There is no single best way to define the set of scenarios to evaluate resilience with, because a given resilience analysis may need more or less detail, support more or less computational time, or be interested in specific scenario types of interest.</p>
<p>Thus, there are a number of use-cases supported by fmdtools for different sampling models. This document will demonstrate and showcase a few of them.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">recordclass</span> <span class="kn">import</span> <span class="n">asdict</span>
<span class="kn">from</span> <span class="nn">fmdtools.define.parameter</span> <span class="kn">import</span> <span class="n">Parameter</span><span class="p">,</span> <span class="n">SimParam</span>
<span class="kn">from</span> <span class="nn">fmdtools.define.state</span> <span class="kn">import</span> <span class="n">State</span>
<span class="kn">from</span> <span class="nn">fmdtools.define.mode</span> <span class="kn">import</span> <span class="n">Mode</span>
<span class="kn">from</span> <span class="nn">fmdtools.define.block</span> <span class="kn">import</span> <span class="n">FxnBlock</span>
<span class="kn">from</span> <span class="nn">fmdtools.define.model</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="kn">from</span> <span class="nn">fmdtools.define.flow</span> <span class="kn">import</span> <span class="n">Flow</span>
<span class="kn">from</span> <span class="nn">fmdtools.sim.approach</span> <span class="kn">import</span> <span class="n">SampleApproach</span>

<span class="kn">import</span> <span class="nn">fmdtools.analyze</span> <span class="k">as</span> <span class="nn">an</span>
<span class="kn">import</span> <span class="nn">fmdtools.sim.propagate</span> <span class="k">as</span> <span class="nn">prop</span>
<br/></pre></div>
</div>
</div>
<section id="Basics">
<h2>Basics<a class="headerlink" href="#Basics" title="Permalink to this headline"></a></h2>
<p>Fault sampling involves: - Defining faults and fault models for each function/component/flows of the model is done using the ‘Mode’ Class - Defining a fault sampling approach (using the <code class="docutils literal notranslate"><span class="pre">SampleApproach</span></code> class) - Propagating faults through the model (using the <code class="docutils literal notranslate"><span class="pre">propagate.approach</span></code> method) Before proceeding, it can be helpful to look through their respective documentation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">Mode</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on class Mode in module fmdtools.define.mode:

class Mode(recordclass.datatype.dataobject)
 |  Mode(*args, s_kwargs={}, **kwargs)
 |
 |  Description: Class for defining the mode property (and associated probability model)
 |  held in Blocks.
 |
 |  Mode is meant to be inherited in order to define the specific faults related to a
 |  given Block.
 |
 |  e.g.,
 |  class ExampleMode(Mode):
 |      faultmodes = {&#34;high_heat&#34;, &#34;low_heat&#34;}
 |      mode = &#34;start&#34;
 |  Will create a Mode structure where m.mode = &#39;start&#39; that can enter the given
 |  fault modes &#39;high_heat&#39; and &#39;low_heat&#39;.
 |
 |  Mode has the following fields which can be modified to define the underlying
 |  representation and probability model:
 |  -------------
 |
 |  opermodes : tuple
 |      Names of non-faulty operational modes.
 |  failrate : float
 |      Overall failure rate for the block. The default is 1.0.
 |  faultparams : dict
 |          Dictionary/tuple of arguments defining faultmodes, which can have the forms:
 |              - tuple (&#39;fault1&#39;, &#39;fault2&#39;, &#39;fault3&#39;) (just the respective faults)
 |              - dict {&#39;fault1&#39;: faultattributes, &#39;fault2&#39;: faultattributes}, where faultattributes is:
 |                  - float: rate for the mode
 |                  - dict/set/str: opportunity vector for the mode specified as a dictionary/set/string
 |                  - tuple: (rate, oppvect, rcost) or (rate, rcost)
 |                      - a list of arguments where the float arguments are specified in the order rate, rcost (if provided) and
 |                          an oppvect opportunity vector is provided (anywhere) with the form:
 |                              -list: [float1, float2,...], a vector of relative likelihoods for each phase, or
 |                              -dict: {opermode:float1, opermode:float1}, a dict of relative likelihoods for each phase/mode
 |                              -set: {opermode, opermode,...}, a set of applicable phases (assumed equally likely).
 |                              the phases/modes to key by are defined in &#34;key_phases_by&#34;
 |                              -str: &#39;all&#39;/&#39;modename&#39;, either specifying all operational modes/phases or a single operational mode/phase
 |  probtype : str, optional
 |      Type of probability in the probability model, a per-time &#39;rate&#39; or
 |      per-run &#39;prob&#39;.The default is &#39;rate&#39;
 |  units : str, optional
 |      Type of units (&#39;sec&#39;/&#39;min&#39;/&#39;hr&#39;/&#39;day&#39;) used for the rates. Default is &#39;hr&#39;
 |  exclusive : True/False
 |      Whether fault modes are exclusive of each other or not.
 |      Default is False (i.e. more than one can be present).
 |  key_phases_by : &#39;self&#39;/&#39;none&#39;/&#39;global&#39;/&#39;fxnname&#39;
 |      Phases to key the faultmodes by
 |      (using local, global, or an external function&#39;s modes&#39;).
 |      Default is &#39;global&#39;
 |  longnames : dict
 |      Longer names for the faults (if desired). {faultname: longname}
 |  faults : set
 |      Set of faults present (or not) at any given time
 |  mode : str
 |      Name of the current mode. the default is &#39;nominal&#39;
 |  he_args : tuple
 |      Arguments for add_he_rate defining a human error probability model.
 |
 |
 |  These properties can then be used in simulation
 |  ------------
 |  faults : set
 |      Set of faults present (or not) at any given time
 |  mode : str
 |      Name of the current mode. the default is &#39;nominal&#39;
 |  mode_state_dict: dict
 |      Maps modes to states. Assigned by assoc_faultstates
 |
 |  While these properties are used for determining scenario information
 |  ------------
 |  faultmodes : dict
 |          Dictionary of :class:`Fault` defining possible fault modes and
 |          their properties
 |
 |  Method resolution order:
 |      Mode
 |      recordclass.datatype.dataobject
 |      builtins.object
 |
 |  Methods defined here:
 |
 |  __init__(self, *args, s_kwargs={}, **kwargs)
 |      Initialize self.  See help(type(self)) for accurate signature.
 |
 |  __repr__(self)
 |      T.__repr__() -- representation of T
 |
 |  add_fault(self, *faults)
 |      Add fault (a str) to the block.
 |
 |      Parameters
 |      ----------
 |      *fault : str(s)
 |          name(s) of the fault to add to the black
 |
 |  add_he_rate(self, gtp, EPCs={&#39;na&#39;: [1, 0]})
 |      Calculate self.failrate based on a human error probability model.
 |
 |      Parameters
 |      ----------
 |      gtp : float
 |          Generic Task Probability. (from HEART)
 |      EPCs : Dict or list
 |          Error producing conditions (and respective factors) for a given task
 |          (from HEART). Used in format:
 |
 |          - Dict {&#39;name&#39;:[EPC factor, Effect proportion]} or
 |
 |          - list [[EPC factor, Effect proportion],[[EPC factor, Effect proportion]]]
 |
 |  any_faults(self)
 |      Check if the block has any fault modes.
 |
 |  assoc_faultstates(self, franges={}, mode_app=&#39;none&#39;, manual_modes={}, probtype=&#39;prob&#39;, units=&#39;hr&#39;, key_phases_by=&#39;global&#39;, seed=42, **kwargs)
 |      Associate modes with given faultstates.
 |
 |      Parameters
 |      ----------
 |      franges : dict, optional
 |          Dictionary of form {&#39;state&#39;:{val1, val2...}) of ranges for each health state
 |                              (if used to generate modes). The default is {}.
 |      mode_app : str
 |          type of modes to elaborate from the given health states.
 |      manual_modes : dict, optional
 |          Dictionary/Set of faultmodes with structure, which has the form:
 |              - dict {&#39;fault1&#39;: [atts], &#39;fault2&#39;: atts}, where atts may be of form:
 |                  - states: {state1: val1, state2, val2}
 |                  - [states, faultattributes], where faultattributes is the same as in
 |                  assoc_modes
 |      probtype : str, optional
 |          Type of probability in the probability model, a per-time &#39;rate&#39; or
 |          per-run &#39;prob&#39;. The default is &#39;rate&#39;
 |      units : str, optional
 |          Type of units (&#39;sec&#39;/&#39;min&#39;/&#39;hr&#39;/&#39;day&#39;) used for the rates. Default is &#39;hr&#39;
 |      **kwargs : kwargs
 |          Entries for the Faults (e.g., oppvect, etc)
 |
 |  create_hist(self, timerange, track)
 |
 |  get_true_field(self, fieldname, *args, **kwargs)
 |
 |  get_true_fields(self, *args, **kwargs)
 |
 |  has_fault(self, *faults)
 |      Check if the block has fault (a str).
 |
 |      Parameters
 |      ----------
 |      *faults : strs
 |          names of the fault to check.
 |
 |  in_mode(self, *modes)
 |      Check if the system is in a given operational mode.
 |
 |      Parameters
 |      ----------
 |      *modes : strs
 |          names of the mode to check
 |
 |  init_faultmodes(self)
 |      Initialize the self.faultmodes dictionary from the parameters of the Mode.
 |
 |  mirror(self, mode_to_mirror)
 |
 |  no_fault(self, fault)
 |      Check if the block does not have fault (a str).
 |
 |      Parameters
 |      ----------
 |      fault : str
 |          name of the fault to check.
 |
 |  remove_any_faults(self, opermode=False, warnmessage=False)
 |      Reset fault mode to nominal and returns to the given operational mode.
 |
 |      Parameters
 |      ----------
 |      opermode : str (optional)
 |          operational mode to return to when the fault mode is removed
 |      warnmessage : str/False
 |          Warning to give when performing operation. Default is False (no warning)
 |
 |  remove_fault(self, fault_to_remove, opermode=False, warnmessage=False)
 |      Remove fault in the set of faults and returns to given operational mode.
 |
 |      Parameters
 |      ----------
 |      fault_to_replace : str
 |          name of the fault to remove
 |      opermode : str (optional)
 |          operational mode to return to when the fault mode is removed
 |      warnmessage : str/False
 |          Warning to give when performing operation. Default is False (no warning)
 |
 |  replace_fault(self, fault_to_replace, fault_to_add)
 |      Replace fault_to_replace with fault_to_add in the set of faults.
 |
 |      Parameters
 |      ----------
 |      fault_to_replace : str
 |          name of the fault to replace
 |      fault_to_add : str
 |          name of the fault to add in its place
 |
 |  return_mutables(self)
 |
 |  set_mode(self, mode)
 |      Set a mode in the block.
 |
 |      Parameters
 |      ----------
 |      mode : str
 |          name of the mode to enter.
 |
 |  to_fault(self, fault)
 |      Move from the current fault mode to a new fault mode.
 |
 |      Parameters
 |      ----------
 |      fault : str
 |          name of the fault mode to switch to
 |
 |  update_modestates(self)
 |      Update states of the model associated with a specific fault mode.
 |
 |      (see assoc_modes)
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  faultmodes
 |
 |  faults
 |
 |  mode_state_dict
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |
 |  __annotations__ = {&#39;faultmodes&#39;: &lt;class &#39;dict&#39;&gt;, &#39;faults&#39;: &lt;class &#39;set...
 |
 |  __defaults__ = (set(), {}, {})
 |
 |  __fields__ = (&#39;faults&#39;, &#39;faultmodes&#39;, &#39;mode_state_dict&#39;)
 |
 |  __options__ = {&#39;deep_dealloc&#39;: False, &#39;fast_new&#39;: True, &#39;gc&#39;: False, &#39;...
 |
 |  default_track = (&#39;mode&#39;, &#39;faults&#39;)
 |
 |  exclusive = False
 |
 |  failrate = 1.0
 |
 |  faultparams = {}
 |
 |  he_args = ()
 |
 |  key_phases_by = &#39;global&#39;
 |
 |  longnames = {}
 |
 |  mode = &#39;nominal&#39;
 |
 |  opermodes = (&#39;nominal&#39;,)
 |
 |  probtype = &#39;rate&#39;
 |
 |  units = &#39;hr&#39;
 |
 |  units_set = (&#39;sec&#39;, &#39;min&#39;, &#39;hr&#39;, &#39;day&#39;)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from recordclass.datatype.dataobject:
 |
 |  __copy__(...)
 |      T.__copy__() -- copy of T
 |
 |  __eq__(self, value, /)
 |      Return self==value.
 |
 |  __ge__(self, value, /)
 |      Return self&gt;=value.
 |
 |  __getstate__(...)
 |      T.__getstate__()
 |
 |  __gt__(self, value, /)
 |      Return self&gt;value.
 |
 |  __hash__(self, /)
 |      Return hash(self).
 |
 |  __le__(self, value, /)
 |      Return self&lt;=value.
 |
 |  __len__(self, /)
 |      Return len(self).
 |
 |  __lt__(self, value, /)
 |      Return self&lt;value.
 |
 |  __ne__(self, value, /)
 |      Return self!=value.
 |
 |  __reduce__(...)
 |      T.__reduce__()
 |
 |  __setstate__(...)
 |      T.__setstate__()
 |
 |  __sizeof__(...)
 |      T.__sizeof__() -- size of T
 |
 |  ----------------------------------------------------------------------
 |  Static methods inherited from recordclass.datatype.dataobject:
 |
 |  __new__(*args, **kwargs) from recordclass.datatype.datatype
 |      Create and return a new object.  See help(type) for accurate signature.

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">SampleApproach</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on class SampleApproach in module fmdtools.sim.approach:

class SampleApproach(builtins.object)
 |  SampleApproach(mdl, faults=&#39;all&#39;, phases=&#39;global&#39;, modephases={}, join_modephases=False, jointfaults={&#39;faults&#39;: &#39;None&#39;}, sampparams={}, defaultsamp={&#39;samp&#39;: &#39;evenspacing&#39;, &#39;numpts&#39;: 1}, reduce_to=False)
 |
 |  Class for defining the sample approach to be used for a set of faults.
 |
 |  Attributes
 |  ----------
 |  phases : dict
 |      phases given to sample the fault modes in
 |  globalphases : dict
 |      phases defined in the model
 |  modephases : dict
 |      Dictionary of modes associated with each state
 |  mode_phase_map : dict
 |      Mapping of modes to their corresponding phases
 |  tstep : float
 |      timestep defined in the model
 |  fxnrates : dict
 |      overall failure rates for each function
 |  comprates : dict
 |      overall failure rates for each component
 |  jointmodes : list
 |      (if any) joint fault modes to be injected in the approach
 |  rates/comprates/rates_timeless : dict
 |      rates of each mode (fxn, mode) in each model phase, structured {fxnmode: {phaseid:rate}}
 |  sampletimes : dict
 |      faults to inject at each time in each phase, structured {phaseid:time:fnxmode}
 |  weights : dict
 |      weight to put on each time each fault was injected, structured {fxnmode:phaseid:time:weight}
 |  sampparams : dict
 |      parameters used to sample each mode
 |  scenlist : list
 |      list of fault scenarios (dicts of faults and properties) that fault propagation iterates through
 |  scenids : dict
 |      a list of scenario ids associated with a given fault in a given phase, structured {(fxnmode,phaseid):listofnames}
 |  mode_phase_map : dict
 |      a dict of modes and their respective phases to inject with structure {fxnmode:{mode_phase_map:[starttime, endtime]}}
 |  units : str
 |      time-units to use in the approach probability model
 |  unit_factors : dict
 |      multiplication factors for converting some time units to others.
 |
 |  Methods defined here:
 |
 |  __init__(self, mdl, faults=&#39;all&#39;, phases=&#39;global&#39;, modephases={}, join_modephases=False, jointfaults={&#39;faults&#39;: &#39;None&#39;}, sampparams={}, defaultsamp={&#39;samp&#39;: &#39;evenspacing&#39;, &#39;numpts&#39;: 1}, reduce_to=False)
 |      Initializes the sample approach for a given model
 |
 |      Parameters
 |      ----------
 |      mdl : Model or Block
 |          Model to sample.
 |      faults : str/list/tuple, optional
 |          - The default is &#39;all&#39;, which gets all fault modes from the model.
 |          - &#39;single-component&#39; uses faults from a single component to represent faults from all components
 |          - &#39;single-function&#39; uses faults from a single function to represent faults from that type
 |          - passing the function name only includes modes from that function
 |          - List of faults of form [(fxn, mode)] to inject in the model.
 |          -Tuple arguments
 |              - (&#39;mode type&#39;, &#39;mode&#39;,&#39;notmode&#39;), gets all modes with &#39;mode&#39; as a string (e.g. &#34;mech&#34;, &#34;comms&#34;, &#34;loss&#34; faults). &#39;notmode&#39; (if given) specifies strings to remove
 |              - (&#39;mode types&#39;, (&#39;mode1&#39;, &#39;mode2&#39;)), gets all modes with the listed strings (e.g. &#34;mech&#34;, &#34;comms&#34;, &#34;loss&#34; faults)
 |              - (&#39;mode name&#39;, &#39;mode&#39;), gets all modes with the exact name &#39;mode&#39;
 |              - (&#39;mode names&#39;, (&#39;mode1&#39;, &#39;mode2&#39;)), gets all modes with the exact names defined in the tuple
 |              - (&#39;function class&#39;, &#39;Classname&#39;), which gets all modes from a function with class &#39;Classname&#39;
 |              - (&#39;function classes&#39;, (&#39;Classname1&#39;, &#39;Classname2&#39;)), which gets all modes from a function with the names in the tuple
 |              - (&#39;single-component&#39;, (&#39;fxnname2&#39;, &#39;fxnname2&#39;)), which specifies single-component modes in the given functions
 |      phases: dict or &#39;global&#39; or list
 |          Local phases in the model to sample.
 |              Dict has structure: {&#39;Function&#39;:{&#39;phase&#39;:[starttime, endtime]}}
 |              List has structure: [&#39;phase1&#39;, &#39;phase2&#39;] where phases are phases in mdl.sp.phases
 |          Defaults to &#39;global&#39;,here only the phases defined in mdl.sp.phases are used.
 |          Phases and modephases can be gotten from process.modephases(mdlhist)
 |      modephases: dict
 |          Dictionary of modes associated with each phase.
 |          For use when the opportunity vector is keyed to modes and each mode is
 |          entered multiple times in a simulation, resulting in
 |          multiple phases associated with that mode. Has structure:
 |              {&#39;Function&#39;:{&#39;mode&#39;:{&#39;phase&#39;,&#39;phase1&#39;, &#39;phase2&#39;...}}}
 |              Phases and modephases can be gotten from process.modephases(mdlhist)
 |      join_modephases: bool
 |          Whether to join phases with the same modes defined in modephases. Default is False
 |      jointfaults : dict, optional
 |          Defines how the approach considers joint faults. The default is {&#39;faults&#39;:&#39;None&#39;}. Has structure:
 |              - faults : float
 |                  # of joint faults to inject. &#39;all&#39; specifies all faults at the same time
 |              - jointfuncs :  bool
 |                  determines whether more than one mode can be injected in a single function
 |              - pcond (optional) : float in range (0,1)
 |                  conditional probabilities for joint faults. If not give, independence is assumed.
 |              - inclusive (optional) : bool
 |                  specifies whether the fault set includes all joint faults up to the given level, or only the given level
 |                  (e.g., True with &#39;all&#39; means SampleApproach includes every combination of joint fault modes while
 |                         False with &#39;all&#39; means SampleApproach only includes the joint fault mode with all faults)
 |              - limit jointphases (optional) : int
 |                  Limits the number of jointphases to sample (by randomly sampling them instead). Necessary when the
 |                  number of faults is large
 |      sampparams : dict, optional
 |          Defines how specific modes in the model will be sampled over time. The default is {}.
 |          Has structure: {key: sampparam}, where a key may be &#39;fxnmode&#39;,&#39;fxnname&#39;,&#39;mode&#39;, &#39;phase&#39;, or (&#39;fxnmode&#39;,&#39;phase&#39;)
 |          and sampparam has structure:
 |              - &#39;samp&#39; : str (&#39;quad&#39;, &#39;fullint&#39;, &#39;evenspacing&#39;,&#39;randtimes&#39;,&#39;symrandtimes&#39;)
 |                  sample strategy to use (quadrature, full integral, even spacing, random times, likeliest, or symmetric random times)
 |              - &#39;numpts&#39; : float
 |                  number of points to use (for evenspacing, randtimes, and symrandtimes only)
 |              - &#39;quad&#39; : dict
 |                  dict with structure {&#39;nodes&#39;[nodelist], &#39;weights&#39;:weightlist}
 |                  where the nodes in the nodelist range between -1 and 1
 |                  and the weights in the weightlist sum to 2.
 |      defaultsamp : TYPE, optional
 |          Defines how the model will be sampled over time by default. The default is {&#39;samp&#39;:&#39;evenspacing&#39;,&#39;numpts&#39;:1}. Has structure:
 |              - &#39;samp&#39; : str (&#39;quad&#39;, &#39;fullint&#39;, &#39;evenspacing&#39;,&#39;randtimes&#39;,&#39;symrandtimes&#39;)
 |                  sample strategy to use (quadrature, full integral, even spacing, random times,likeliest, or symmetric random times)
 |              - &#39;numpts&#39; : float
 |                  number of points to use (for evenspacing, randtimes, and symrandtimes only)
 |              - &#39;quad&#39; : dict
 |                  dict with structure {&#39;nodes&#39;[nodelist], &#39;weights&#39;:weightlist}
 |                  where the nodes in the nodelist range between -1 and 1
 |                  and the weights in the weightlist sum to 2.
 |      reduce_to : int, optional
 |          Size of random sample to reduce the number of scenarios to (if any). Default is False.
 |
 |  __repr__(self)
 |      Return repr(self).
 |
 |  add_phasetimes(self, fxnmode, phaseid, phasetimes, weights=[])
 |      Adds a set of times for a given mode to sampletimes
 |
 |  calc_intervaltime(self, times, tstep)
 |
 |  create_sampletimes(self, mdl, params={}, default={&#39;samp&#39;: &#39;evenspacing&#39;, &#39;numpts&#39;: 1})
 |      Initializes weights and sampletimes
 |
 |  create_scenarios(self)
 |      Creates list of scenarios to be iterated over in fault injection. Added as scenlist and scenids
 |
 |  get_id_weights(self)
 |      Returns a dictionary with weights for each scenario with structure {scenid:weight}
 |
 |  get_scenid_groups(self, group_by=&#39;phases&#39;, group_dict={})
 |      Returns a dict with different scenario ids grouped according to group_by.
 |      group_by: str, with options:
 |      - &#39;none&#39;:           Returns {&#39;scenid&#39;:&#39;scenid&#39;} for all scenarios
 |      - &#39;phase&#39;:          Returns {(fxnmode, fxnphase):{scenids}}--identical scenarios within a given phase are grouped
 |      - &#39;fxnfault&#39;:       Returns {fxnmode:{scenids}} All identical scenarios (fxn, mode) are grouped
 |      - &#39;mode&#39;:           Returns {mode:{scenids}}. All scenarios with the same mode name are grouped
 |      - &#39;mode type&#39;:      Returns {modetype:scenids}. All scenarios with the same mode type (mode types must be given to the sampleapproach) are grouped
 |      - &#39;functions&#39;:      Returns {function:scenids}. All scenarios and modes from a given function are grouped.
 |      - &#39;times&#39;:          Returns {time:scenids}. All scenarios at a given time are grouped.
 |      - &#39;fxnclassfault&#39;:  Returns {(fxnclass, mode):scenids}. All scenarios (fxnclass, mode) from a given function class are grouped.
 |      - &#39;fxnclass&#39;:       Returns {fxnclass:scendis}. All scenarios from a given function class are grouped.
 |      For &#39;fxnclass&#39;, &#39;fxnclassfault&#39;, and &#39;modetype&#39;, a group_dict dictionary must be provided that groups the function/mode classes/types.
 |      -------------------
 |      Returns:
 |      - grouped_scens: dict
 |            A dictionary of the scenario ids associated with the given group {group:scenids}
 |
 |  init_modelist(self, mdl, faults, jointfaults={&#39;faults&#39;: &#39;None&#39;})
 |      Initializes comprates, jointmodes internal list of modes
 |
 |  init_rates(self, mdl, jointfaults={&#39;faults&#39;: &#39;None&#39;}, modephases={}, join_modephases=False)
 |      Initializes rates, rates_timeless
 |
 |  list_moderates(self)
 |      Returns the rates for each mode
 |
 |  list_modes(self, joint=False)
 |      Returns a list of modes in the approach
 |
 |  prune_scenarios(self, endclasses, value=&#39;cost&#39;, samptype=&#39;piecewise&#39;, threshold=0.1, sampparam={&#39;samp&#39;: &#39;evenspacing&#39;, &#39;numpts&#39;: 1})
 |      Finds the best sample approach to approximate the full integral (given the approach was the full integral).
 |
 |      Parameters
 |      ----------
 |      endclasses : dict
 |          dict of results (cost, rate, expected cost) for the model run indexed by scenid
 |      value: str
 |          balue to prune scenarios over. The default is &#34;cost&#34;
 |      samptype : str (&#39;piecewise&#39; or &#39;bestpt&#39;), optional
 |          Method to use.
 |          If &#39;bestpt&#39;, finds the point in the interval that gives the average cost.
 |          If &#39;piecewise&#39;, attempts to split the inverval into sub-intervals of continuity
 |          The default is &#39;piecewise&#39;.
 |      threshold : float, optional
 |          If &#39;piecewise,&#39; the threshold for detecting a discontinuity based on deviation from linearity. The default is 0.1.
 |      sampparam : float, optional
 |          If &#39;piecewise,&#39; the sampparam sampparam to prune to. The default is {&#39;samp&#39;:&#39;evenspacing&#39;,&#39;numpts&#39;:1}, which would be a single point (optimal for linear).
 |
 |  reduce_scens_to_samp(self, samp_size=100, seed=None)
 |      Reduces the number of scenarios (in the scenlist) to a given sample size samp_size. Useful for
 |      choosing a random subset of an approach which would otherwise have a large number of scenarios.
 |      Note that many structures may not be preserved and some artefacts may be present.
 |
 |  select_points(self, param, possible_pts)
 |      Selects points in the list possible_points according to a given sample strategy.
 |
 |      Parameters
 |      ----------
 |      param : dict
 |          Sample parameter. Has structure:
 |              - &#39;samp&#39; : str (&#39;quad&#39;, &#39;fullint&#39;, &#39;evenspacing&#39;,&#39;randtimes&#39;,&#39;symrandtimes&#39;)
 |                  sample strategy to use (quadrature, full integral, even spacing, random times, or symmetric random times)
 |              - &#39;numpts&#39; : float
 |                  number of points to use (for evenspacing, randtimes, and symrandtimes only)
 |              - &#39;quad&#39; : dict
 |                  dict with structure {&#39;nodes&#39;[nodelist], &#39;weights&#39;:weightlist}
 |                  where the nodes in the nodelist range between -1 and 1
 |                  and the weights in the weightlist sum to 2.
 |      possible_pts :
 |          list of possible points in time.
 |
 |      Returns
 |      -------
 |      pts : list
 |          selected points
 |      weights : list
 |          weights for each point
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">approach</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on function approach in module fmdtools.sim.propagate:

approach(mdl, app, **kwargs)
    Injects and propagates faults in the model defined by a given sample approach

    NOTE: When calling in a script/module using parallel=True, execute using the
    protection statement ::

        if __name__ == &#39;main&#39;:
            results, mdlhists = approach(mdl, app)

    Otherwise, the method will keep spawning parallel processes.
    See multiprocessing documentation.

    Parameters
    ----------
    mdl : Simulable
        The model to inject faults in.
    app : sampleapproach
        SampleApproach used to define the list of faults and sample time for the model.
    **kwargs : kwargs
        Additional keyword arguments, may include:

        - :data:`sim_kwargs` : kwargs
              Simulation options for :func:`prop_one_scen`
        - :data:`run_kwargs` : kwargs
              Run options for :func:`nom_helper` and others
        - :data:`mult_kwargs` : kwargs
              Multi-scenario options

    Returns
    -------
    results : Result
        A Result dictionary with results desired from each scenario corresponding to
        desired_result over the set of scenarios.
    mdlhists : History
        A History dictionary with the tracked scenario (including the nominal)

</pre></div></div>
</div>
</section>
<section id="Model-Setup">
<h2>Model Setup<a class="headerlink" href="#Model-Setup" title="Permalink to this headline"></a></h2>
<p>Consider the following (highly simplified) rover electrical/navigation model. We can define the functions of this rover using the classes:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Move_Rover</span><span class="p">(</span><span class="n">FxnBlock</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span> <span class="n">flows</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">flows</span><span class="p">,</span> <span class="n">flownames</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;EE&quot;</span><span class="p">:</span><span class="s2">&quot;EE_in&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assoc_modes</span><span class="p">({</span><span class="s2">&quot;mech_loss&quot;</span><span class="p">,</span> <span class="s2">&quot;elec_open&quot;</span><span class="p">})</span>
    <span class="k">def</span> <span class="nf">behavior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">&lt;</span> <span class="n">time</span><span class="p">:</span>
            <span class="n">power</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EE_in</span><span class="o">.</span><span class="n">v_supply</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">vel</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">no_fault</span><span class="p">(</span><span class="s2">&quot;elec_open&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">EE_in</span><span class="o">.</span><span class="n">a_supply</span> <span class="o">=</span> <span class="n">power</span><span class="o">/</span><span class="mi">12</span>
            <span class="k">if</span> <span class="n">power</span> <span class="o">&gt;</span><span class="mi">100</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_fault</span><span class="p">(</span><span class="s2">&quot;elec_open&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>          <span class="bp">self</span><span class="o">.</span><span class="n">Ground</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ground</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">power</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">no_fault</span><span class="p">(</span><span class="s2">&quot;mech_loss&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This use of <code class="docutils literal notranslate"><span class="pre">assoc_modes</span></code> specifies that there are two modes to inject, “mech_loss”, and “elec_open”, with no more information given for each mode. This is a syntax one might use as one is constructing the model and wishing to verify behaviors, or where modes are only caused behaviorally due to external scenarios. (in this case an open circuit is caused by too much power supply)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Control_Rover</span><span class="p">(</span><span class="n">FxnBlock</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span> <span class="n">flows</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">flows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assoc_modes</span><span class="p">({</span><span class="s1">&#39;no_con&#39;</span><span class="p">:[</span><span class="mf">1e-4</span><span class="p">,</span> <span class="mi">200</span><span class="p">]},</span> <span class="p">[</span><span class="s1">&#39;drive&#39;</span><span class="p">,</span><span class="s1">&#39;standby&#39;</span><span class="p">],</span> <span class="n">initmode</span><span class="o">=</span><span class="s1">&#39;standby&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">behavior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">time</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s1">&#39;no_con&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">time</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="s1">&#39;drive&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">time</span> <span class="o">==</span> <span class="mi">50</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="s1">&#39;standby&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">time</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s1">&#39;drive&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">power</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s1">&#39;standby&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">power</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<p>This use of <code class="docutils literal notranslate"><span class="pre">assoc_modes</span></code> specifies modes (<code class="docutils literal notranslate"><span class="pre">no_con</span></code>) with a rate (1e-4) and a repair cost (200), as well as a set of operational modes that the system proceeds through. Specifying operational modes enables one to define different <em>behaviors</em> for the system depending on the configuration of the system at a given time. For example, in this function, the system goes into a drive mode at t=5, which powers on the system and outputs a command to move forwaan.</p>
<p>When operational modes are specified in the model, an initial mode must also be specified–in this case <code class="docutils literal notranslate"><span class="pre">initmode='standby'</span></code> specifies that the function starts in the standby mode.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Store_Energy</span><span class="p">(</span><span class="n">FxnBlock</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">flows</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">flows</span><span class="p">,</span> <span class="n">states</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;charge&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assoc_modes</span><span class="p">({</span><span class="s2">&quot;no_charge&quot;</span><span class="p">:[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;standby&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">},</span> <span class="mi">100</span><span class="p">],</span><span class="s2">&quot;short&quot;</span><span class="p">:[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;supply&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">},</span> <span class="mi">100</span><span class="p">],},</span> <span class="p">[</span><span class="s2">&quot;supply&quot;</span><span class="p">,</span><span class="s2">&quot;charge&quot;</span><span class="p">,</span><span class="s2">&quot;standby&quot;</span><span class="p">],</span> <span class="n">initmode</span><span class="o">=</span><span class="s2">&quot;standby&quot;</span><span class="p">,</span> <span class="n">exclusive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">key_phases_by</span><span class="o">=</span><span class="s1">&#39;self&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">behavior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">time</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s2">&quot;standby&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">EE</span><span class="o">.</span><span class="n">v_supply</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">EE</span><span class="o">.</span><span class="n">a_supply</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">power</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="s2">&quot;supply&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s2">&quot;charge&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">EE</span><span class="o">.</span><span class="n">charge</span> <span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">EE</span><span class="o">.</span><span class="n">charge</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">dt</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s2">&quot;supply&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>         <span class="bp">self</span><span class="o">.</span><span class="n">EE</span><span class="o">.</span><span class="n">v_supply</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">-=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dt</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="s2">&quot;no_charge&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">power</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="s2">&quot;standby&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s2">&quot;short&quot;</span><span class="p">):</span>     <span class="bp">self</span><span class="o">.</span><span class="n">EE</span><span class="o">.</span><span class="n">v_supply</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_mode</span><span class="p">(</span><span class="s2">&quot;no_charge&quot;</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">EE</span><span class="o">.</span><span class="n">v_supply</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<p>In addition to operational modes, the Battery Function additionally specifies an <em>opportunity vector</em> which defines when each fault mode is likely to occur (and thus be injected in the model). In this case, <code class="docutils literal notranslate"><span class="pre">no_charge</span></code> can only occur during standby mode, while a <code class="docutils literal notranslate"><span class="pre">short</span></code> can only occur during the supply mode. The <code class="docutils literal notranslate"><span class="pre">key_phases_by='self'</span></code> option specifies that these phases are <em>internal</em> to the function. Opporunity vectors can also be keyed to phases in other functions using
<code class="docutils literal notranslate"><span class="pre">key_phases_by='fxnname'</span></code> and <code class="docutils literal notranslate"><span class="pre">key_phases_by='global'</span></code>. There are several ways to define this opportunity vector, which will be described later.</p>
<p>This model also uses the <code class="docutils literal notranslate"><span class="pre">exclusive</span></code> option, which specifies that fault modes cannot co-occur with operational modes. That is, instead of <em>modifying</em> individual mode behaviors, fault modes in this function instead cause the system to enter a new mode with different defined mode behaviors.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fmdtools.analyze</span> <span class="k">as</span> <span class="nn">an</span>
<span class="k">class</span> <span class="nc">Rover</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{},</span>\
                 <span class="n">modelparams</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;times&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mi">60</span><span class="p">],</span> <span class="s1">&#39;tstep&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;phases&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;firsthalf&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;secondhalf&#39;</span><span class="p">:[</span><span class="mi">31</span><span class="p">,</span><span class="mi">60</span><span class="p">]}},</span>\
                 <span class="n">valparams</span><span class="o">=</span><span class="p">{}):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">modelparams</span><span class="p">,</span> <span class="n">valparams</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_flow</span><span class="p">(</span><span class="s1">&#39;Ground&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_flow</span><span class="p">(</span><span class="s1">&#39;EE&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;v_supply&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;a_supply&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_flow</span><span class="p">(</span><span class="s1">&#39;Control&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;dir&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;power&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_fxn</span><span class="p">(</span><span class="s2">&quot;Control_Rover&quot;</span><span class="p">,[</span><span class="s2">&quot;EE&quot;</span><span class="p">,</span> <span class="s2">&quot;Control&quot;</span><span class="p">],</span> <span class="n">fclass</span><span class="o">=</span><span class="n">Control_Rover</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_fxn</span><span class="p">(</span><span class="s2">&quot;Move_Rover&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Ground&quot;</span><span class="p">,</span><span class="s2">&quot;EE&quot;</span><span class="p">,</span> <span class="s2">&quot;Control&quot;</span><span class="p">],</span> <span class="n">fclass</span> <span class="o">=</span> <span class="n">Move_Rover</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_fxn</span><span class="p">(</span><span class="s2">&quot;Store_Energy&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;EE&quot;</span><span class="p">,</span> <span class="s2">&quot;Control&quot;</span><span class="p">],</span> <span class="n">Store_Energy</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">build_model</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">find_classification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scen</span><span class="p">,</span> <span class="n">mdlhists</span><span class="p">):</span>
        <span class="n">repcost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_repaircost</span><span class="p">()</span>
        <span class="n">losscost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">get_fault_time</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;total&#39;</span><span class="p">)</span>
        <span class="n">totcost</span><span class="o">=</span><span class="n">repcost</span><span class="o">+</span><span class="n">losscost</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:</span><span class="n">totcost</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span><span class="n">scen</span><span class="o">.</span><span class="n">rate</span><span class="p">,</span> <span class="s1">&#39;expected cost&#39;</span><span class="p">:</span><span class="n">totcost</span><span class="o">*</span><span class="n">scen</span><span class="o">.</span><span class="n">rate</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&quot;global&quot;</span></code> phases in the model are defined using the ‘phases’ string in model parameters. Phases define distinct periods or activities of operation when the model may be in a different state (resulting in different potential failure mode effects and opportunities for failure modes to be entered).</p>
</section>
<section id="Setting-up-an-approach">
<h2>Setting up an approach<a class="headerlink" href="#Setting-up-an-approach" title="Permalink to this headline"></a></h2>
<p>Because this model has an opportunity vector which is keyed by its operational modes, the history of modes needs to be generated for the model to set up the sample approach–otherwise this information cannot be used, as shown below:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span> <span class="o">=</span> <span class="n">Rover</span><span class="p">()</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">c:\users\dhulse\documents\github\fmdtools\fmdtools\define\parameter.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, strict_immutability, check_type, check_pickle, *args, **kwargs)</span>
<span class="ansi-green-fg">     62</span>         <span class="ansi-green-intense-fg ansi-bold">try</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">---&gt; 63</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>__init__<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">*</span>args<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">**</span>kwargs<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">     64</span>         <span class="ansi-green-intense-fg ansi-bold">except</span> TypeError<span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-red-intense-fg ansi-bold">TypeError</span>: Invalid kwarg

During handling of the above exception, another exception occurred:

<span class="ansi-red-intense-fg ansi-bold">Exception</span>                                 Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">~\AppData\Local\Temp\1/ipykernel_4204/3690765673.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>mdl <span class="ansi-yellow-intense-fg ansi-bold">=</span> Rover<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">      2</span> app <span class="ansi-yellow-intense-fg ansi-bold">=</span> SampleApproach<span class="ansi-yellow-intense-fg ansi-bold">(</span>mdl<span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">~\AppData\Local\Temp\1/ipykernel_4204/3942537109.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, params, modelparams, valparams)</span>
<span class="ansi-green-fg">      4</span>                  modelparams<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-blue-intense-fg ansi-bold">&#39;times&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-cyan-intense-fg ansi-bold">0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-cyan-intense-fg ansi-bold">60</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;tstep&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-cyan-intense-fg ansi-bold">1</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;phases&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span> <span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-blue-intense-fg ansi-bold">&#39;firsthalf&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-cyan-intense-fg ansi-bold">0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-cyan-intense-fg ansi-bold">30</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;secondhalf&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-cyan-intense-fg ansi-bold">31</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-cyan-intense-fg ansi-bold">60</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-red-fg">\</span>
<span class="ansi-green-fg">      5</span>                  valparams={}):
<span class="ansi-green-intense-fg ansi-bold">----&gt; 6</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>__init__<span class="ansi-yellow-intense-fg ansi-bold">(</span>params<span class="ansi-yellow-intense-fg ansi-bold">,</span> modelparams<span class="ansi-yellow-intense-fg ansi-bold">,</span> valparams<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">      7</span>
<span class="ansi-green-fg">      8</span>         self<span class="ansi-yellow-intense-fg ansi-bold">.</span>add_flow<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-blue-intense-fg ansi-bold">&#39;Ground&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-blue-intense-fg ansi-bold">&#39;x&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-cyan-intense-fg ansi-bold">0.0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-blue-intense-fg ansi-bold">&#39;y&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-cyan-intense-fg ansi-bold">0.0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;dir&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-cyan-intense-fg ansi-bold">0.0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;vel&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span><span class="ansi-cyan-intense-fg ansi-bold">0.0</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">c:\users\dhulse\documents\github\fmdtools\fmdtools\define\model.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, name, p, sp, r, track)</span>
<span class="ansi-green-fg">     51</span>     &#34;&#34;&#34;
<span class="ansi-green-fg">     52</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> __init__<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> p<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> sp<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> r<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> track<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">---&gt; 53</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>__init__<span class="ansi-yellow-intense-fg ansi-bold">(</span>name<span class="ansi-yellow-intense-fg ansi-bold">=</span>name<span class="ansi-yellow-intense-fg ansi-bold">,</span> p<span class="ansi-yellow-intense-fg ansi-bold">=</span>p<span class="ansi-yellow-intense-fg ansi-bold">,</span> sp<span class="ansi-yellow-intense-fg ansi-bold">=</span>sp<span class="ansi-yellow-intense-fg ansi-bold">,</span> r<span class="ansi-yellow-intense-fg ansi-bold">=</span>r<span class="ansi-yellow-intense-fg ansi-bold">,</span> track<span class="ansi-yellow-intense-fg ansi-bold">=</span>track<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">     54</span>
<span class="ansi-green-fg">     55</span>         self<span class="ansi-yellow-intense-fg ansi-bold">.</span>fxns<span class="ansi-yellow-intense-fg ansi-bold">=</span>dict<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">c:\users\dhulse\documents\github\fmdtools\fmdtools\define\block.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, name, p, sp, r, track)</span>
<span class="ansi-green-fg">    131</span>         <span class="ansi-green-intense-fg ansi-bold">if</span> <span class="ansi-green-intense-fg ansi-bold">not</span> sp<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">    132</span>             sp <span class="ansi-yellow-intense-fg ansi-bold">=</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>default_sp
<span class="ansi-green-intense-fg ansi-bold">--&gt; 133</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>init_obj_attr<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> p<span class="ansi-yellow-intense-fg ansi-bold">=</span>p<span class="ansi-yellow-intense-fg ansi-bold">,</span> sp<span class="ansi-yellow-intense-fg ansi-bold">=</span>sp<span class="ansi-yellow-intense-fg ansi-bold">,</span> r<span class="ansi-yellow-intense-fg ansi-bold">=</span>r<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    134</span>
<span class="ansi-green-fg">    135</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> add_flow_hist<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> hist<span class="ansi-yellow-intense-fg ansi-bold">,</span> timerange<span class="ansi-yellow-intense-fg ansi-bold">,</span> track<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\users\dhulse\documents\github\fmdtools\fmdtools\define\common.py</span> in <span class="ansi-cyan-fg">init_obj_attr</span><span class="ansi-blue-intense-fg ansi-bold">(obj, **attrs)</span>
<span class="ansi-green-fg">    189</span>         setattr<span class="ansi-yellow-intense-fg ansi-bold">(</span>obj<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;_args_&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">+</span>at<span class="ansi-yellow-intense-fg ansi-bold">,</span> at_arg<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    190</span>         init_at <span class="ansi-yellow-intense-fg ansi-bold">=</span> getattr<span class="ansi-yellow-intense-fg ansi-bold">(</span>obj<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;_init_&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">+</span>at<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 191</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>setattr<span class="ansi-yellow-intense-fg ansi-bold">(</span>obj<span class="ansi-yellow-intense-fg ansi-bold">,</span> at<span class="ansi-yellow-intense-fg ansi-bold">,</span> init_at<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">**</span>at_arg<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    192</span>
<span class="ansi-green-fg">    193</span>

<span class="ansi-green-intense-fg ansi-bold">c:\users\dhulse\documents\github\fmdtools\fmdtools\define\parameter.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, strict_immutability, check_type, check_pickle, *args, **kwargs)</span>
<span class="ansi-green-fg">     63</span>             super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>__init__<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">*</span>args<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">**</span>kwargs<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">     64</span>         <span class="ansi-green-intense-fg ansi-bold">except</span> TypeError<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">---&gt; 65</span><span class="ansi-yellow-intense-fg ansi-bold">             raise Exception(&#34;Invalid args/kwargs: &#34;+str(args)+&#34; , &#34; +
</span><span class="ansi-green-fg">     66</span>                             str(kwargs)+&#34; in &#34;+str(self.__class__))
<span class="ansi-green-fg">     67</span>         <span class="ansi-green-intense-fg ansi-bold">if</span> strict_immutability<span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-red-intense-fg ansi-bold">Exception</span>: Invalid args/kwargs: () , {&#39;times&#39;: [0, 60], &#39;tstep&#39;: 1, &#39;phases&#39;: {&#39;firsthalf&#39;: [0, 30], &#39;secondhalf&#39;: [31, 60]}} in &lt;class &#39;fmdtools.define.parameter.Parameter&#39;&gt;
</pre></div></div>
</div>
<p>To form this history, the model is run in the nominal scenario, as shown.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclass</span> <span class="p">,</span><span class="n">mdlhist</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">nominal</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
<span class="n">mdlhist</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">][</span><span class="s1">&#39;Store_Energy&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>To get the phase information, the ‘process.modephases’ method is used.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">phases</span><span class="p">,</span> <span class="n">modephases</span> <span class="o">=</span> <span class="n">mdlhist</span><span class="o">.</span><span class="n">get_modephases</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Which returns <code class="docutils literal notranslate"><span class="pre">phases</span></code>, the phases of operation for each function where operational modes were defined:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">phases</span>
</pre></div>
</div>
</div>
<p>as well as <code class="docutils literal notranslate"><span class="pre">modephases</span></code>, which lists the phases associated with each mode.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">modephases</span>
</pre></div>
</div>
</div>
<p>These phases can be visualized with <code class="docutils literal notranslate"><span class="pre">an.plot.phases</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">phases</span><span class="p">(</span><span class="n">phases</span><span class="p">,</span><span class="n">modephases</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>To correctly sample according to the fault model’s intent (that each fault can occur within each <code class="docutils literal notranslate"><span class="pre">mode</span></code>), SampleApproach is given both <code class="docutils literal notranslate"><span class="pre">phases</span></code> and <code class="docutils literal notranslate"><span class="pre">modephases</span></code>, as shown below.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_correct</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="n">phases</span><span class="p">,</span> <span class="n">modephases</span><span class="o">=</span><span class="n">modephases</span><span class="p">)</span>
<span class="n">app_correct</span><span class="o">.</span><span class="n">sampletimes</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">phases</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_incorrect</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="n">phases</span><span class="p">)</span>
<span class="n">app_incorrect</span><span class="o">.</span><span class="n">sampletimes</span>
</pre></div>
</div>
</div>
<p>As shown, in the first sampleapproach, only the first phases of the mode are sampled, and not the second phases, because there is nothing to tell the approach which phases are associated with which mode, and the opportunity vector was keyed by modes. However, there are cases where it may not be necessary to provide <code class="docutils literal notranslate"><span class="pre">modephases</span></code> when providing , specifically: - If the opportunity vector is defined in terms of local <code class="docutils literal notranslate"><span class="pre">phases</span></code> directly instead of <code class="docutils literal notranslate"><span class="pre">modes</span></code>, (e.g. by <code class="docutils literal notranslate"><span class="pre">{standby</span></code>:rate,
<code class="docutils literal notranslate"><span class="pre">supply</span></code>:rate, <code class="docutils literal notranslate"><span class="pre">standby1</span></code>:rate})) - If only the first phase is of interest - If all fault modes are keyed by <code class="docutils literal notranslate"><span class="pre">global</span></code> phases</p>
<p>Note how different opportunity vectors lead to different sample approaches:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_correct</span><span class="o">.</span><span class="n">sampletimes</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Move_Rover</span></code>, and <code class="docutils literal notranslate"><span class="pre">Control_Rover</span></code>, where no opportunity vector was provided, are sampled once in the middle of an <code class="docutils literal notranslate"><span class="pre">operating</span></code> phase</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Store_Energy</span></code> is sampled once in each given phase (defined itself).</p></li>
<li><p>None of the modes are sampled during the global phases (although they could be, if that was provided in the function defintion)</p></li>
</ul>
<p>Joint fault modes can additionally be inserted in the model. These fault modes are given their own phases for rates and injection times by finding the overlap between the operational phases of their constituent modes:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_joint</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="n">phases</span><span class="p">,</span> <span class="n">modephases</span><span class="o">=</span><span class="n">modephases</span><span class="p">,</span> <span class="n">jointfaults</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;faults&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
<span class="n">app_joint</span><span class="o">.</span><span class="n">sampletimes</span>
</pre></div>
</div>
</div>
</section>
<section id="Propagating-Faults">
<h2>Propagating Faults<a class="headerlink" href="#Propagating-Faults" title="Permalink to this headline"></a></h2>
<p>Given the fault sampling approach, the faults can then be propagated through the model to get results. Note that these faults can be sampled in parallel if desired using a user-provided pool (see the parallel pool tutorial in the <code class="docutils literal notranslate"><span class="pre">\pump</span> <span class="pre">example</span></code> folder).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses</span><span class="p">,</span> <span class="n">mdlhists</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_correct</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses</span>
</pre></div>
</div>
</div>
<p>Note that the results here reflect the lack of information given for rates in the <code class="docutils literal notranslate"><span class="pre">Control_Rover</span></code> and <code class="docutils literal notranslate"><span class="pre">Move_Rover</span></code> functions (which default to a value of 1) and the rates do not correspond <em>direct</em> to the given rates because rates shown here are per-run rates which are spread over the model. Additionally, all scenarios default to a cost of 1 because of the lack of a classification function.</p>
<p>These responses can be visualized:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">samplemetrics</span><span class="p">(</span><span class="n">app_correct</span><span class="p">,</span> <span class="n">endclasses</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Time-Sampling-Options">
<h3>Time Sampling Options<a class="headerlink" href="#Time-Sampling-Options" title="Permalink to this headline"></a></h3>
<p>Above shows the default time-sampling option–a single fault sample in the middle of the operational phase. However, this approach can be varied to include multiple points for a more accurate sample. This is varied using the options: - defaultsamp (a dict), which specifies the default sampling approach for all faults/phases - sampparams (a dict), which specifies the sampling approach for individual faults/phases not included in the default</p>
<p>For example, in the following approach, we specify that each phase is represented by three evenly-spaced points</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_three</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="n">phases</span><span class="p">,</span> <span class="n">modephases</span><span class="o">=</span><span class="n">modephases</span><span class="p">,</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;evenspacing&#39;</span><span class="p">,</span> <span class="s1">&#39;numpts&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_three</span><span class="o">.</span><span class="n">times</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_three</span><span class="p">,</span> <span class="n">mdlhists_three</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_three</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">samplemetrics</span><span class="p">(</span><span class="n">app_three</span><span class="p">,</span> <span class="n">endclasses_three</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can also supply a quadrature externally by specifying a dictionary with node and weight positions. These can come from an external quadrature generator (e.g., quadpy, scipy).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">integrate</span>
<span class="n">nodes</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">_quadrature</span><span class="o">.</span><span class="n">_cached_roots_legendre</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nodes</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">weights</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_quad</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="n">phases</span><span class="p">,</span> <span class="n">modephases</span><span class="o">=</span><span class="n">modephases</span><span class="p">,</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;quadrature&#39;</span><span class="p">,</span> <span class="s1">&#39;quad&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;nodes&#39;</span><span class="p">:</span><span class="n">nodes</span><span class="p">,</span><span class="s1">&#39;weights&#39;</span><span class="p">:</span><span class="n">weights</span><span class="p">}})</span>
<span class="n">endclasses_quad</span><span class="p">,</span> <span class="n">mdlhists_quad</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_quad</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_quad</span><span class="o">.</span><span class="n">times</span>
</pre></div>
</div>
</div>
<p>As shown, while the times are <em>similar</em> to an evenly-spaced quadrature, they are not quite the same. Additionally, the weights of the quadrature mean that some points matter more when calculating the overall sum of sample costs. This can be visualized below:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">samplemetrics</span><span class="p">(</span><span class="n">app_quad</span><span class="p">,</span> <span class="n">endclasses_quad</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can also sample every time–this is costly (often prohibitively). However, one has more assurance with a full approach that the overall integration will be accurate, an important consideration when the resilience loss function is nonlinear (e.g., systems where there are delays or step-changes in the faulty behavior)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_full</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="n">phases</span><span class="p">,</span> <span class="n">modephases</span><span class="o">=</span><span class="n">modephases</span><span class="p">,</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
<span class="n">endclasses_full</span><span class="p">,</span> <span class="n">mdlhists_full</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_full</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">samplemetrics</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">endclasses_full</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>As shown, the cost function is effectively linear over time. This is expected, since the costs we put in <code class="docutils literal notranslate"><span class="pre">find_classification</span></code> are based on the amount of time the fault is present in the simulation.</p>
</section>
</section>
<section id="Pruning">
<h2>Pruning<a class="headerlink" href="#Pruning" title="Permalink to this headline"></a></h2>
<p>SampleApproach pruning can be used to reduce the number of points used to represent the overall costs. A pruned approach could then be used to re-run the set of faults at reduced computational costs, provided the time-based behavior has not changed significantly. This is performed using the SampleApproach.prune_scenarios method.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">app_full</span><span class="o">.</span><span class="n">prune_scenarios</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_full</span><span class="o">.</span><span class="n">prune_scenarios</span><span class="p">(</span><span class="n">endclasses_full</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_full</span><span class="o">.</span><span class="n">times</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_pruned</span><span class="p">,</span> <span class="n">mdlhists_pruned</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_full</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>As shown, with the default options the pruned sampling approach applies a centered single-point, as would happen using the default options. This would change if there were nonlinearities in the resilience loss function.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">samplemetrics</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">endclasses_pruned</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>A more detailed investigation of sampling approaches is provided in <code class="docutils literal notranslate"><span class="pre">/example_pump/IDETC_Results/IDETC_Figures.ipynb</span></code> and its corresponding paper:</p>
<p><em>Hulse, D., Hoyle, C., Tumer, I. Y., Goebel, K., &amp; Kulkarni, C. (2020, August). Temporal Fault Injection Considerations in Resilience Quantification. In International Design Engineering Technical Conferences and Computers and Information in Engineering Conference (Vol. 84003, p. V11AT11A040). American Society of Mechanical Engineers.</em></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Rover_Setup_Notebook.html" class="btn btn-neutral float-left" title="Rover Model Explanation and Preliminaries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Nominal_Approach_Use-Cases.html" class="btn btn-neutral float-right" title="Defining Nominal Approaches in fmdtools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>