<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fmdtools Tutorial &mdash; fmdtools 2.0-alpha documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/fmdtools_ico.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo_glow.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../README.html#contributors">Contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#notices">Notices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../README.html#disclaimers">Disclaimers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Development%20Guide.html">Development Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#repo-structure">Repo Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Development%20Guide.html#remote-structure">Remote Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#development-process">Development Process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Development%20Guide.html#upload-to-pypi">Upload to PyPI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#roles">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#model-development-best-practices">Model Development Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#plan-your-model-to-avoid-technical-debt">Plan your model to avoid technical debt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#don-t-copy-inherit-and-functionalize">Don’t copy, inherit and functionalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#document-your-code-sometimes-before-your-write-it">Document your code, sometimes <em>before</em> your write it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#don-t-get-ahead-of-yourself-try-to-get-a-running-simulation-first">Don’t get ahead of yourself–try to get a running simulation first</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#preserve-your-prototype-setup-by-formalizing-it-as-a-test">Preserve your prototype setup by formalizing it as a test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#edit-your-code">Edit your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#structuring-a-model">Structuring a model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#use-model-constructs-to-simplify-your-code">Use model constructs to simplify your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#style-advice">Style advice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#see-also">See also</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Examples.html">Examples</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/fmdtools.html">Module Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.define.html">fmdtools.define package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.block">fmdtools.define.block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.common">fmdtools.define.common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.flow">fmdtools.define.flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.mode">fmdtools.define.mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.model">fmdtools.define.model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.parameter">fmdtools.define.parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.rand">fmdtools.define.rand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.state">fmdtools.define.state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.time">fmdtools.define.time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.sim.html">fmdtools.sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#fmdtools-sim-propagate">fmdtools.sim.propagate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.scenario">fmdtools.sim.scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.approach">fmdtools.sim.approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.search">fmdtools.sim.search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.analyze.html">fmdtools.analyze package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.graph">fmdtools.analyze.result</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.plot">fmdtools.analyze.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-0">fmdtools.analyze.graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.tabulate">fmdtools.analyze.tabulate</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">fmdtools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>fmdtools Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/pump/Tutorial_complete.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="fmdtools-Tutorial">
<h1>fmdtools Tutorial<a class="headerlink" href="#fmdtools-Tutorial" title="Permalink to this headline"></a></h1>
<p>This tutorial notebook will show some of the basic commands needed to perform resilience analysis in fmdtools.</p>
<p>For some context, it may be helpful to look through the accompanying presentation. This notebook uses the model defined in <code class="docutils literal notranslate"><span class="pre">ex_pump.py</span></code>. In this notebook, we will:</p>
<ul class="simple">
<li><p>Load an environment and model</p></li>
<li><p>Simulate the system in nominal and faulty scenarios</p></li>
<li><p>Visualize and quantify the results</p></li>
</ul>
<section id="1.)-Loading-the-environment-and-model">
<h2>1.) Loading the environment and model<a class="headerlink" href="#1.)-Loading-the-environment-and-model" title="Permalink to this headline"></a></h2>
<p>To load the <code class="docutils literal notranslate"><span class="pre">fmdtools</span></code> environment, we have to install and import it. This can be accomplished using <code class="docutils literal notranslate"><span class="pre">pip</span></code> for both the stable and development versions:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">##Stable (PyPl) version</span>
<span class="c1"># pip install fmdtools</span>

<span class="c1">##Development version (downloaded from git)</span>
<span class="c1"># pip install -e /path/to/fmdtools ##Note that /path/to/fmdtools is the path to the fmdtools repo</span>
</pre></div>
</div>
</div>
<p>There are a number of different syntaxes for importing modules. Because of the long names of the module trees, it is often helpful to load the modules individually and abbreviate (e.g. <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">fmdtools.sim.propagate</span> <span class="pre">as</span> <span class="pre">propagate</span></code>). Below, import the propagate <code class="docutils literal notranslate"><span class="pre">fmdtools.sim.propagate</span></code> and <code class="docutils literal notranslate"><span class="pre">fmdtools.analyze</span></code> modules, as well as the <code class="docutils literal notranslate"><span class="pre">SampleApproach</span></code> from <code class="docutils literal notranslate"><span class="pre">fmdtools.define</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fmdtools.sim.propagate</span> <span class="k">as</span> <span class="nn">propagate</span>
<span class="kn">import</span> <span class="nn">fmdtools.analyze</span> <span class="k">as</span> <span class="nn">an</span>
<span class="kn">from</span> <span class="nn">fmdtools.define</span> <span class="kn">import</span> <span class="n">SampleApproach</span>
</pre></div>
</div>
</div>
<p>Now, import the Pump class defined in the ex_pump module.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ex_pump</span> <span class="kn">import</span> <span class="n">Pump</span>
</pre></div>
</div>
</div>
<p>We can then use that to instantiate a model object. See:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>To get started, it can be helpful to view some of the aspects of the model. Try <code class="docutils literal notranslate"><span class="pre">dir(mdl)</span></code>, <code class="docutils literal notranslate"><span class="pre">mdl.fxns</span></code>, <code class="docutils literal notranslate"><span class="pre">mdl.flows</span></code>, <code class="docutils literal notranslate"><span class="pre">mdl.graph</span></code>, etc.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;ImportEE&#39;: ImportEE ImportEE function: ({&#39;mode&#39;: &#39;nom&#39;}, {&#39;nom&#39;}),
 &#39;ImportWater&#39;: ImportWater ImportWater function: ({&#39;mode&#39;: &#39;nom&#39;}, {&#39;nom&#39;}),
 &#39;ImportSignal&#39;: ImportSignal ImportSig function: ({&#39;mode&#39;: &#39;nom&#39;}, {&#39;nom&#39;}),
 &#39;MoveWater&#39;: MoveWater MoveWat function: ({&#39;eff&#39;: 1.0, &#39;mode&#39;: &#39;nom&#39;}, {&#39;nom&#39;}),
 &#39;ExportWater&#39;: ExportWater ExportWater function: ({&#39;mode&#39;: &#39;nom&#39;}, {&#39;nom&#39;})}
</pre></div></div>
</div>
<p>We can also view the run order to see how the model will be simulated. More details on run order are provided in <a class="reference external" href="../docs/Model_Structure_Visualization_Tutorial.ipynb">Model Structure Visualization Tutorial</a>, but in short static propagation functions simulate multiple times per time-step until the model converges, while dynamic propagation functions run once per timestep in a defined order.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">exec_order</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_12_0.png" src="../../_images/examples_pump_Tutorial_complete_12_0.png" />
</div>
</div>
<p>As shown, because all of the methods were defined as generic behaviors, they are each run in the static propagation step. No order is shown in the static step because the static propagation step iterates between model functions until the values have converged. Nevertheless, one can view the initial static order using:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">staticfxns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedSet([&#39;ImportEE&#39;, &#39;ImportWater&#39;, &#39;ImportSignal&#39;, &#39;MoveWater&#39;, &#39;ExportWater&#39;])
</pre></div></div>
</div>
<p>and the dynamic step order (if there was one):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">dynamicfxns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedSet()
</pre></div></div>
</div>
<p>We can also instantiate this model with different parameters. There are three main parameter dictionaries: - params, which are design parameters of the model (e.g., initial values, situational parameters, etc). In this model, we use the values: <code class="docutils literal notranslate"><span class="pre">params={'cost':{'repair',</span> <span class="pre">'water'},</span> <span class="pre">'delay':10}</span></code>, specifying that we are tabulating costs (in find_classification) of repair and water loss. To change which costs are tabulated, we could also pass any set of costs in
<code class="docutils literal notranslate"><span class="pre">{'repair',</span> <span class="pre">'water',</span> <span class="pre">'water_exp',</span> <span class="pre">'ee'}</span></code>. We also use the <code class="docutils literal notranslate"><span class="pre">delay</span></code> parameter, which specifies how long the pressure in the Pump may be elevated before there is a mechanical breakage (<code class="docutils literal notranslate"><span class="pre">mech_break</span></code>) fault. - modelparams, which specifies the simulation parameters of the model, including phases (used in sampleapproaches), times (the start and end-time of the simulation), the timestep, and the timestep units. The default in the model is:
<code class="docutils literal notranslate"><span class="pre">modelparams</span> <span class="pre">=</span> <span class="pre">{'phases':{'start':[0,4],</span> <span class="pre">'on':[5,</span> <span class="pre">49],</span> <span class="pre">'end':[50,55]},</span> <span class="pre">'times':[0,20,</span> <span class="pre">55],</span> <span class="pre">'tstep':1,</span> <span class="pre">'units':'hrs'}</span></code> - valparams, which specifies which parameters are required to keep a history of for <code class="docutils literal notranslate"><span class="pre">find_classification</span></code>. These parameters are used less often, but can be useful for optimizing tracking options to reduce computational cost.</p>
<p>Below we instantiate the model with non-default parameters:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl2</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:{</span><span class="s1">&#39;repair&#39;</span><span class="p">,</span> <span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">},</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;hrs&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</section>
<section id="2.),-3.),-and-4.)-Simulate-and-visualize-the-results!">
<h2>2.), 3.), and 4.) Simulate and visualize the results!<a class="headerlink" href="#2.),-3.),-and-4.)-Simulate-and-visualize-the-results!" title="Permalink to this headline"></a></h2>
<p>Now, we will use the methods in <code class="docutils literal notranslate"><span class="pre">propagate</span></code> and the visualization modules in <code class="docutils literal notranslate"><span class="pre">rd</span></code> to simulate the model and visualize the results.</p>
<section id="2a.)-Simulate-nominal">
<h3>2a.) Simulate nominal<a class="headerlink" href="#2a.)-Simulate-nominal" title="Permalink to this headline"></a></h3>
<p>To simulate the model in the nominal scenario, use the <code class="docutils literal notranslate"><span class="pre">propagate.nominal</span></code> method, which returns: endresults, which is a result (or a dict of multiple results) specified by the <code class="docutils literal notranslate"><span class="pre">desired_result</span></code> option, e.g.: - ‘endclass’ (default), which provides the dict from <code class="docutils literal notranslate"><span class="pre">mdl.find_classification</span></code> - ‘fxngraph’/‘fxnflowgraph’/‘typegraph’,‘component’, which provides a networkx graph view of the model with degraded faults and functions highlighted (e.g., for <code class="docutils literal notranslate"><span class="pre">an.graph.show</span></code>) -
‘fxnname.varname’/‘flowname.varname’: which gets the values of these variables at a the end - a list of the above arguments (to return a dict of multiple) - a dict of lists (for multiple over time), e.g. <code class="docutils literal notranslate"><span class="pre">{time:[varnames,...</span> <span class="pre">'endclass']}</span></code></p>
<p>and mdlhist, which is a history of model states specified by the <code class="docutils literal notranslate"><span class="pre">track</span></code> option. Some of these options include: - functions’ - ‘flows’ - ‘all’ - ‘none’ - ‘valparams’ (model states specified in mdl.valparams), - or a dict of form: <code class="docutils literal notranslate"><span class="pre">{'functions':{'fxn1':'att1'},</span> <span class="pre">'flows':{'flow1':'att1'}}</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclass_nominal</span><span class="p">,</span> <span class="n">mdlhist_nominal</span><span class="o">=</span><span class="n">propagate</span><span class="o">.</span><span class="n">nominal</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">track</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">desired_result</span><span class="o">=</span><span class="s2">&quot;endclass&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>What do the results look like? Explore results structures using the <code class="docutils literal notranslate"><span class="pre">desired_results</span></code> and <code class="docutils literal notranslate"><span class="pre">track</span></code> arguments.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclass_nominal</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;rate&#39;: 1.0, &#39;cost&#39;: 0.0, &#39;expected cost&#39;: 0.0}
</pre></div></div>
</div>
<p>Note that an <code class="docutils literal notranslate"><span class="pre">endclass</span></code> dictionary can take arbitrary form based on what is produced in <code class="docutils literal notranslate"><span class="pre">find_classification</span></code>. Typically, we often return: - <code class="docutils literal notranslate"><span class="pre">rate</span></code>, which is the rate for the scenario calculated from the underlying fault probability model (defined in <code class="docutils literal notranslate"><span class="pre">FxnBlock.assoc_modes</span></code>), - <code class="docutils literal notranslate"><span class="pre">cost</span></code>, which is some cost calculated based on the consequences of the scenario - <code class="docutils literal notranslate"><span class="pre">expected</span> <span class="pre">cost</span></code>, which is the expected value of the cost of the scenario (i.e. <code class="docutils literal notranslate"><span class="pre">rate*cost</span></code>).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdlhist_nominal</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;flows&#39;: {&#39;EE_1&#39;: {&#39;current&#39;: array([ 0.,  0.,  0.,  0.,  0., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,  0.,  0.,
           0.,  0.,  0.,  0.]),
   &#39;voltage&#39;: array([500., 500., 500., 500., 500., 500., 500., 500., 500., 500., 500.,
          500., 500., 500., 500., 500., 500., 500., 500., 500., 500., 500.,
          500., 500., 500., 500., 500., 500., 500., 500., 500., 500., 500.,
          500., 500., 500., 500., 500., 500., 500., 500., 500., 500., 500.,
          500., 500., 500., 500., 500., 500., 500., 500., 500., 500., 500.,
          500.])},
  &#39;Sig_1&#39;: {&#39;power&#39;: array([0., 0., 0., 0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 0.,
          0., 0., 0., 0., 0.])},
  &#39;Wat_1&#39;: {&#39;flowrate&#39;: array([0. , 0. , 0. , 0. , 0. , 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
          0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
          0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
          0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0. , 0. ,
          0. , 0. , 0. , 0. ]),
   &#39;pressure&#39;: array([ 0.,  0.,  0.,  0.,  0., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,  0.,  0.,
           0.,  0.,  0.,  0.]),
   &#39;area&#39;: array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1.]),
   &#39;level&#39;: array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1.])},
  &#39;Wat_2&#39;: {&#39;flowrate&#39;: array([0. , 0. , 0. , 0. , 0. , 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
          0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
          0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3,
          0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0. , 0. ,
          0. , 0. , 0. , 0. ]),
   &#39;pressure&#39;: array([ 0.,  0.,  0.,  0.,  0., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,
          10., 10., 10., 10., 10., 10., 10., 10., 10., 10., 10.,  0.,  0.,
           0.,  0.,  0.,  0.]),
   &#39;area&#39;: array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1.]),
   &#39;level&#39;: array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1.])}},
 &#39;functions&#39;: {&#39;ImportEE&#39;: {&#39;faults&#39;: {&#39;no_v&#39;: array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
    &#39;inf_v&#39;: array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])},
   &#39;mode&#39;: array([&#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;], dtype=&#39;&lt;U5&#39;)},
  &#39;ImportWater&#39;: {&#39;faults&#39;: {&#39;no_wat&#39;: array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])},
   &#39;mode&#39;: array([&#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;], dtype=&#39;&lt;U6&#39;)},
  &#39;ImportSignal&#39;: {&#39;faults&#39;: {&#39;no_sig&#39;: array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])},
   &#39;mode&#39;: array([&#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;], dtype=&#39;&lt;U6&#39;)},
  &#39;MoveWater&#39;: {&#39;faults&#39;: {&#39;mech_break&#39;: array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
    &#39;short&#39;: array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])},
   &#39;eff&#39;: array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
          1., 1., 1., 1., 1.]),
   &#39;mode&#39;: array([&#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;], dtype=&#39;&lt;U10&#39;)},
  &#39;ExportWater&#39;: {&#39;faults&#39;: {&#39;block&#39;: array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])},
   &#39;mode&#39;: array([&#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;, &#39;nom&#39;,
          &#39;nom&#39;, &#39;nom&#39;], dtype=&#39;&lt;U5&#39;)}},
 &#39;time&#39;: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
        17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,
        34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
        51, 52, 53, 54, 55])}
</pre></div></div>
</div>
</section>
<section id="2b.)-Visualize-nominal-model">
<h3>2b.) Visualize nominal model<a class="headerlink" href="#2b.)-Visualize-nominal-model" title="Permalink to this headline"></a></h3>
<p>First, we can show the model graph using <code class="docutils literal notranslate"><span class="pre">an.graph.show</span></code> to see that it was set up correctly. We can do this both on the model graph itself <code class="docutils literal notranslate"><span class="pre">mdl.graph</span></code> and the results of the nominal run <code class="docutils literal notranslate"><span class="pre">resgraph_nominal</span></code> to verify both are fault-free.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_27_0.png" src="../../_images/examples_pump_Tutorial_complete_27_0.png" />
</div>
</div>
<p>We can also view the flow values of the model using ‘’an.plot.mdlhists’’. It may be helpful to only view flows of interest.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mdlhists</span><span class="p">(</span><span class="n">mdlhist_nominal</span><span class="p">,</span> <span class="n">fxnflowvals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Wat_1&#39;</span><span class="p">:[</span><span class="s1">&#39;flowrate&#39;</span><span class="p">,</span><span class="s1">&#39;pressure&#39;</span><span class="p">],</span> <span class="s1">&#39;EE_1&#39;</span><span class="p">:[</span><span class="s1">&#39;voltage&#39;</span><span class="p">,</span> <span class="s1">&#39;current&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_29_0.png" src="../../_images/examples_pump_Tutorial_complete_29_0.png" />
</div>
</div>
<p>Note: for quick access to the syntax and options for these methods, type the <code class="docutils literal notranslate"><span class="pre">?method</span></code> or <code class="docutils literal notranslate"><span class="pre">help(method)</span></code> in the terminal. For example <code class="docutils literal notranslate"><span class="pre">?an.plot.mdlhists</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span>an.plot.mdlhists
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">Signature:</span>
rd<span class="ansi-yellow-intense-fg ansi-bold">.</span>plot<span class="ansi-yellow-intense-fg ansi-bold">.</span>mdlhists<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    mdlhists<span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    fxnflowvals<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;all&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    cols<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-cyan-intense-fg ansi-bold">2</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    aggregation<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;individual&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    comp_groups<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    legend_loc<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">-</span><span class="ansi-cyan-intense-fg ansi-bold">1</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    xlabel<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;time&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    ylabels<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    max_ind<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;max&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    boundtype<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;fill&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    fillalpha<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-cyan-intense-fg ansi-bold">0.3</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    boundcolor<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;gray&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    boundlinestyle<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;--&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    ci<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-cyan-intense-fg ansi-bold">0.95</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    titles<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    title<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    indiv_kwargs<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    time_slice<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    time_slice_label<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    figsize<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;default&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    v_padding<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    h_padding<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    title_padding<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-cyan-intense-fg ansi-bold">0.0</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    phases<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    modephases<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-yellow-intense-fg ansi-bold">{</span><span class="ansi-yellow-intense-fg ansi-bold">}</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    label_phases<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-green-intense-fg ansi-bold">True</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    legend_title<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span>    <span class="ansi-yellow-intense-fg ansi-bold">**</span>kwargs<span class="ansi-yellow-intense-fg ansi-bold">,</span><span class="ansi-yellow-intense-fg ansi-bold">
</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-red-intense-fg ansi-bold">Docstring:</span>
Plot the behavior over time of the given function/flow values
over a set of scenarios, with ability to aggregate behaviors as needed.

Parameters
----------
mdlhists : dict
    Aggregate model history with structure {&#39;scen&#39;:mdlhist} (or single mdlhist)
fxnflowvals : dict, optional
    dict of flow values to plot with structure {fxnflow:[vals], fxnflow:&#39;val&#39;/all, fxnflow:{&#39;comp&#39;:[vals]}}.
    The default is &#39;all&#39;, which returns all.
cols : int, optional
    columns to use in the figure. The default is 2.
aggregation : str, optional
    Way of aggregating the plot values. The default is &#39;individual&#39;
    Note that only the `individual` option can be used for histories of non-numeric quantities
    (e.g., modes, which are recorded as strings)
    - &#39;individual&#39; plots each run individually.
    - &#39;mean_std&#39; plots the mean values over the sim with standard deviation error bars
    - &#39;mean_ci&#39;  plots the mean values over the sim with mean confidence interval error bars
        - optional argument ci (float 0.0-1.0) specifies the confidence interval (Default:0.95)
    - &#39;mean_bound&#39; plots the mean values over the sim with variable bound error bars
    - &#39;percentile&#39; plots the percentile distribution of the sim over time (does not reject outliers)
        - optional argument &#39;perc_range&#39; (int 0-100) specifies the percentile range of the inner bars (Default: 50)
comp_groups : dict, optional
    Dictionary for comparison groups (if more than one) with structure:
        {&#39;group1&#39;:(&#39;scen1&#39;, &#39;scen2&#39;), &#39;group2&#39;:(&#39;scen3&#39;, &#39;scen4&#39;)} Default is {}
        If a legend is shown, group names are used as labels.
legend_loc : int, optional
    Specifies the plot to place the legend on, if runs are bine compared. Default is -1 (the last plot)
    To remove the legend, give a value of False
xlabel : str, optional
    Label for the x-axes. Default is &#39;time&#39;
ylabels : dict, optional
    Label for the y-axes with structure {(fxnflowname, value):&#39;label&#39;}
max_ind : int, optional
    index (usually correlates to time) cutoff for the simulation. Default is &#39;max&#39; which uses the first simulation termination time.
boundtype : &#39;fill&#39; or &#39;line&#39;, optional
    -&#39;fill&#39; plots the error bounds as a filled area
        - optional fillalpha (float) changes the alpha of this area.
    -&#39;line&#39; plots the error bounds as lines
        - optional boundcolor (str) changes the color of the bounds (default &#39;gray&#39;)
        - optional boundlinestyle (str) changes the style of the bound lines (default &#39;--&#39;)
fillalpha : float
    alpha value for fill in aggregated plots. Default is 0.3.
boundcolor : str, optional
    color to make the bounds in aggregated plots. Default is &#39;gray&#39;
boundlinestyle : str, optional
    linestyle to use for bounds in aggregated plots. Default is &#39;--&#39;
ci : float, optional
    Bootstrap confidence interval (0-1) to use in &#39;mean_ci&#39; bound argument. Default is 0.95.
title : str, optional
    overall title for the plot. Default is &#39;&#39;
indiv_kwargs : dict, optional
    dict of kwargs with structure {comp1:kwargs1, comp2:kwargs2}, where
    where kwargs is an individual dict of keyword arguments for the
    comparison group comp (or scenario, if not aggregated) which overrides
    the global kwargs (or default behavior). If no comparison groups are given,
    use &#39;default&#39; for a single history or &#39;nominal&#39;/&#39;faulty&#39; for a fault history
    e.g. kwargs = {&#39;nominal&#39;:{color:&#39;green&#39;}} would make the nominal color green
    Default is {}.
time_slice : int/list, optional
    overlays a bar or bars at the given index when the fault was injected (if any). Default is []
time_slice_label : str, optional
    label to use for the time slice bars in the legend. Default is None
figsize : tuple (float,float)
    x-y size for the figure. The default is &#39;default&#39;, which dymanically gives 3 for each column and 2 for each row
v_padding : float
    vertical padding between subplots as a fraction of axis height
h_padding : float
    horizontal padding between subplots as a fraction of axis width
title_padding : float
    padding for title as a fraction of figure height
phases : dict, optional
    Provide to overlay phases on the individual function histories, where phases
    is from an.process.mdlhist and of structure {&#39;fxnname&#39;:&#39;phase&#39;:[start, end]}.
    Default is {}.
modephases : dict, optional
    dictionary that maps the phases to operational modes, if it is desired to track the progression
    through modes
legend_title : str, optional
    title for the legend. Default is None
**kwargs : kwargs
    keyword arguments to mpl.plot e.g. linestyle, color, etc. See &#39;aggregation&#39; for specification.
    phases={}, modephases={}, label_phases=True,  **kwargs):
<span class="ansi-red-intense-fg ansi-bold">File:</span>      c:\users\dhulse\documents\github\fmdtools\fmdtools\analyze\plot.py
<span class="ansi-red-intense-fg ansi-bold">Type:</span>      function
</pre></div></div>
</div>
</section>
<section id="2b.)-Simulate-a-fault-mode">
<h3>2b.) Simulate a fault mode<a class="headerlink" href="#2b.)-Simulate-a-fault-mode" title="Permalink to this headline"></a></h3>
<p>To simulate the model in a fault scenario, use the <code class="docutils literal notranslate"><span class="pre">propagate.one_fault</span></code> method. The set of possible faults is defined in the function definitions in <code class="docutils literal notranslate"><span class="pre">ex_pump.py</span></code>, and we can propagate a fault at any time in the operational interval (0-55 seconds).</p>
<p>For example, below we simulate a short in the <code class="docutils literal notranslate"><span class="pre">MoveWater</span></code> function at time t=10:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_fault</span><span class="p">,</span> <span class="n">mdlhist_fault</span><span class="o">=</span><span class="n">propagate</span><span class="o">.</span><span class="n">one_fault</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="s1">&#39;MoveWater&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">desired_result</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;endclass&#39;</span><span class="p">,</span> <span class="s1">&#39;fxnflowgraph&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>We can also view the results for from this. In this case <code class="docutils literal notranslate"><span class="pre">mdlhist</span></code> gives a history of results for both the nominal and faulty runs.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_fault</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;endclass&#39;: {&#39;rate&#39;: 0.00055,
  &#39;cost&#39;: 29000.000000000007,
  &#39;expected cost&#39;: 1595000.0000000005},
 &#39;fxnflowgraph&#39;: &lt;networkx.classes.graph.Graph at 0x16e5f5c2850&gt;}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">mdlhist_fault</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;nominal&#39;, &#39;faulty&#39;]
</pre></div></div>
</div>
</section>
<section id="3b.)-Visualize-fault-model-states">
<h3>3b.) Visualize fault model states<a class="headerlink" href="#3b.)-Visualize-fault-model-states" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">an.plot.mdlhistvals</span></code> also works for a mdlhists given from <code class="docutils literal notranslate"><span class="pre">propagate.one_fault</span></code>. We can view these results below. As shown, the function will give the nominal result in a blue dotted line and the faulty result in a red line.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mdlhists</span><span class="p">(</span><span class="n">mdlhist_fault</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Pump Response to Motor Short Fault&#39;</span><span class="p">,</span> <span class="n">time_slice</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">legend_loc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fxnflowvals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Wat_1&#39;</span><span class="p">:[</span><span class="s1">&#39;flowrate&#39;</span><span class="p">,</span><span class="s1">&#39;pressure&#39;</span><span class="p">],</span> <span class="s1">&#39;EE_1&#39;</span><span class="p">:[</span><span class="s1">&#39;voltage&#39;</span><span class="p">,</span> <span class="s1">&#39;current&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_38_0.png" src="../../_images/examples_pump_Tutorial_complete_38_0.png" />
</div>
</div>
<p>We can also view this result graph using ‘an.graph.show’. In this case, it shows the state of the model at the final time-step of the model run. Thus, while the <code class="docutils literal notranslate"><span class="pre">EE_1</span></code> flow is shown in orange (because it is off-nominal), the Water flows are not, because they have the same state at the final time-step.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">results_fault</span><span class="p">[</span><span class="s1">&#39;fxnflowgraph&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_40_0.png" src="../../_images/examples_pump_Tutorial_complete_40_0.png" />
</div>
</div>
<p>If we want to view the graph at another time-step, we can use ‘History.get_degraded_hist’ and ‘an.graph.result_from’ to first process the model states into results which can be visualized and then map that onto a graph view at a given time.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deghist_fault</span> <span class="o">=</span> <span class="n">mdlhist_fault</span><span class="o">.</span><span class="n">get_degraded_hist</span><span class="p">(</span><span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">flows</span><span class="p">)</span>
<span class="n">fault_fault</span> <span class="o">=</span> <span class="n">mdlhist_fault</span><span class="o">.</span><span class="n">get_faulty_hist</span><span class="p">(</span><span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">flows</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">result_from</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">deghist_fault</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">gtype</span><span class="o">=</span><span class="s1">&#39;fxngraph&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_43_0.png" src="../../_images/examples_pump_Tutorial_complete_43_0.png" />
</div>
</div>
</section>
<section id="4a.)-Simulate-set-of-fault-modes">
<h3>4a.) Simulate set of fault modes<a class="headerlink" href="#4a.)-Simulate-set-of-fault-modes" title="Permalink to this headline"></a></h3>
<p>To simulate the set of fault modes, we first choose a <code class="docutils literal notranslate"><span class="pre">SampleApproach</span></code>. For simplicity, we can choose default parameters at first.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">mdlhists_app</span> <span class="o">=</span> <span class="n">propagate</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
SCENARIOS COMPLETE: 100%|██████████| 17/17 [00:00&lt;00:00, 116.34it/s]
</pre></div></div>
</div>
<p>It can be helpful to view what these results look like–a dictionary of faults injected at particular times with their respective results dictionaries.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;ImportEE no_v, t=27&#39;: {&#39;rate&#39;: 0.0003600000000000001,
  &#39;cost&#39;: 15174.999999999998,
  &#39;expected cost&#39;: 546300.0},
 &#39;ImportEE inf_v, t=27&#39;: {&#39;rate&#39;: 9.000000000000002e-05,
  &#39;cost&#39;: 20175.0,
  &#39;expected cost&#39;: 181575.00000000003},
 &#39;ImportWater no_wat, t=27&#39;: {&#39;rate&#39;: 0.00015,
  &#39;cost&#39;: 6174.999999999998,
  &#39;expected cost&#39;: 92624.99999999996},
 &#39;ImportSignal no_sig, t=27&#39;: {&#39;rate&#39;: 1.2857142857142856e-05,
  &#39;cost&#39;: 15174.999999999998,
  &#39;expected cost&#39;: 19510.714285714283},
 &#39;MoveWater mech_break, t=27&#39;: {&#39;rate&#39;: 0.00023142857142857142,
  &#39;cost&#39;: 10174.999999999998,
  &#39;expected cost&#39;: 235478.5714285714},
 &#39;MoveWater short, t=27&#39;: {&#39;rate&#39;: 0.00012857142857142858,
  &#39;cost&#39;: 25175.0,
  &#39;expected cost&#39;: 323678.5714285714},
 &#39;ExportWater block, t=27&#39;: {&#39;rate&#39;: 0.00012857142857142858,
  &#39;cost&#39;: 15152.5,
  &#39;expected cost&#39;: 194817.85714285716},
 &#39;ImportWater no_wat, t=2&#39;: {&#39;rate&#39;: 1.6666666666666667e-05,
  &#39;cost&#39;: 11125.000000000007,
  &#39;expected cost&#39;: 18541.66666666668},
 &#39;ImportSignal no_sig, t=2&#39;: {&#39;rate&#39;: 2.1428571428571427e-06,
  &#39;cost&#39;: 20125.000000000007,
  &#39;expected cost&#39;: 4312.500000000001},
 &#39;MoveWater mech_break, t=2&#39;: {&#39;rate&#39;: 2.1428571428571427e-06,
  &#39;cost&#39;: 15125.000000000007,
  &#39;expected cost&#39;: 3241.07142857143},
 &#39;MoveWater short, t=2&#39;: {&#39;rate&#39;: 2.1428571428571428e-05,
  &#39;cost&#39;: 30125.000000000007,
  &#39;expected cost&#39;: 64553.57142857144},
 &#39;ExportWater block, t=2&#39;: {&#39;rate&#39;: 2.1428571428571428e-05,
  &#39;cost&#39;: 20102.500000000007,
  &#39;expected cost&#39;: 43076.78571428573},
 &#39;ImportWater no_wat, t=52&#39;: {&#39;rate&#39;: 1.9999999999999998e-05,
  &#39;cost&#39;: 1000.0,
  &#39;expected cost&#39;: 1999.9999999999998},
 &#39;ImportSignal no_sig, t=52&#39;: {&#39;rate&#39;: 1.7142857142857143e-06,
  &#39;cost&#39;: 10000.0,
  &#39;expected cost&#39;: 1714.2857142857142},
 &#39;MoveWater mech_break, t=52&#39;: {&#39;rate&#39;: 2.5714285714285716e-06,
  &#39;cost&#39;: 5000.0,
  &#39;expected cost&#39;: 1285.7142857142858},
 &#39;MoveWater short, t=52&#39;: {&#39;rate&#39;: 1.7142857142857145e-05,
  &#39;cost&#39;: 10000.0,
  &#39;expected cost&#39;: 17142.857142857145},
 &#39;ExportWater block, t=52&#39;: {&#39;rate&#39;: 1.7142857142857145e-05,
  &#39;cost&#39;: 5000.0,
  &#39;expected cost&#39;: 8571.428571428572},
 &#39;nominal&#39;: {&#39;rate&#39;: 1.0, &#39;cost&#39;: 0.0, &#39;expected cost&#39;: 0.0}}
</pre></div></div>
</div>
<p>It can be helpful to explore different approach parameters (e.g. focussing on single faults, different numbers of sample points, etc)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app2</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;MoveWater&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">)])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app2</span><span class="o">.</span><span class="n">list_modes</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(&#39;MoveWater&#39;, &#39;short&#39;)]
</pre></div></div>
</div>
<p>There are a number of different ways to sample the scenarios in the approach:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app3</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;evenspacing&#39;</span><span class="p">,</span> <span class="s1">&#39;numpts&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app3</span><span class="o">.</span><span class="n">times</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0, 1, 2, 3, 4, 12, 20, 27, 34, 42, 50, 51, 52, 53, 54, 55]
</pre></div></div>
</div>
</section>
<section id="4b.)-Visualize-set-of-fault-modes">
<h3>4b.) Visualize set of fault modes<a class="headerlink" href="#4b.)-Visualize-set-of-fault-modes" title="Permalink to this headline"></a></h3>
<p>Using this fault approach, we can now make an FMEA-like analyses of the different fault modes. <code class="docutils literal notranslate"><span class="pre">an.tabulate.summfmea</span></code> organizes endclasses into a table for each fault.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">summary_fmea</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">tabulate</span><span class="o">.</span><span class="n">summfmea</span><span class="p">(</span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
<span class="n">summary_fmea</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>rate</th>
      <th>expected cost</th>
      <th>cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>MoveWater</th>
      <th>short</th>
      <td>0.000167</td>
      <td>405375.000000</td>
      <td>21766.666667</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">ImportEE</th>
      <th>inf_v</th>
      <td>0.000090</td>
      <td>181575.000000</td>
      <td>20175.000000</td>
    </tr>
    <tr>
      <th>no_v</th>
      <td>0.000360</td>
      <td>546300.000000</td>
      <td>15175.000000</td>
    </tr>
    <tr>
      <th>ImportSignal</th>
      <th>no_sig</th>
      <td>0.000017</td>
      <td>25537.500000</td>
      <td>15100.000000</td>
    </tr>
    <tr>
      <th>ExportWater</th>
      <th>block</th>
      <td>0.000167</td>
      <td>246466.071429</td>
      <td>13418.333333</td>
    </tr>
    <tr>
      <th>MoveWater</th>
      <th>mech_break</th>
      <td>0.000236</td>
      <td>240005.357143</td>
      <td>10100.000000</td>
    </tr>
    <tr>
      <th>ImportWater</th>
      <th>no_wat</th>
      <td>0.000187</td>
      <td>113166.666667</td>
      <td>6100.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">an.result_summary_fmea</span></code> with the processed results histories to get a better picture of which flows and functions degrade in each scenario</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">tabulate</span><span class="o">.</span><span class="n">result_summary_fmea</span><span class="p">(</span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">mdlhists_app</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>degraded functions</th>
      <th>degraded flows</th>
      <th>rate</th>
      <th>cost</th>
      <th>expected cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ImportEE no_v, t=27</th>
      <td>[ImportEE]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.00036</td>
      <td>15175.0</td>
      <td>546300.0</td>
    </tr>
    <tr>
      <th>ImportEE inf_v, t=27</th>
      <td>[ImportEE]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.00009</td>
      <td>20175.0</td>
      <td>181575.0</td>
    </tr>
    <tr>
      <th>ImportWater no_wat, t=27</th>
      <td>[ImportWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.00015</td>
      <td>6175.0</td>
      <td>92625.0</td>
    </tr>
    <tr>
      <th>ImportSignal no_sig, t=27</th>
      <td>[ImportSignal]</td>
      <td>[EE_1, Sig_1, Wat_1, Wat_2]</td>
      <td>0.000013</td>
      <td>15175.0</td>
      <td>19510.714286</td>
    </tr>
    <tr>
      <th>MoveWater mech_break, t=27</th>
      <td>[MoveWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.000231</td>
      <td>10175.0</td>
      <td>235478.571429</td>
    </tr>
    <tr>
      <th>MoveWater short, t=27</th>
      <td>[ImportEE, MoveWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.000129</td>
      <td>25175.0</td>
      <td>323678.571429</td>
    </tr>
    <tr>
      <th>ExportWater block, t=27</th>
      <td>[MoveWater, ExportWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.000129</td>
      <td>15152.5</td>
      <td>194817.857143</td>
    </tr>
    <tr>
      <th>ImportWater no_wat, t=2</th>
      <td>[ImportWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.000017</td>
      <td>11125.0</td>
      <td>18541.666667</td>
    </tr>
    <tr>
      <th>ImportSignal no_sig, t=2</th>
      <td>[ImportSignal]</td>
      <td>[EE_1, Sig_1, Wat_1, Wat_2]</td>
      <td>0.000002</td>
      <td>20125.0</td>
      <td>4312.5</td>
    </tr>
    <tr>
      <th>MoveWater mech_break, t=2</th>
      <td>[MoveWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.000002</td>
      <td>15125.0</td>
      <td>3241.071429</td>
    </tr>
    <tr>
      <th>MoveWater short, t=2</th>
      <td>[ImportEE, MoveWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.000021</td>
      <td>30125.0</td>
      <td>64553.571429</td>
    </tr>
    <tr>
      <th>ExportWater block, t=2</th>
      <td>[MoveWater, ExportWater]</td>
      <td>[EE_1, Wat_1, Wat_2]</td>
      <td>0.000021</td>
      <td>20102.5</td>
      <td>43076.785714</td>
    </tr>
    <tr>
      <th>ImportWater no_wat, t=52</th>
      <td>[ImportWater]</td>
      <td>[Wat_1]</td>
      <td>0.00002</td>
      <td>1000.0</td>
      <td>2000.0</td>
    </tr>
    <tr>
      <th>ImportSignal no_sig, t=52</th>
      <td>[ImportSignal]</td>
      <td>[]</td>
      <td>0.000002</td>
      <td>10000.0</td>
      <td>1714.285714</td>
    </tr>
    <tr>
      <th>MoveWater mech_break, t=52</th>
      <td>[MoveWater]</td>
      <td>[]</td>
      <td>0.000003</td>
      <td>5000.0</td>
      <td>1285.714286</td>
    </tr>
    <tr>
      <th>MoveWater short, t=52</th>
      <td>[MoveWater]</td>
      <td>[]</td>
      <td>0.000017</td>
      <td>10000.0</td>
      <td>17142.857143</td>
    </tr>
    <tr>
      <th>ExportWater block, t=52</th>
      <td>[ExportWater]</td>
      <td>[Wat_2]</td>
      <td>0.000017</td>
      <td>5000.0</td>
      <td>8571.428571</td>
    </tr>
    <tr>
      <th>nominal</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="5.)-Saving-Work">
<h2>5.) Saving Work<a class="headerlink" href="#5.)-Saving-Work" title="Permalink to this headline"></a></h2>
<p>In detailed simulations, running a lot of computational simulations can take a considerable amount of time. As a result, it becomes impractical to run a new simulation every time one wishes to analyse its data. Results from fmdtools simulations (endclasses or mdlhists) can be saved as pickle, csv, or json files in this instance using either: - <code class="docutils literal notranslate"><span class="pre">an.process.save_result()</span></code> or - passing a save_args dictionary to the respective propagate functions (e.g.,
<code class="docutils literal notranslate"><span class="pre">{'endclass':{'filename':'file.pkl','overwrite':True}</span></code>)</p>
<p>and then loaded using: - <code class="docutils literal notranslate"><span class="pre">an.process.load_result()</span></code></p>
<p>For example, for this variable:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;ImportEE no_v, t=27&#39;: {&#39;rate&#39;: 0.0003600000000000001,
  &#39;cost&#39;: 15174.999999999998,
  &#39;expected cost&#39;: 546300.0},
 &#39;ImportEE inf_v, t=27&#39;: {&#39;rate&#39;: 9.000000000000002e-05,
  &#39;cost&#39;: 20175.0,
  &#39;expected cost&#39;: 181575.00000000003},
 &#39;ImportWater no_wat, t=27&#39;: {&#39;rate&#39;: 0.00015,
  &#39;cost&#39;: 6174.999999999998,
  &#39;expected cost&#39;: 92624.99999999996},
 &#39;ImportSignal no_sig, t=27&#39;: {&#39;rate&#39;: 1.2857142857142856e-05,
  &#39;cost&#39;: 15174.999999999998,
  &#39;expected cost&#39;: 19510.714285714283},
 &#39;MoveWater mech_break, t=27&#39;: {&#39;rate&#39;: 0.00023142857142857142,
  &#39;cost&#39;: 10174.999999999998,
  &#39;expected cost&#39;: 235478.5714285714},
 &#39;MoveWater short, t=27&#39;: {&#39;rate&#39;: 0.00012857142857142858,
  &#39;cost&#39;: 25175.0,
  &#39;expected cost&#39;: 323678.5714285714},
 &#39;ExportWater block, t=27&#39;: {&#39;rate&#39;: 0.00012857142857142858,
  &#39;cost&#39;: 15152.5,
  &#39;expected cost&#39;: 194817.85714285716},
 &#39;ImportWater no_wat, t=2&#39;: {&#39;rate&#39;: 1.6666666666666667e-05,
  &#39;cost&#39;: 11125.000000000007,
  &#39;expected cost&#39;: 18541.66666666668},
 &#39;ImportSignal no_sig, t=2&#39;: {&#39;rate&#39;: 2.1428571428571427e-06,
  &#39;cost&#39;: 20125.000000000007,
  &#39;expected cost&#39;: 4312.500000000001},
 &#39;MoveWater mech_break, t=2&#39;: {&#39;rate&#39;: 2.1428571428571427e-06,
  &#39;cost&#39;: 15125.000000000007,
  &#39;expected cost&#39;: 3241.07142857143},
 &#39;MoveWater short, t=2&#39;: {&#39;rate&#39;: 2.1428571428571428e-05,
  &#39;cost&#39;: 30125.000000000007,
  &#39;expected cost&#39;: 64553.57142857144},
 &#39;ExportWater block, t=2&#39;: {&#39;rate&#39;: 2.1428571428571428e-05,
  &#39;cost&#39;: 20102.500000000007,
  &#39;expected cost&#39;: 43076.78571428573},
 &#39;ImportWater no_wat, t=52&#39;: {&#39;rate&#39;: 1.9999999999999998e-05,
  &#39;cost&#39;: 1000.0,
  &#39;expected cost&#39;: 1999.9999999999998},
 &#39;ImportSignal no_sig, t=52&#39;: {&#39;rate&#39;: 1.7142857142857143e-06,
  &#39;cost&#39;: 10000.0,
  &#39;expected cost&#39;: 1714.2857142857142},
 &#39;MoveWater mech_break, t=52&#39;: {&#39;rate&#39;: 2.5714285714285716e-06,
  &#39;cost&#39;: 5000.0,
  &#39;expected cost&#39;: 1285.7142857142858},
 &#39;MoveWater short, t=52&#39;: {&#39;rate&#39;: 1.7142857142857145e-05,
  &#39;cost&#39;: 10000.0,
  &#39;expected cost&#39;: 17142.857142857145},
 &#39;ExportWater block, t=52&#39;: {&#39;rate&#39;: 1.7142857142857145e-05,
  &#39;cost&#39;: 5000.0,
  &#39;expected cost&#39;: 8571.428571428572},
 &#39;nominal&#39;: {&#39;rate&#39;: 1.0, &#39;cost&#39;: 0.0, &#39;expected cost&#39;: 0.0}}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">save_result</span><span class="p">(</span><span class="n">endclasses_app</span><span class="p">,</span> <span class="s1">&#39;tutorial_endclasses.csv&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
File already exists: tutorial_endclasses.csv, writing anyway...
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_saved</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">load_result</span><span class="p">(</span><span class="s1">&#39;tutorial_endclasses.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_saved</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;ImportWater no_wat, t=2&#39;: {&#39;cost&#39;: 11125.000000000007,
  &#39;expected cost&#39;: 18541.66666666668,
  &#39;rate&#39;: 1.6666666666666667e-05},
 &#39;ExportWater block, t=52&#39;: {&#39;cost&#39;: 5000.0,
  &#39;expected cost&#39;: 8571.428571428572,
  &#39;rate&#39;: 1.7142857142857145e-05},
 &#39;nominal&#39;: {&#39;cost&#39;: 0.0, &#39;expected cost&#39;: 0.0, &#39;rate&#39;: 1.0},
 &#39;ImportWater no_wat, t=52&#39;: {&#39;cost&#39;: 1000.0,
  &#39;expected cost&#39;: 2000.0,
  &#39;rate&#39;: 2e-05},
 &#39;MoveWater mech_break, t=2&#39;: {&#39;cost&#39;: 15125.000000000007,
  &#39;expected cost&#39;: 3241.07142857143,
  &#39;rate&#39;: 2.1428571428571427e-06},
 &#39;ImportEE inf_v, t=27&#39;: {&#39;cost&#39;: 20175.0,
  &#39;expected cost&#39;: 181575.00000000003,
  &#39;rate&#39;: 9.000000000000002e-05},
 &#39;ImportSignal no_sig, t=2&#39;: {&#39;cost&#39;: 20125.000000000007,
  &#39;expected cost&#39;: 4312.500000000001,
  &#39;rate&#39;: 2.1428571428571427e-06},
 &#39;ImportSignal no_sig, t=52&#39;: {&#39;cost&#39;: 10000.0,
  &#39;expected cost&#39;: 1714.2857142857142,
  &#39;rate&#39;: 1.7142857142857145e-06},
 &#39;MoveWater mech_break, t=52&#39;: {&#39;cost&#39;: 5000.0,
  &#39;expected cost&#39;: 1285.7142857142858,
  &#39;rate&#39;: 2.571428571428572e-06},
 &#39;MoveWater short, t=52&#39;: {&#39;cost&#39;: 10000.0,
  &#39;expected cost&#39;: 17142.857142857145,
  &#39;rate&#39;: 1.7142857142857145e-05},
 &#39;MoveWater short, t=2&#39;: {&#39;cost&#39;: 30125.000000000007,
  &#39;expected cost&#39;: 64553.57142857144,
  &#39;rate&#39;: 2.1428571428571428e-05},
 &#39;ImportEE no_v, t=27&#39;: {&#39;cost&#39;: 15174.999999999998,
  &#39;expected cost&#39;: 546300.0,
  &#39;rate&#39;: 0.00036},
 &#39;ImportWater no_wat, t=27&#39;: {&#39;cost&#39;: 6174.999999999998,
  &#39;expected cost&#39;: 92624.99999999996,
  &#39;rate&#39;: 0.00015},
 &#39;MoveWater mech_break, t=27&#39;: {&#39;cost&#39;: 10174.999999999998,
  &#39;expected cost&#39;: 235478.5714285714,
  &#39;rate&#39;: 0.0002314285714285},
 &#39;ImportSignal no_sig, t=27&#39;: {&#39;cost&#39;: 15174.999999999998,
  &#39;expected cost&#39;: 19510.714285714283,
  &#39;rate&#39;: 1.2857142857142856e-05},
 &#39;MoveWater short, t=27&#39;: {&#39;cost&#39;: 25175.0,
  &#39;expected cost&#39;: 323678.5714285714,
  &#39;rate&#39;: 0.0001285714285714},
 &#39;ExportWater block, t=2&#39;: {&#39;cost&#39;: 20102.500000000007,
  &#39;expected cost&#39;: 43076.78571428573,
  &#39;rate&#39;: 2.1428571428571428e-05},
 &#39;ExportWater block, t=27&#39;: {&#39;cost&#39;: 15152.5,
  &#39;expected cost&#39;: 194817.8571428572,
  &#39;rate&#39;: 0.0001285714285714}}
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>