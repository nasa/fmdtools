<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fmdtools Tutorial &mdash; fmdtools 2.0-alpha documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/fmdtools_ico.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo_glow.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../README.html#contributors">Contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../README.html#notices">Notices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../README.html#disclaimers">Disclaimers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Development%20Guide.html">Development Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#repo-structure">Repo Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Development%20Guide.html#remote-structure">Remote Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#development-process">Development Process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/Development%20Guide.html#upload-to-pypi">Upload to PyPI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#roles">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/Development%20Guide.html#model-development-best-practices">Model Development Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#plan-your-model-to-avoid-technical-debt">Plan your model to avoid technical debt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#don-t-copy-inherit-and-functionalize">Don’t copy, inherit and functionalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#document-your-code-sometimes-before-your-write-it">Document your code, sometimes <em>before</em> your write it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#don-t-get-ahead-of-yourself-try-to-get-a-running-simulation-first">Don’t get ahead of yourself–try to get a running simulation first</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#preserve-your-prototype-setup-by-formalizing-it-as-a-test">Preserve your prototype setup by formalizing it as a test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#edit-your-code">Edit your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#structuring-a-model">Structuring a model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#use-model-constructs-to-simplify-your-code">Use model constructs to simplify your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#style-advice">Style advice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/Development%20Guide.html#see-also">See also</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Examples.html">Examples</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/fmdtools.html">Module Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.define.html">fmdtools.define package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.block">fmdtools.define.block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.common">fmdtools.define.common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.flow">fmdtools.define.flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.mode">fmdtools.define.mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.model">fmdtools.define.model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.parameter">fmdtools.define.parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.rand">fmdtools.define.rand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.state">fmdtools.define.state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.define.html#module-fmdtools.define.time">fmdtools.define.time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.sim.html">fmdtools.sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#fmdtools-sim-propagate">fmdtools.sim.propagate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.scenario">fmdtools.sim.scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.approach">fmdtools.sim.approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.sim.html#module-fmdtools.sim.search">fmdtools.sim.search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/fmdtools.analyze.html">fmdtools.analyze package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.result">fmdtools.analyze.result</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.plot">fmdtools.analyze.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.graph">fmdtools.analyze.graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/fmdtools.analyze.html#module-fmdtools.analyze.tabulate">fmdtools.analyze.tabulate</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">fmdtools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>fmdtools Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/pump/Tutorial_complete.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="fmdtools-Tutorial">
<h1>fmdtools Tutorial<a class="headerlink" href="#fmdtools-Tutorial" title="Permalink to this headline"></a></h1>
<p>This tutorial notebook will show some of the basic commands needed to perform resilience analysis in fmdtools.</p>
<p>For some context, it may be helpful to look through the accompanying presentation. This notebook uses the model defined in <code class="docutils literal notranslate"><span class="pre">ex_pump.py</span></code>. In this notebook, we will:</p>
<ul class="simple">
<li><p>Load an environment and model</p></li>
<li><p>Simulate the system in nominal and faulty scenarios</p></li>
<li><p>Visualize and quantify the results</p></li>
</ul>
<section id="1.)-Loading-the-environment-and-model">
<h2>1.) Loading the environment and model<a class="headerlink" href="#1.)-Loading-the-environment-and-model" title="Permalink to this headline"></a></h2>
<p>To load the <code class="docutils literal notranslate"><span class="pre">fmdtools</span></code> environment, we have to install and import it. This can be accomplished using <code class="docutils literal notranslate"><span class="pre">pip</span></code> for both the stable and development versions:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">##Stable (PyPl) version</span>
<span class="c1"># pip install fmdtools</span>

<span class="c1">##Development version (downloaded from git)</span>
<span class="c1"># pip install -e /path/to/fmdtools ##Note that /path/to/fmdtools is the path to the fmdtools repo</span>
</pre></div>
</div>
</div>
<p>There are a number of different syntaxes for importing modules. Because of the long names of the module trees, it is often helpful to load the modules individually and abbreviate (e.g. <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">fmdtools.sim.propagate</span> <span class="pre">as</span> <span class="pre">propagate</span></code>). Below, import the propagate <code class="docutils literal notranslate"><span class="pre">fmdtools.sim.propagate</span></code> and <code class="docutils literal notranslate"><span class="pre">fmdtools.analyze</span></code> modules, as well as the <code class="docutils literal notranslate"><span class="pre">SampleApproach</span></code> from <code class="docutils literal notranslate"><span class="pre">fmdtools.define</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fmdtools.sim.propagate</span> <span class="k">as</span> <span class="nn">propagate</span>
<span class="kn">from</span> <span class="nn">fmdtools.sim.approach</span> <span class="kn">import</span> <span class="n">SampleApproach</span>
<span class="kn">import</span> <span class="nn">fmdtools.analyze</span> <span class="k">as</span> <span class="nn">an</span>
</pre></div>
</div>
</div>
<p>Now, import the Pump class defined in the ex_pump module.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ex_pump</span> <span class="kn">import</span> <span class="n">Pump</span>
</pre></div>
</div>
</div>
<p>We can then use that to instantiate a model object. See:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>To get started, it can be helpful to view some of the aspects of the model. Try <code class="docutils literal notranslate"><span class="pre">dir(mdl)</span></code>, <code class="docutils literal notranslate"><span class="pre">mdl.fxns</span></code>, <code class="docutils literal notranslate"><span class="pre">mdl.flows</span></code>, <code class="docutils literal notranslate"><span class="pre">mdl.graph</span></code>, etc.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;import_ee&#39;: import_ee ImportEE
 - ImportEEState(effstate=1.0)
 - ImportEEMode(mode=nominal, faults=set()),
 &#39;import_water&#39;: import_water ImportWater
 - State()
 - ImportWaterMode(mode=nominal, faults=set()),
 &#39;import_signal&#39;: import_signal ImportSig
 - State()
 - ImportSigMode(mode=nominal, faults=set()),
 &#39;move_water&#39;: move_water MoveWat
 - MoveWatStates(eff=1.0)
 - MoveWatMode(mode=nominal, faults=set()),
 &#39;export_water&#39;: export_water ExportWater
 - State()
 - ExportWaterMode(mode=nominal, faults=set())}
</pre></div></div>
</div>
<p>We can also view the run order to see how the model will be simulated. More details on run order are provided in <a class="reference external" href="../docs/Model_Structure_Visualization_Tutorial.ipynb">Model Structure Visualization Tutorial</a>, but in short static propagation functions simulate multiple times per time-step until the model converges, while dynamic propagation functions run once per timestep in a defined order.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mg</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">ModelGraph</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mg</span><span class="o">.</span><span class="n">set_exec_order</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mg</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&lt;Figure size 864x720 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_14_1.png" src="../../_images/examples_pump_Tutorial_complete_14_1.png" />
</div>
</div>
<p>As shown, because all of the methods were defined as generic behaviors, they are each run in the static propagation step. No order is shown in the static step because the static propagation step iterates between model functions until the values have converged. Nevertheless, one can view the initial static order using:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">staticfxns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedSet([&#39;import_ee&#39;, &#39;import_water&#39;, &#39;import_signal&#39;, &#39;move_water&#39;, &#39;export_water&#39;])
</pre></div></div>
</div>
<p>and the dynamic step order (if there was one):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">dynamicfxns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedSet()
</pre></div></div>
</div>
<p>We can also instantiate this model with different parameters. In Pump model, these are defined in <code class="docutils literal notranslate"><span class="pre">PumpParam</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ex_pump</span> <span class="kn">import</span> <span class="n">PumpParam</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">PumpParam</span><span class="p">()</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PumpParam(cost=(&#39;repair&#39;, &#39;water&#39;), delay=10)
</pre></div></div>
</div>
<p>We can pass non-default parameters to the model (as well as other non-defaults, such as simulation parameters <code class="docutils literal notranslate"><span class="pre">SimParam</span></code> and random seeds) by passing them as dictionaries. In this case:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl2</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:(</span><span class="s1">&#39;repair&#39;</span><span class="p">,</span> <span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">),</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">})</span>
<span class="n">mdl2</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Pump model at 0x1d69224f4c0
FUNCTIONS:
import_ee ImportEE
- ImportEEState(effstate=1.0)
- ImportEEMode(mode=nominal, faults=set())
import_water ImportWater
- State()
- ImportWaterMode(mode=nominal, faults=set())
import_signal ImportSig
- State()
- ImportSigMode(mode=nominal, faults=set())
move_water MoveWat
- MoveWatStates(eff=1.0)
- MoveWatMode(mode=nominal, faults=set())
export_water ExportWater
- State()
- ExportWaterMode(mode=nominal, faults=set())
FLOWS:
ee_1 Electricity flow: EEStates(current=1.0, voltage=1.0)
sig_1 Signal flow: SignalStates(power=1.0)
wat_1 Water flow: WaterStates(flowrate=1.0, pressure=1.0, area=1.0, level=1.0)
wat_2 Water flow: WaterStates(flowrate=1.0, pressure=1.0, area=1.0, level=1.0)
</pre></div></div>
</div>
<p>Note that, for a model: - <code class="docutils literal notranslate"><span class="pre">p</span></code> is the <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> defining non-mutable attributes (which do not change over a simulation) - <code class="docutils literal notranslate"><span class="pre">sp</span></code> is the <code class="docutils literal notranslate"><span class="pre">SimParam</span></code> defining the simulation start, end, and end conditions - <code class="docutils literal notranslate"><span class="pre">r</span></code> is the <code class="docutils literal notranslate"><span class="pre">Rand</span></code> defining random variables (e.g., for setting a seed)</p>
</section>
<section id="2.),-3.),-and-4.)-Simulate-and-visualize-the-results!">
<h2>2.), 3.), and 4.) Simulate and visualize the results!<a class="headerlink" href="#2.),-3.),-and-4.)-Simulate-and-visualize-the-results!" title="Permalink to this headline"></a></h2>
<p>Now, we will use the methods in <code class="docutils literal notranslate"><span class="pre">propagate</span></code> and the visualization modules in <code class="docutils literal notranslate"><span class="pre">rd</span></code> to simulate the model and visualize the results.</p>
<section id="2a.)-Simulate-nominal">
<h3>2a.) Simulate nominal<a class="headerlink" href="#2a.)-Simulate-nominal" title="Permalink to this headline"></a></h3>
<p>To simulate the model in the nominal scenario, use the <code class="docutils literal notranslate"><span class="pre">propagate.nominal</span></code> method, which returns: endresults, which is a result (or a dict of multiple results) specified by the <code class="docutils literal notranslate"><span class="pre">desired_result</span></code> option, e.g.: - ‘endclass’ (default), which provides the dict from <code class="docutils literal notranslate"><span class="pre">mdl.find_classification</span></code> - ‘fxngraph’/‘fxnflowgraph’/‘typegraph’,‘component’, which provides a networkx graph view of the model with degraded faults and functions highlighted (e.g., for <code class="docutils literal notranslate"><span class="pre">Graph.show</span></code>) -
‘fxnname.varname’/‘flowname.varname’: which gets the values of these variables at a the end - a list of the above arguments (to return a dict of multiple) - a dict of lists (for multiple over time), e.g. <code class="docutils literal notranslate"><span class="pre">{time:[varnames,...</span> <span class="pre">'endclass']}</span></code></p>
<p>and mdlhist, which is a history of model states specified by the <code class="docutils literal notranslate"><span class="pre">track</span></code> option. Some of these options include: - fxns’ - ‘flows’ - ‘all’ - ‘none’ - ‘valparams’ (model states specified in mdl.valparams), - or a dict of form: <code class="docutils literal notranslate"><span class="pre">{'functions':{'fxn1':'att1'},</span> <span class="pre">'flows':{'flow1':'att1'}}</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result_nominal</span><span class="p">,</span> <span class="n">mdlhist_nominal</span><span class="o">=</span><span class="n">propagate</span><span class="o">.</span><span class="n">nominal</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">track</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">desired_result</span><span class="o">=</span><span class="s2">&quot;endclass&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>What do the results look like? Explore results structures using the <code class="docutils literal notranslate"><span class="pre">desired_results</span></code> and <code class="docutils literal notranslate"><span class="pre">track</span></code> arguments.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result_nominal</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
endclass:
--rate:                              1.0
--cost:                              0.0
--expected cost:                     0.0
</pre></div></div>
</div>
<p>Note that an <code class="docutils literal notranslate"><span class="pre">endclass</span></code> dictionary can take arbitrary form based on what is produced in <code class="docutils literal notranslate"><span class="pre">find_classification</span></code>. By default, we often return: - <code class="docutils literal notranslate"><span class="pre">rate</span></code>, which is the rate for the scenario calculated from the underlying fault probability model (defined in the <code class="docutils literal notranslate"><span class="pre">Mode</span></code> for each <code class="docutils literal notranslate"><span class="pre">FxnBlock</span></code>), - <code class="docutils literal notranslate"><span class="pre">cost</span></code>, which is some cost calculated based on the consequences of the scenario - <code class="docutils literal notranslate"><span class="pre">expected</span> <span class="pre">cost</span></code>, which is the expected value of the cost of the scenario (i.e. <code class="docutils literal notranslate"><span class="pre">rate*cost</span></code>).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdlhist_nominal</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
i.finished:                    array(56)
i.on:                          array(56)
fxns.import_ee.s.effstate:     array(56)
fxns.import_ee.m.faults.no_v:  array(56)
fxns.import_ee.m.faults.inf_v: array(56)
fxns.import_ee.m.mode:         array(56)
fxns.import_water.m.faults.no_wat: array(56)
fxns.import_water.m.mode:      array(56)
fxns.import_signal.m.faults.no_sig: array(56)
fxns.import_signal.m.mode:     array(56)
fxns.move_water.i.over_pressure: array(56)
fxns.move_water.s.eff:         array(56)
fxns.move_water.m.faults.mech_break: array(56)
fxns.move_water.m.faults.short: array(56)
fxns.move_water.m.mode:        array(56)
fxns.move_water.t.pressure_limit.time: array(56)
fxns.move_water.t.pressure_limit.mode: array(56)
fxns.export_water.m.faults.block: array(56)
fxns.export_water.m.mode:      array(56)
flows.ee_1.s.current:          array(56)
flows.ee_1.s.voltage:          array(56)
flows.sig_1.s.power:           array(56)
flows.wat_1.s.flowrate:        array(56)
flows.wat_1.s.pressure:        array(56)
flows.wat_1.s.area:            array(56)
flows.wat_1.s.level:           array(56)
flows.wat_2.s.flowrate:        array(56)
flows.wat_2.s.pressure:        array(56)
flows.wat_2.s.area:            array(56)
flows.wat_2.s.level:           array(56)
time:                          array(56)
</pre></div></div>
</div>
</section>
<section id="2b.)-Visualize-nominal-model">
<h3>2b.) Visualize nominal model<a class="headerlink" href="#2b.)-Visualize-nominal-model" title="Permalink to this headline"></a></h3>
<p>First, we can show the model graph using <code class="docutils literal notranslate"><span class="pre">Graph.draw</span></code> to see that it was set up correctly. We can do this both on the model graph itself (using <code class="docutils literal notranslate"><span class="pre">ModelGraph</span></code>) and the results of the nominal run (by passing <code class="docutils literal notranslate"><span class="pre">graph</span></code> as an argument in <code class="docutils literal notranslate"><span class="pre">desired_result</span></code>) to verify both are fault-free.</p>
<p>Note that the underlyign <code class="docutils literal notranslate"><span class="pre">Graph</span></code> class is very flexible and enables a wide range of display options: - <a class="reference external" href="https://nasa.github.io/fmdtools/docs/fmdtools.analyze.html#fmdtools.analyze.graph.Graph">Graph docs</a> - <a class="reference external" href="https://nasa.github.io/fmdtools/docs/fmdtools.analyze.html#fmdtools.analyze.graph.Graph.draw">Graph.draw</a></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mg</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">ModelGraph</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
<span class="n">mg</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&lt;Figure size 864x720 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_32_1.png" src="../../_images/examples_pump_Tutorial_complete_32_1.png" />
</div>
</div>
<p>We can also view the flow values of the model using <code class="docutils literal notranslate"><span class="pre">an.plot.hist</span></code> (<a class="reference external" href="https://nasa.github.io/fmdtools/docs/fmdtools.analyze.html#fmdtools.analyze.plot.hist">see docs</a>)</p>
<p>It may be helpful to only view flows of interest.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">mdlhist_nominal</span><span class="p">,</span> <span class="s1">&#39;wat_1.s.flowrate&#39;</span><span class="p">,</span> <span class="s1">&#39;wat_1.s.flowrate&#39;</span><span class="p">,</span> <span class="s1">&#39;ee_1.s.voltage&#39;</span><span class="p">,</span> <span class="s1">&#39;ee_1.s.current&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_34_0.png" src="../../_images/examples_pump_Tutorial_complete_34_0.png" />
</div>
</div>
<p>Note: for quick access to the syntax and options for these methods, type the <code class="docutils literal notranslate"><span class="pre">?method</span></code> or <code class="docutils literal notranslate"><span class="pre">help(method)</span></code> in the terminal. For example <code class="docutils literal notranslate"><span class="pre">?an.plot.mdlhists</span></code></p>
</section>
<section id="2b.)-Simulate-a-fault-mode">
<h3>2b.) Simulate a fault mode<a class="headerlink" href="#2b.)-Simulate-a-fault-mode" title="Permalink to this headline"></a></h3>
<p>To simulate the model in a fault scenario, use the <code class="docutils literal notranslate"><span class="pre">propagate.one_fault</span></code> method. The set of possible faults is defined in the function definitions in <code class="docutils literal notranslate"><span class="pre">ex_pump.py</span></code>, and we can propagate a fault at any time in the operational interval (0-55 seconds).</p>
<p>For example, below we simulate a short in the <code class="docutils literal notranslate"><span class="pre">MoveWater</span></code> function at time t=10:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_fault</span><span class="p">,</span> <span class="n">mdlhist_fault</span><span class="o">=</span><span class="n">propagate</span><span class="o">.</span><span class="n">one_fault</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="s1">&#39;move_water&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                                 <span class="n">desired_result</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;endclass&#39;</span><span class="p">,</span> <span class="s1">&#39;graph&#39;</span><span class="p">],</span> <span class="n">track</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can also view the results for from this. In this case <code class="docutils literal notranslate"><span class="pre">mdlhist</span></code> gives a history of results for both the nominal and faulty runs.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_fault</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
endclass.rate:                   0.00055
endclass.cost:        29000.000000000007
endclass.expected cost: 1595000.0000000005
graph: &lt;fmdtools.analyze.graph.ModelGraph object at 0x000001D691FE1610&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdlhist_fault</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
nominal.i.finished:            array(56)
nominal.i.on:                  array(56)
nominal.fxns.import_ee.s.effstate: array(56)
nominal.fxns.import_ee.m.faults.no_v: array(56)
nominal.fxns.import_ee.m.faults.inf_v: array(56)
nominal.fxns.import_ee.m.mode: array(56)
nominal.fxns.import_           array(56)
nominal.fxns.import_water.m.mode: array(56)
nominal.fxns.import_           array(56)
nominal.fxns.import_signal.m.mode: array(56)
nominal.fxns.move_wa           array(56)
nominal.fxns.move_water.s.eff: array(56)
nominal.fxns.move_wa           array(56)
nominal.fxns.move_water.m.faults.short: array(56)
nominal.fxns.move_water.m.mode: array(56)
nominal.fxns.move_wa           array(56)
nominal.fxns.move_wa           array(56)
nominal.fxns.export_           array(56)
nominal.fxns.export_water.m.mode: array(56)
nominal.flows.ee_1.s.current:  array(56)
nominal.flows.ee_1.s.voltage:  array(56)
nominal.flows.sig_1.s.power:   array(56)
nominal.flows.wat_1.s.flowrate: array(56)
nominal.flows.wat_1.s.pressure: array(56)
nominal.flows.wat_1.s.area:    array(56)
nominal.flows.wat_1.s.level:   array(56)
nominal.flows.wat_2.s.flowrate: array(56)
nominal.flows.wat_2.s.pressure: array(56)
nominal.flows.wat_2.s.area:    array(56)
nominal.flows.wat_2.s.level:   array(56)
nominal.time:                  array(56)
faulty.i.finished:             array(56)
faulty.i.on:                   array(56)
faulty.fxns.import_ee.s.effstate: array(56)
faulty.fxns.import_ee.m.faults.no_v: array(56)
faulty.fxns.import_ee.m.faults.inf_v: array(56)
faulty.fxns.import_ee.m.mode:  array(56)
faulty.fxns.import_w           array(56)
faulty.fxns.import_water.m.mode: array(56)
faulty.fxns.import_s           array(56)
faulty.fxns.import_signal.m.mode: array(56)
faulty.fxns.move_water.i.over_pressure: array(56)
faulty.fxns.move_water.s.eff:  array(56)
faulty.fxns.move_wat           array(56)
faulty.fxns.move_water.m.faults.short: array(56)
faulty.fxns.move_water.m.mode: array(56)
faulty.fxns.move_wat           array(56)
faulty.fxns.move_wat           array(56)
faulty.fxns.export_w           array(56)
faulty.fxns.export_water.m.mode: array(56)
faulty.flows.ee_1.s.current:   array(56)
faulty.flows.ee_1.s.voltage:   array(56)
faulty.flows.sig_1.s.power:    array(56)
faulty.flows.wat_1.s.flowrate: array(56)
faulty.flows.wat_1.s.pressure: array(56)
faulty.flows.wat_1.s.area:     array(56)
faulty.flows.wat_1.s.level:    array(56)
faulty.flows.wat_2.s.flowrate: array(56)
faulty.flows.wat_2.s.pressure: array(56)
faulty.flows.wat_2.s.area:     array(56)
faulty.flows.wat_2.s.level:    array(56)
faulty.time:                   array(56)
</pre></div></div>
</div>
</section>
<section id="3b.)-Visualize-fault-model-states">
<h3>3b.) Visualize fault model states<a class="headerlink" href="#3b.)-Visualize-fault-model-states" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">an.plot.mdlhistvals</span></code> also works for a mdlhists given from <code class="docutils literal notranslate"><span class="pre">propagate.one_fault</span></code>. We can view these results below. As shown, the function will give the nominal result in a blue dotted line and the faulty result in a red line.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">mdlhist_fault</span><span class="p">,</span> <span class="s1">&#39;wat_1.s.flowrate&#39;</span><span class="p">,</span> <span class="s1">&#39;wat_1.s.flowrate&#39;</span><span class="p">,</span> <span class="s1">&#39;ee_1.s.voltage&#39;</span><span class="p">,</span> <span class="s1">&#39;ee_1.s.current&#39;</span><span class="p">,</span>
                            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Pump Response to Motor Short Fault&#39;</span><span class="p">,</span>
                            <span class="n">time_slice</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">legend_loc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_42_0.png" src="../../_images/examples_pump_Tutorial_complete_42_0.png" />
</div>
</div>
<p>We can also view this result graph using <code class="docutils literal notranslate"><span class="pre">Graph.draw</span></code>. In this case, it shows the state of the model at the final time-step of the model run. Thus, while the <code class="docutils literal notranslate"><span class="pre">EE_1</span></code> flow is shown in orange (because it is off-nominal), the Water flows are not, because they have the same state at the final time-step.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_fault</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&lt;Figure size 864x720 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_44_1.png" src="../../_images/examples_pump_Tutorial_complete_44_1.png" />
</div>
</div>
<p>If we want to view the graph at another time-step, we can use <code class="docutils literal notranslate"><span class="pre">Graph.draw_from</span></code>, which will call <code class="docutils literal notranslate"><span class="pre">History.get_degraded_hist</span></code> to first process the model states into results which can be visualized and then map that onto a graph view at a given time.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">mg</span><span class="o">.</span><span class="n">draw_from</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="n">mdlhist_fault</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_46_0.png" src="../../_images/examples_pump_Tutorial_complete_46_0.png" />
</div>
</div>
<p>Note that multiple graph representations are available for the graph if desired…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mg1</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">ModelFxnGraph</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">mg1</span><span class="o">.</span><span class="n">draw_from</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="n">mdlhist_fault</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_pump_Tutorial_complete_48_0.png" src="../../_images/examples_pump_Tutorial_complete_48_0.png" />
</div>
</div>
</section>
<section id="4a.)-Simulate-set-of-fault-modes">
<h3>4a.) Simulate set of fault modes<a class="headerlink" href="#4a.)-Simulate-set-of-fault-modes" title="Permalink to this headline"></a></h3>
<p>To simulate the set of fault modes, we first choose a <code class="docutils literal notranslate"><span class="pre">SampleApproach</span></code>. For simplicity, we can choose default parameters at first.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">mdlhists_app</span> <span class="o">=</span> <span class="n">propagate</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
SCENARIOS COMPLETE: 100%|██████████| 17/17 [00:00&lt;00:00, 132.14it/s]
</pre></div></div>
</div>
<p>It can be helpful to view what these results look like–a <code class="docutils literal notranslate"><span class="pre">Result</span></code> of faults injected at particular times with their correspnding <code class="docutils literal notranslate"><span class="pre">Result</span></code> dictionaries.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
import_ee_no_v_t27p0.endclass.rate: 0.0003600000000000001
import_ee_no_v_t27p0.endclass.cost: 15174.999999999998
import_ee_no_v_t27p0            546300.0
import_ee_inf_v_t27p0.endclass.rate: 9.000000000000002e-05
import_ee_inf_v_t27p0.endclass.cost: 20175.0
import_ee_inf_v_t27p  181575.00000000003
import_water_no_wat_             0.00015
import_water_no_wat_   6174.999999999998
import_water_no_wat_   92624.99999999996
import_signal_no_sig1.2857142857142856e-05
import_signal_no_sig              8650.0
import_signal_no_sig   11121.42857142857
move_water_mech_brea0.00023142857142857142
move_water_mech_brea  10174.999999999998
move_water_mech_brea   235478.5714285714
move_water_short_t27p0.endclass.rate: 0.00012857142857142858
move_water_short_t27p0.endclass.cost: 25175.0
move_water_short_t27   323678.5714285714
export_water_block_t27p0.endclass.rate: 0.00012857142857142858
export_water_block_t27p0.endclass.cost: 15152.5
export_water_block_t  194817.85714285716
import_water_no_wat_t2p0.endclass.rate: 1.6666666666666667e-05
import_water_no_wat_t2p0.endclass.cost: 11125.000000000007
import_water_no_wat_   18541.66666666668
import_signal_no_sig2.1428571428571427e-06
import_signal_no_sig  20125.000000000007
import_signal_no_sig   4312.500000000001
move_water_mech_brea2.1428571428571427e-06
move_water_mech_brea  15125.000000000007
move_water_mech_brea    3241.07142857143
move_water_short_t2p0.endclass.rate: 2.1428571428571428e-05
move_water_short_t2p0.endclass.cost: 30125.000000000007
move_water_short_t2p   64553.57142857144
export_water_block_t2p0.endclass.rate: 2.1428571428571428e-05
export_water_block_t2p0.endclass.cost: 20102.500000000007
export_water_block_t   43076.78571428573
import_water_no_wat_1.9999999999999998e-05
import_water_no_wat_              1000.0
import_water_no_wat_  1999.9999999999998
import_signal_no_sig1.7142857142857143e-06
import_signal_no_sig             10000.0
import_signal_no_sig  1714.2857142857142
move_water_mech_brea2.5714285714285716e-06
move_water_mech_brea              5000.0
move_water_mech_brea  1285.7142857142858
move_water_short_t52p0.endclass.rate: 1.7142857142857145e-05
move_water_short_t52p0.endclass.cost: 10000.0
move_water_short_t52  17142.857142857145
export_water_block_t52p0.endclass.rate: 1.7142857142857145e-05
export_water_block_t52p0.endclass.cost: 5000.0
export_water_block_t   8571.428571428572
nominal.endclass.rate:               1.0
nominal.endclass.cost:               0.0
nominal.endclass.expected cost:      0.0
</pre></div></div>
</div>
<p>We can look at/use a more structured version using:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ec_nest</span> <span class="o">=</span> <span class="n">endclasses_app</span><span class="o">.</span><span class="n">nest</span><span class="p">()</span>
<span class="n">ec_nest</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
import_water_no_wat_t2p0:
--endclass:
----cost:             11125.000000000007
----rate:         1.6666666666666667e-05
----expected cost:     18541.66666666668
import_signal_no_sig_t27p0:
--endclass:
----cost:                         8650.0
----rate:         1.2857142857142856e-05
----expected cost:     11121.42857142857
move_water_short_t2p0:
--endclass:
----cost:             30125.000000000007
----rate:         2.1428571428571428e-05
----expected cost:     64553.57142857144
import_water_no_wat_t52p0:
--endclass:
----cost:                         1000.0
----rate:         1.9999999999999998e-05
----expected cost:    1999.9999999999998
import_water_no_wat_t27p0:
--endclass:
----cost:              6174.999999999998
----rate:                        0.00015
----expected cost:     92624.99999999996
import_ee_no_v_t27p0:
--endclass:
----cost:             15174.999999999998
----rate:          0.0003600000000000001
----expected cost:              546300.0
import_signal_no_sig_t52p0:
--endclass:
----cost:                        10000.0
----rate:         1.7142857142857143e-06
----expected cost:    1714.2857142857142
export_water_block_t27p0:
--endclass:
----cost:                        15152.5
----rate:         0.00012857142857142858
----expected cost:    194817.85714285716
move_water_mech_break_t2p0:
--endclass:
----cost:             15125.000000000007
----rate:         2.1428571428571427e-06
----expected cost:      3241.07142857143
export_water_block_t2p0:
--endclass:
----cost:             20102.500000000007
----rate:         2.1428571428571428e-05
----expected cost:     43076.78571428573
import_signal_no_sig_t2p0:
--endclass:
----cost:             20125.000000000007
----rate:         2.1428571428571427e-06
----expected cost:     4312.500000000001
move_water_short_t27p0:
--endclass:
----cost:                        25175.0
----rate:         0.00012857142857142858
----expected cost:     323678.5714285714
move_water_short_t52p0:
--endclass:
----cost:                        10000.0
----rate:         1.7142857142857145e-05
----expected cost:    17142.857142857145
move_water_mech_break_t52p0:
--endclass:
----cost:                         5000.0
----rate:         2.5714285714285716e-06
----expected cost:    1285.7142857142858
move_water_mech_break_t27p0:
--endclass:
----cost:             10174.999999999998
----rate:         0.00023142857142857142
----expected cost:     235478.5714285714
export_water_block_t52p0:
--endclass:
----cost:                         5000.0
----rate:         1.7142857142857145e-05
----expected cost:     8571.428571428572
nominal:
--endclass:
----cost:                            0.0
----rate:                            1.0
----expected cost:                   0.0
import_ee_inf_v_t27p0:
--endclass:
----cost:                        20175.0
----rate:          9.000000000000002e-05
----expected cost:    181575.00000000003
</pre></div></div>
</div>
<p>It can be helpful to explore different approach parameters (e.g. focussing on single faults, different numbers of sample points, etc)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app2</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;move_water&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">)])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app2</span><span class="o">.</span><span class="n">list_modes</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(&#39;move_water&#39;, &#39;short&#39;)]
</pre></div></div>
</div>
<p>There are a number of different ways to sample the scenarios in the approach:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app3</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;evenspacing&#39;</span><span class="p">,</span> <span class="s1">&#39;numpts&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app3</span><span class="o">.</span><span class="n">times</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.0,
 1.0,
 2.0,
 3.0,
 4.0,
 12.0,
 20.0,
 27.0,
 34.0,
 42.0,
 50.0,
 51.0,
 52.0,
 53.0,
 54.0,
 55.0]
</pre></div></div>
</div>
</section>
<section id="4b.)-Visualize-set-of-fault-modes">
<h3>4b.) Visualize set of fault modes<a class="headerlink" href="#4b.)-Visualize-set-of-fault-modes" title="Permalink to this headline"></a></h3>
<p>Using this fault approach, we can now make an FMEA-like analyses of the different fault modes. <code class="docutils literal notranslate"><span class="pre">an.tabulate.summfmea</span></code> organizes endclasses into a table for each fault.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">summary_fmea</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">tabulate</span><span class="o">.</span><span class="n">summfmea</span><span class="p">(</span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
<span class="n">summary_fmea</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>rate</th>
      <th>expected cost</th>
      <th>cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>move_water</th>
      <th>short</th>
      <td>0.000167</td>
      <td>405375.000000</td>
      <td>21766.666667</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">import_ee</th>
      <th>inf_v</th>
      <td>0.000090</td>
      <td>181575.000000</td>
      <td>20175.000000</td>
    </tr>
    <tr>
      <th>no_v</th>
      <td>0.000360</td>
      <td>546300.000000</td>
      <td>15175.000000</td>
    </tr>
    <tr>
      <th>export_water</th>
      <th>block</th>
      <td>0.000167</td>
      <td>246466.071429</td>
      <td>13418.333333</td>
    </tr>
    <tr>
      <th>import_signal</th>
      <th>no_sig</th>
      <td>0.000017</td>
      <td>17148.214286</td>
      <td>12925.000000</td>
    </tr>
    <tr>
      <th>move_water</th>
      <th>mech_break</th>
      <td>0.000236</td>
      <td>240005.357143</td>
      <td>10100.000000</td>
    </tr>
    <tr>
      <th>import_water</th>
      <th>no_wat</th>
      <td>0.000187</td>
      <td>113166.666667</td>
      <td>6100.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">an.result_summary_fmea</span></code> with the processed results histories to get a better picture of which flows and functions degrade in each scenario.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">tabulate</span><span class="o">.</span><span class="n">result_summary_fmea</span><span class="p">(</span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">mdlhists_app</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">flows</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>degraded</th>
      <th>faulty</th>
      <th>rate</th>
      <th>cost</th>
      <th>expected cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>import_water_no_wat_t2p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000017</td>
      <td>11125.0</td>
      <td>18541.666667</td>
    </tr>
    <tr>
      <th>import_signal_no_sig_t27p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000013</td>
      <td>8650.0</td>
      <td>11121.428571</td>
    </tr>
    <tr>
      <th>move_water_short_t2p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000021</td>
      <td>30125.0</td>
      <td>64553.571429</td>
    </tr>
    <tr>
      <th>import_water_no_wat_t52p0</th>
      <td>[]</td>
      <td>[]</td>
      <td>0.00002</td>
      <td>1000.0</td>
      <td>2000.0</td>
    </tr>
    <tr>
      <th>import_water_no_wat_t27p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.00015</td>
      <td>6175.0</td>
      <td>92625.0</td>
    </tr>
    <tr>
      <th>import_ee_no_v_t27p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.00036</td>
      <td>15175.0</td>
      <td>546300.0</td>
    </tr>
    <tr>
      <th>import_signal_no_sig_t52p0</th>
      <td>[]</td>
      <td>[]</td>
      <td>0.000002</td>
      <td>10000.0</td>
      <td>1714.285714</td>
    </tr>
    <tr>
      <th>export_water_block_t27p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000129</td>
      <td>15152.5</td>
      <td>194817.857143</td>
    </tr>
    <tr>
      <th>move_water_mech_break_t2p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000002</td>
      <td>15125.0</td>
      <td>3241.071429</td>
    </tr>
    <tr>
      <th>export_water_block_t2p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000021</td>
      <td>20102.5</td>
      <td>43076.785714</td>
    </tr>
    <tr>
      <th>import_signal_no_sig_t2p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000002</td>
      <td>20125.0</td>
      <td>4312.5</td>
    </tr>
    <tr>
      <th>move_water_short_t27p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000129</td>
      <td>25175.0</td>
      <td>323678.571429</td>
    </tr>
    <tr>
      <th>move_water_short_t52p0</th>
      <td>[]</td>
      <td>[]</td>
      <td>0.000017</td>
      <td>10000.0</td>
      <td>17142.857143</td>
    </tr>
    <tr>
      <th>move_water_mech_break_t52p0</th>
      <td>[]</td>
      <td>[]</td>
      <td>0.000003</td>
      <td>5000.0</td>
      <td>1285.714286</td>
    </tr>
    <tr>
      <th>move_water_mech_break_t27p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.000231</td>
      <td>10175.0</td>
      <td>235478.571429</td>
    </tr>
    <tr>
      <th>export_water_block_t52p0</th>
      <td>[]</td>
      <td>[]</td>
      <td>0.000017</td>
      <td>5000.0</td>
      <td>8571.428571</td>
    </tr>
    <tr>
      <th>nominal</th>
      <td>[]</td>
      <td>[]</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>import_ee_inf_v_t27p0</th>
      <td>['ee_1', 'wat_2']</td>
      <td>[]</td>
      <td>0.00009</td>
      <td>20175.0</td>
      <td>181575.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><strong>Note that this is contingent on what we tracked in the history!</strong> In the above model, we used the default, which is only a few variables defined in the model.</p>
<p>If we tracked all, on the other hand, we would get the result below:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">mdlhists_app</span> <span class="o">=</span> <span class="n">propagate</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app</span><span class="p">,</span> <span class="n">track</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
<span class="n">an</span><span class="o">.</span><span class="n">tabulate</span><span class="o">.</span><span class="n">result_summary_fmea</span><span class="p">(</span><span class="n">endclasses_app</span><span class="p">,</span> <span class="n">mdlhists_app</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">flows</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
SCENARIOS COMPLETE: 100%|██████████| 17/17 [00:00&lt;00:00, 72.22it/s]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>degraded</th>
      <th>faulty</th>
      <th>rate</th>
      <th>cost</th>
      <th>expected cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>import_water_no_wat_t2p0</th>
      <td>['import_water', 'ee_1', 'wat_1', 'wat_2']</td>
      <td>['import_water']</td>
      <td>0.000017</td>
      <td>11125.0</td>
      <td>18541.666667</td>
    </tr>
    <tr>
      <th>import_signal_no_sig_t27p0</th>
      <td>['import_signal', 'ee_1', 'sig_1', 'wat_1', 'w...</td>
      <td>['import_signal']</td>
      <td>0.000013</td>
      <td>8650.0</td>
      <td>11121.428571</td>
    </tr>
    <tr>
      <th>move_water_short_t2p0</th>
      <td>['import_ee', 'move_water', 'ee_1', 'wat_1', '...</td>
      <td>['import_ee', 'move_water']</td>
      <td>0.000021</td>
      <td>30125.0</td>
      <td>64553.571429</td>
    </tr>
    <tr>
      <th>import_water_no_wat_t52p0</th>
      <td>['import_water', 'wat_1']</td>
      <td>['import_water']</td>
      <td>0.00002</td>
      <td>1000.0</td>
      <td>2000.0</td>
    </tr>
    <tr>
      <th>import_water_no_wat_t27p0</th>
      <td>['import_water', 'ee_1', 'wat_1', 'wat_2']</td>
      <td>['import_water']</td>
      <td>0.00015</td>
      <td>6175.0</td>
      <td>92625.0</td>
    </tr>
    <tr>
      <th>import_ee_no_v_t27p0</th>
      <td>['import_ee', 'ee_1', 'wat_1', 'wat_2']</td>
      <td>['import_ee']</td>
      <td>0.00036</td>
      <td>15175.0</td>
      <td>546300.0</td>
    </tr>
    <tr>
      <th>import_signal_no_sig_t52p0</th>
      <td>['import_signal']</td>
      <td>['import_signal']</td>
      <td>0.000002</td>
      <td>10000.0</td>
      <td>1714.285714</td>
    </tr>
    <tr>
      <th>export_water_block_t27p0</th>
      <td>['move_water', 'export_water', 'ee_1', 'wat_1'...</td>
      <td>['move_water', 'export_water']</td>
      <td>0.000129</td>
      <td>15152.5</td>
      <td>194817.857143</td>
    </tr>
    <tr>
      <th>move_water_mech_break_t2p0</th>
      <td>['move_water', 'ee_1', 'wat_1', 'wat_2']</td>
      <td>['move_water']</td>
      <td>0.000002</td>
      <td>15125.0</td>
      <td>3241.071429</td>
    </tr>
    <tr>
      <th>export_water_block_t2p0</th>
      <td>['move_water', 'export_water', 'ee_1', 'wat_1'...</td>
      <td>['move_water', 'export_water']</td>
      <td>0.000021</td>
      <td>20102.5</td>
      <td>43076.785714</td>
    </tr>
    <tr>
      <th>import_signal_no_sig_t2p0</th>
      <td>['import_signal', 'ee_1', 'sig_1', 'wat_1', 'w...</td>
      <td>['import_signal']</td>
      <td>0.000002</td>
      <td>20125.0</td>
      <td>4312.5</td>
    </tr>
    <tr>
      <th>move_water_short_t27p0</th>
      <td>['import_ee', 'move_water', 'ee_1', 'wat_1', '...</td>
      <td>['import_ee', 'move_water']</td>
      <td>0.000129</td>
      <td>25175.0</td>
      <td>323678.571429</td>
    </tr>
    <tr>
      <th>move_water_short_t52p0</th>
      <td>['move_water']</td>
      <td>['move_water']</td>
      <td>0.000017</td>
      <td>10000.0</td>
      <td>17142.857143</td>
    </tr>
    <tr>
      <th>move_water_mech_break_t52p0</th>
      <td>['move_water']</td>
      <td>['move_water']</td>
      <td>0.000003</td>
      <td>5000.0</td>
      <td>1285.714286</td>
    </tr>
    <tr>
      <th>move_water_mech_break_t27p0</th>
      <td>['move_water', 'ee_1', 'wat_1', 'wat_2']</td>
      <td>['move_water']</td>
      <td>0.000231</td>
      <td>10175.0</td>
      <td>235478.571429</td>
    </tr>
    <tr>
      <th>export_water_block_t52p0</th>
      <td>['export_water', 'wat_2']</td>
      <td>['export_water']</td>
      <td>0.000017</td>
      <td>5000.0</td>
      <td>8571.428571</td>
    </tr>
    <tr>
      <th>nominal</th>
      <td>[]</td>
      <td>[]</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>import_ee_inf_v_t27p0</th>
      <td>['import_ee', 'ee_1', 'wat_1', 'wat_2']</td>
      <td>['import_ee']</td>
      <td>0.00009</td>
      <td>20175.0</td>
      <td>181575.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="5.)-Saving-Work">
<h2>5.) Saving Work<a class="headerlink" href="#5.)-Saving-Work" title="Permalink to this headline"></a></h2>
<p>In computationally expensive simulations, running a lot of computational simulations can take a considerable amount of time. As a result, it becomes impractical to run a new simulation every time one wishes to analyse its data. Results from fmdtools simulations (endclasses or mdlhists) can be saved as pickle, csv, or json files in this instance using either: - <code class="docutils literal notranslate"><span class="pre">Result.save</span></code>/<code class="docutils literal notranslate"><span class="pre">History.save</span></code> or - passing a save_args dictionary to the respective propagate functions (e.g.,
<code class="docutils literal notranslate"><span class="pre">{'endclass':{'filename':'file.pkl','overwrite':True}</span></code>)</p>
<p>and then loaded using: - <code class="docutils literal notranslate"><span class="pre">Result.load</span></code>/<code class="docutils literal notranslate"><span class="pre">History.load</span></code></p>
<p>For example, for this variable:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
import_ee_no_v_t27p0.endclass.rate: 0.0003600000000000001
import_ee_no_v_t27p0.endclass.cost: 15174.999999999998
import_ee_no_v_t27p0            546300.0
import_ee_inf_v_t27p0.endclass.rate: 9.000000000000002e-05
import_ee_inf_v_t27p0.endclass.cost: 20175.0
import_ee_inf_v_t27p  181575.00000000003
import_water_no_wat_             0.00015
import_water_no_wat_   6174.999999999998
import_water_no_wat_   92624.99999999996
import_signal_no_sig1.2857142857142856e-05
import_signal_no_sig              8650.0
import_signal_no_sig   11121.42857142857
move_water_mech_brea0.00023142857142857142
move_water_mech_brea  10174.999999999998
move_water_mech_brea   235478.5714285714
move_water_short_t27p0.endclass.rate: 0.00012857142857142858
move_water_short_t27p0.endclass.cost: 25175.0
move_water_short_t27   323678.5714285714
export_water_block_t27p0.endclass.rate: 0.00012857142857142858
export_water_block_t27p0.endclass.cost: 15152.5
export_water_block_t  194817.85714285716
import_water_no_wat_t2p0.endclass.rate: 1.6666666666666667e-05
import_water_no_wat_t2p0.endclass.cost: 11125.000000000007
import_water_no_wat_   18541.66666666668
import_signal_no_sig2.1428571428571427e-06
import_signal_no_sig  20125.000000000007
import_signal_no_sig   4312.500000000001
move_water_mech_brea2.1428571428571427e-06
move_water_mech_brea  15125.000000000007
move_water_mech_brea    3241.07142857143
move_water_short_t2p0.endclass.rate: 2.1428571428571428e-05
move_water_short_t2p0.endclass.cost: 30125.000000000007
move_water_short_t2p   64553.57142857144
export_water_block_t2p0.endclass.rate: 2.1428571428571428e-05
export_water_block_t2p0.endclass.cost: 20102.500000000007
export_water_block_t   43076.78571428573
import_water_no_wat_1.9999999999999998e-05
import_water_no_wat_              1000.0
import_water_no_wat_  1999.9999999999998
import_signal_no_sig1.7142857142857143e-06
import_signal_no_sig             10000.0
import_signal_no_sig  1714.2857142857142
move_water_mech_brea2.5714285714285716e-06
move_water_mech_brea              5000.0
move_water_mech_brea  1285.7142857142858
move_water_short_t52p0.endclass.rate: 1.7142857142857145e-05
move_water_short_t52p0.endclass.cost: 10000.0
move_water_short_t52  17142.857142857145
export_water_block_t52p0.endclass.rate: 1.7142857142857145e-05
export_water_block_t52p0.endclass.cost: 5000.0
export_water_block_t   8571.428571428572
nominal.endclass.rate:               1.0
nominal.endclass.cost:               0.0
nominal.endclass.expected cost:      0.0
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_app</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;tutorial_endclasses.csv&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
File already exists: tutorial_endclasses.csv, writing anyway...
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_saved</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;tutorial_endclasses.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endclasses_saved</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
import_ee_no_v_t27p0.endclass.rate: 0.00036
import_ee_no_v_t27p0.endclass.cost: 15174.999999999998
import_ee_no_v_t27p0            546300.0
import_ee_inf_v_t27p0.endclass.rate: 9.000000000000002e-05
import_ee_inf_v_t27p0.endclass.cost: 20175.0
import_ee_inf_v_t27p  181575.00000000003
import_water_no_wat_             0.00015
import_water_no_wat_   6174.999999999998
import_water_no_wat_   92624.99999999996
import_signal_no_sig1.2857142857142856e-05
import_signal_no_sig              8650.0
import_signal_no_sig   11121.42857142857
move_water_mech_brea  0.0002314285714285
move_water_mech_brea  10174.999999999998
move_water_mech_brea   235478.5714285714
move_water_short_t27p0.endclass.rate: 0.0001285714285714
move_water_short_t27p0.endclass.cost: 25175.0
move_water_short_t27   323678.5714285714
export_water_block_t27p0.endclass.rate: 0.0001285714285714
export_water_block_t27p0.endclass.cost: 15152.5
export_water_block_t   194817.8571428572
import_water_no_wat_t2p0.endclass.rate: 1.6666666666666667e-05
import_water_no_wat_t2p0.endclass.cost: 11125.000000000007
import_water_no_wat_   18541.66666666668
import_signal_no_sig2.1428571428571427e-06
import_signal_no_sig  20125.000000000007
import_signal_no_sig   4312.500000000001
move_water_mech_brea2.1428571428571427e-06
move_water_mech_brea  15125.000000000007
move_water_mech_brea    3241.07142857143
move_water_short_t2p0.endclass.rate: 2.1428571428571428e-05
move_water_short_t2p0.endclass.cost: 30125.000000000007
move_water_short_t2p   64553.57142857144
export_water_block_t2p0.endclass.rate: 2.1428571428571428e-05
export_water_block_t2p0.endclass.cost: 20102.500000000007
export_water_block_t   43076.78571428573
import_water_no_wat_               2e-05
import_water_no_wat_              1000.0
import_water_no_wat_              2000.0
import_signal_no_sig1.7142857142857145e-06
import_signal_no_sig             10000.0
import_signal_no_sig  1714.2857142857142
move_water_mech_brea2.571428571428572e-06
move_water_mech_brea              5000.0
move_water_mech_brea  1285.7142857142858
move_water_short_t52p0.endclass.rate: 1.7142857142857145e-05
move_water_short_t52p0.endclass.cost: 10000.0
move_water_short_t52  17142.857142857145
export_water_block_t52p0.endclass.rate: 1.7142857142857145e-05
export_water_block_t52p0.endclass.cost: 5000.0
export_water_block_t   8571.428571428572
nominal.endclass.rate:               1.0
nominal.endclass.cost:               0.0
nominal.endclass.expected cost:      0.0
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>