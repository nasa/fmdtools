<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Probability Modelling in fmdtools &mdash; fmdtools 2.0-alpha documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/fmdtools_ico.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="fmdtools Paper Demonstration" href="../../multirotor/Demonstration.html" />
    <link rel="prev" title="fmdtools-AdaStress integration" href="../AST_Sampling.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo_glow.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../README.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../README.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../README.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../README.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../README.html#contributors">Contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../README.html#license-notices">License/Notices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../README.html#disclaimers">Disclaimers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Development%20Guide.html">Development Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Development%20Guide.html#why-fmdtools">Why fmdtools?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#key-features">Key Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Development%20Guide.html#intro-to-fmdtools">Intro to fmdtools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html">Intro to resilience modelling, simulation, and visualization in Python with fmdtools.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#author-daniel-hulse">Author: Daniel Hulse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#version-2-0-alpha">Version: 2.0-alpha</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#motivation-modelling-system-resilience">Motivation: Modelling System Resilience</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#why-is-resilience-important">Why is Resilience Important?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#enabling-proactive-design-process">Enabling proactive design process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#why-fmdtools-possible-competitors">Why fmdtools? Possible Competitors:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#why-fmdtools-pros">Why fmdtools? Pros:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#why-not-fmdtools-cons">Why <strong>not</strong> fmdtools? Cons:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#what-is-fmdtools-a-python-package-for-design-simulation-and-analysis-of-resilience">What is fmdtools? A Python package for <strong>design</strong>, <strong>simulation</strong>, and <strong>analysis</strong> of resilience.</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#what-is-fmdtools-repo-structure">What is fmdtools? Repo Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#activity-download-and-install-fmdtools">Activity: Download and Install fmdtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#analysis-workflow-structure">Analysis Workflow/Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#defining-a-model">Defining a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#id1">Defining a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#demo-model-activity-examples-pump-ex-pump-py">Demo Model Activity: examples/pump/ex_pump.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#more-resources-for-model-definition">More Resources for Model Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#notebook-activity">Notebook Activity:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#simulation-concepts-static-undirected-propagation">Simulation Concepts: Static/Undirected Propagation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#simulation-concepts-propagation-over-time">Simulation Concepts: Propagation over Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#simulation-concepts-types-of-simulations">Simulation Concepts: Types of Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#simulation-concepts-sampling-approaches">Simulation Concepts: Sampling Approaches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#simulation-concepts-things-to-consider">Simulation Concepts: Things to Consider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#activity-simulate-the-model">Activity: Simulate the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#analysis-modules">Analysis Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#analysis-activity">Analysis Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#conclusions-summary">Conclusions/Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Intro_to_fmdtools.html#further-reading-links">Further Reading/Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Development%20Guide.html#contributions">Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#repo-structure">Repo Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../docs/Development%20Guide.html#remote-structure">Remote Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#development-process">Development Process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../docs/Development%20Guide.html#upload-to-pypi">Upload to PyPI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#roles">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#contributors">Contributors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../CONTRIBUTORS.html">CONTRIBUTORS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Development%20Guide.html#model-development-best-practices">Model Development Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#plan-your-model-to-avoid-technical-debt">Plan your model to avoid technical debt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#don-t-copy-inherit-and-functionalize">Don’t copy, inherit and functionalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#document-your-code-sometimes-before-your-write-it">Document your code, sometimes <em>before</em> your write it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#don-t-get-ahead-of-yourself-try-to-get-a-running-simulation-first">Don’t get ahead of yourself–try to get a running simulation first</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#preserve-your-prototype-setup-by-formalizing-it-as-a-test">Preserve your prototype setup by formalizing it as a test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#edit-your-code">Edit your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#structuring-a-model">Structuring a model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#use-model-constructs-to-simplify-your-code">Use model constructs to simplify your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#style-advice">Style advice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/Development%20Guide.html#see-also">See also</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../docs/Examples.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../docs/Examples.html#pump">Pump</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Tutorial_complete.html">fmdtools Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorial_complete.html#1.)-Loading-the-environment-and-model">1.) Loading the environment and model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorial_complete.html#2.),-3.),-and-4.)-Simulate-and-visualize-the-results!">2.), 3.), and 4.) Simulate and visualize the results!</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorial_complete.html#5.)-Saving-Work">5.) Saving Work</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Pump_Example_Notebook.html">Pump Example Notebook</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Pump_Example_Notebook.html#Initial-Model-Checks">Initial Model Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pump_Example_Notebook.html#History">History</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pump_Example_Notebook.html#Propagating-and-Viewing-Results-for-Individual-Faults">Propagating and Viewing Results for Individual Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pump_Example_Notebook.html#Visualization-of-resilience-metrics">Visualization of resilience metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pump_Example_Notebook.html#Running-a-List-of-Faults">Running a List of Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pump_Example_Notebook.html#Running-a-Fault-Sampling-Approach">Running a Fault Sampling Approach</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Parallelism_Tutorial.html">Using Parallel Computing in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Parallelism_Tutorial.html#Model-Checks">Model Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Parallelism_Tutorial.html#Using-Parallelism-in-Simulation">Using Parallelism in Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Parallelism_Tutorial.html#Performance-Comparison">Performance Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Parallelism_Tutorial.html#Comparison:-Lower-Tracking-Time-Resolution">Comparison: Lower Tracking Time Resolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Parallelism_Tutorial.html#Comparison-Conclusions:">Comparison Conclusions:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Parallelism_Tutorial.html#Further-Computational-Cost-Reduction-via-Profiling">Further Computational Cost Reduction via Profiling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Optimization.html">Optimization using the ProblemInterface class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Optimization.html#ProblemInterface-Setup">ProblemInterface Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Optimization.html#Problem-interfaces">Problem interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Optimization.html#Optimization:">Optimization:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Optimization.html#Multi-scenario-Optimization">Multi-scenario Optimization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Stochastic_Modelling.html">Stochastic Modelling in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Stochastic_Modelling.html#Model-Setup">Model Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Stochastic_Modelling.html#Simulation-and-Analysis">Simulation and Analysis</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../AST_Sampling.html">fmdtools-AdaStress integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../AST_Sampling.html#Python-setup:">Python setup:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../AST_Sampling.html#Running-AdaStress-Methods">Running AdaStress Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../AST_Sampling.html#MCTS">MCTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../AST_Sampling.html#Pump">Pump</a></li>
<li class="toctree-l4"><a class="reference internal" href="../AST_Sampling.html#Simulator">Simulator</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Probability Modelling in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Theory-and-Goals">Theory and Goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Model-Description">Model Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Experiments">Experiments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Examples.html#multirotor">Multirotor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../multirotor/Demonstration.html">fmdtools Paper Demonstration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Demonstration.html#Initial-Model">Initial Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Demonstration.html#Setting-Node-Positions">Setting Node Positions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Demonstration.html#Network-Model">Network Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Demonstration.html#Static-Model">Static Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Demonstration.html#Dynamic-Model">Dynamic Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Demonstration.html#Hierarchical-Model">Hierarchical Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../multirotor/Multirotor_Optimization.html">Integrated Resilience Optimization Architectures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Multirotor_Optimization.html#Design-Model">Design Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Multirotor_Optimization.html#Operational-Model">Operational Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Multirotor_Optimization.html#Resilience-Model">Resilience Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../multirotor/Multirotor_Optimization.html#Combined-Simulation/Optimization">Combined Simulation/Optimization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Examples.html#tank">Tank</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tank/Tank_Analysis.html">Hold-up Tank Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tank/Tank_Analysis.html#Verifying-the-nominal-state:">Verifying the nominal state:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tank/Tank_Analysis.html#What-happens-under-component-faults?">What happens under component faults?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tank/Tank_Analysis.html#What-about-human-induced-faults?">What about human-induced faults?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tank/Tank_Analysis.html#Evaluating-Joint-Component-Human-fault-modes">Evaluating Joint Component-Human fault modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tank/Tank_Analysis.html#Testing-different-reaction-times">Testing different reaction times</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tank/Tank_Optimization.html">Cooling Tank Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tank/Tank_Optimization.html#Simulation">Simulation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Examples.html#eps">EPS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../eps/EPS_Example_Notebook.html">EPS Example Notebook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Examples.html#action-sequence-graph">Action Sequence Graph</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../asg_demo/Action_Sequence_Graph.html">Action Sequence Graph Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../asg_demo/Action_Sequence_Graph.html#Function-level-Simulation">Function-level Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../asg_demo/Action_Sequence_Graph.html#Model-Simulation">Model Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../asg_demo/Action_Sequence_Graph.html#Fault-Simulation">Fault Simulation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Examples.html#rover">Rover</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../rover/Rover_Setup_Notebook.html">Rover Model Explanation and Preliminaries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Rover_Setup_Notebook.html#Model-Setup">Model Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Rover_Setup_Notebook.html#Model-simulation">Model simulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/Approach_Use-Cases.html">Defining Fault Sampling Approaches in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Approach_Use-Cases.html#Basics">Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Approach_Use-Cases.html#Model-Setup">Model Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Approach_Use-Cases.html#Setting-up-an-approach">Setting up an approach</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Approach_Use-Cases.html#Propagating-Faults">Propagating Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Approach_Use-Cases.html#Pruning">Pruning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/Nominal_Approach_Use-Cases.html">Defining Nominal Approaches in fmdtools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Nominal_Approach_Use-Cases.html#Quantifying-probabilities">Quantifying probabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Nominal_Approach_Use-Cases.html#Random-input-generation">Random input generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/Nominal_Approach_Use-Cases.html#Nested-Scenario-Sampling">Nested Scenario Sampling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/HFAC_Analyses/HFAC_Analyses.html">More Human Failure Analyses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/HFAC_Analyses/IDETC_Human_Paper_Analysis.html">Human Failure Representation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/HFAC_Analyses/IDETC_Human_Paper_Analysis.html#Testing-behavioral-simulation">Testing behavioral simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/HFAC_Analyses/IDETC_Human_Paper_Analysis.html#Testing-Faults">Testing Faults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/HFAC_Analyses/IDETC_Human_Paper_Analysis.html#Examining-Performance-Shaping-Factors">Examining Performance Shaping Factors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/degradation_modelling/Degradation_Modelling_Notebook.html">Degradation Modelling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/degradation_modelling/Degradation_Modelling_Notebook.html#Drive-Degradation">Drive Degradation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/degradation_modelling/Degradation_Modelling_Notebook.html#Human-Degradation">Human Degradation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/degradation_modelling/Degradation_Modelling_Notebook.html#Combined-Degradation">Combined Degradation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/fault_sampling/Rover_Mode_Notebook.html">Synthetic Mode Generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/fault_sampling/Rover_Mode_Notebook.html#Cluster-Analysis">Cluster Analysis</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/optimization/Search_Comparison.html">Faulty State-Space Search Method Comparison</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/optimization/Search_Comparison.html#Performance-Comparison">Performance Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/optimization/Search_Comparison.html#Comparing-Solutions-over-weights---Fault-Space-Formulation">Comparing Solutions over weights - Fault-Space Formulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rover/optimization/Search_Comparison.html#Comparing-Solutions-over-weights---Result-Space-Formulation">Comparing Solutions over weights - Result-Space Formulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rover/optimization/Rover_Response_Optimization.html">Rover Response Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../rover/optimization/Rover_Response_Optimization.html#Optimization">Optimization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/Examples.html#multiflow-demo">Multiflow Demo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/fmdtools.html">Module Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/fmdtools.define.html">fmdtools.define package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.block">fmdtools.define.block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.common">fmdtools.define.common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.flow">fmdtools.define.flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.mode">fmdtools.define.mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.model">fmdtools.define.model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.parameter">fmdtools.define.parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.rand">fmdtools.define.rand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.state">fmdtools.define.state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.define.html#module-fmdtools.define.time">fmdtools.define.time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/fmdtools.sim.html">fmdtools.sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.sim.html#fmdtools-sim-propagate">fmdtools.sim.propagate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.sim.html#module-fmdtools.sim.scenario">fmdtools.sim.scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.sim.html#module-fmdtools.sim.approach">fmdtools.sim.approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.sim.html#module-fmdtools.sim.search">fmdtools.sim.search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/fmdtools.analyze.html">fmdtools.analyze package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.analyze.html#module-fmdtools.analyze.result">fmdtools.analyze.result</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.analyze.html#module-fmdtools.analyze.plot">fmdtools.analyze.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.analyze.html#module-fmdtools.analyze.graph">fmdtools.analyze.graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docs/fmdtools.analyze.html#module-fmdtools.analyze.tabulate">fmdtools.analyze.tabulate</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">fmdtools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../docs/Examples.html">Examples</a> &raquo;</li>
      <li>Probability Modelling in fmdtools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/examples/pump/IDETC_Results/IDETC_Figures.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Probability-Modelling-in-fmdtools">
<h1>Probability Modelling in fmdtools<a class="headerlink" href="#Probability-Modelling-in-fmdtools" title="Permalink to this headline"></a></h1>
<p>Here we will demonstrate the fmdtool toolkit’s abilities to find a set of scenarios that represent the effects of a given mode.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#First, import the fault propogation library as well as the model</span>
<span class="c1">#since the package is in a parallel location to examples...</span>
<span class="kn">import</span> <span class="nn">fmdtools.sim.propagate</span> <span class="k">as</span> <span class="nn">propagate</span>
<span class="kn">import</span> <span class="nn">fmdtools.analyze</span> <span class="k">as</span> <span class="nn">an</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fmdtools</span>
<span class="n">help</span><span class="p">(</span><span class="n">fmdtools</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on package fmdtools:

NAME
    fmdtools

PACKAGE CONTENTS
    analyze (package)
    define (package)
    sim (package)

DATA
    __all__ = [&#39;analyze&#39;, &#39;sim&#39;, &#39;define&#39;]

FILE
    c:\users\dhulse\documents\github\fmdtools\fmdtools\__init__.py


</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">quadpy</span>
<span class="kn">from</span> <span class="nn">ex_pump</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">~\AppData\Local\Temp\1/ipykernel_19168/4258221960.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">      6</span> <span class="ansi-green-intense-fg ansi-bold">from</span> ex_pump <span class="ansi-green-intense-fg ansi-bold">import</span> <span class="ansi-yellow-intense-fg ansi-bold">*</span>
<span class="ansi-green-fg">      7</span> <span class="ansi-green-intense-fg ansi-bold">from</span> IPython<span class="ansi-yellow-intense-fg ansi-bold">.</span>display <span class="ansi-green-intense-fg ansi-bold">import</span> HTML
<span class="ansi-green-intense-fg ansi-bold">----&gt; 8</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>mdl <span class="ansi-yellow-intense-fg ansi-bold">=</span> Pump<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">~\Documents\GitHub\fmdtools\examples\pump\IDETC_Results\ex_pump.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, params, modelparams, valparams)</span>
<span class="ansi-green-fg">    213</span>         super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>__init__<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    214</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 215</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>__init__<span class="ansi-yellow-intense-fg ansi-bold">(</span>params<span class="ansi-yellow-intense-fg ansi-bold">=</span>params<span class="ansi-yellow-intense-fg ansi-bold">,</span> modelparams<span class="ansi-yellow-intense-fg ansi-bold">=</span>modelparams<span class="ansi-yellow-intense-fg ansi-bold">,</span> valparams<span class="ansi-yellow-intense-fg ansi-bold">=</span>valparams<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    216</span>         <span class="ansi-red-intense-fg ansi-bold">#Stepsize: (change at your own risk, because this changes how the model will execute)</span>
<span class="ansi-green-fg">    217</span>         <span class="ansi-red-intense-fg ansi-bold"># Timestep at the moment must be an integer.</span>

<span class="ansi-red-intense-fg ansi-bold">TypeError</span>: __init__() got an unexpected keyword argument &#39;params&#39;
</pre></div></div>
</div>
<section id="Theory-and-Goals">
<h2>Theory and Goals<a class="headerlink" href="#Theory-and-Goals" title="Permalink to this headline"></a></h2>
<p>The purpose of this document is to show the relative performance of various numerical integration techniques for resilience quantification.</p>
<section id="Some-approaches:">
<h3>Some approaches:<a class="headerlink" href="#Some-approaches:" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>monte carlo with and without variance reduction</p></li>
<li><p>quadrature (from quadpy)</p></li>
<li><p>sample likeliest phase (<code class="docutils literal notranslate"><span class="pre">maxlike</span></code> option)</p></li>
</ul>
</section>
</section>
<section id="Model-Description">
<h2>Model Description<a class="headerlink" href="#Model-Description" title="Permalink to this headline"></a></h2>
<p>pump: defined in ex_pump. Has the following functions: - import EE - import Water - import Signal - move Water - export Water</p>
<p>and flows: - EE (to power the pump) - Water_in - Water_out - Signal input (on/off)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endresults</span><span class="p">,</span> <span class="n">mdlhist</span><span class="o">=</span><span class="n">propagate</span><span class="o">.</span><span class="n">one_fault</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">staged</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#rp.show_graph(resgraph)</span>
</pre></div>
</div>
</div>
<p>The following shows the states of the system over time with and without a fault:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mdlhists</span><span class="p">(</span><span class="n">mdlhist</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mdlhistvals</span><span class="p">(</span><span class="n">mdlhist</span><span class="p">,</span> <span class="s1">&#39;blockage&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">fxnflowvals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Wat_2&#39;</span><span class="p">:[</span><span class="s1">&#39;flowrate&#39;</span><span class="p">,</span> <span class="s1">&#39;pressure&#39;</span><span class="p">],</span><span class="s1">&#39;EE_1&#39;</span><span class="p">:</span><span class="s1">&#39;current&#39;</span><span class="p">},</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">returnfig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timelabel</span><span class="o">=</span><span class="s2">&quot;time (min)&quot;</span><span class="p">)</span>
<span class="c1">#plt.rcParams.update({&#39;font.size&#39;: 14})</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Amps&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;$m^3/s$&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;kPa&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mdlhists</span><span class="p">(</span><span class="n">mdlhist</span><span class="p">,</span><span class="n">fxnflowvals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Wat_2&#39;</span><span class="p">:[</span><span class="s1">&#39;flowrate&#39;</span><span class="p">,</span> <span class="s1">&#39;pressure&#39;</span><span class="p">],</span><span class="s1">&#39;EE_1&#39;</span><span class="p">:</span><span class="s1">&#39;current&#39;</span><span class="p">},</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;time (min)&quot;</span><span class="p">,</span>\
                           <span class="n">ylabels</span><span class="o">=</span><span class="p">{(</span><span class="s1">&#39;flows&#39;</span><span class="p">,</span> <span class="s2">&quot;EE_1&quot;</span><span class="p">,</span><span class="s1">&#39;current&#39;</span><span class="p">):</span><span class="s1">&#39;Amps&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;flows&#39;</span><span class="p">,</span> <span class="s1">&#39;Wat_2&#39;</span><span class="p">,</span> <span class="s1">&#39;flowrate&#39;</span><span class="p">):</span><span class="s2">&quot;$m^3/s$&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;flows&#39;</span><span class="p">,</span> <span class="s1">&#39;Wat_2&#39;</span><span class="p">,</span> <span class="s1">&#39;pressure&#39;</span><span class="p">):</span><span class="s2">&quot;kPa&quot;</span><span class="p">},</span>\
                          <span class="n">time_slice</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">time_slice_label</span><span class="o">=</span><span class="s1">&#39;fault time&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Pump Response to Blockage&quot;</span><span class="p">,</span> <span class="n">h_padding</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;behaviorovertime.pdf&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">pad_inches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;behaviorovertime.pdf&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">pad_inches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deghist_fault</span> <span class="o">=</span> <span class="n">mdlhist</span><span class="o">.</span><span class="n">get_degraded_hist</span><span class="p">(</span><span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">flows</span><span class="p">)</span>
<span class="n">fault_fault</span> <span class="o">=</span> <span class="n">mdlhist</span><span class="o">.</span><span class="n">get_faulty_hist</span><span class="p">(</span><span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">fxns</span><span class="p">,</span> <span class="o">*</span><span class="n">mdl</span><span class="o">.</span><span class="n">flows</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">result_from</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">deghist_fault</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">gtype</span><span class="o">=</span><span class="s1">&#39;fxngraph&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Pump System with Blockage Fault&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;modelgraph.pdf&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">pad_inches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Each of these flows also have different different costs associated with degraded performance: - repair cost - lost water cost - ee use cost These costs also have different forms.</p>
</section>
<section id="Experiments">
<h2>Experiments<a class="headerlink" href="#Experiments" title="Permalink to this headline"></a></h2>
<p>The goal of these experiments is to compare the error and efficiency of quadrature approaches at approximating the expected resilience over the simulation interval.</p>
<section id="Introduce-Quadratures">
<h3>Introduce Quadratures<a class="headerlink" href="#Introduce-Quadratures" title="Permalink to this headline"></a></h3>
<p>The quadratures used in this experiment are shown below. While quadpy has a few other quadratures that can be used, these were chosen becuase they take a single argument for the number of points used.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quadratures</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;gauss-legendre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">gauss_legendre</span>
<span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;gauss-legendre&#39;</span><span class="p">](</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;gauss-legendre&#39;</span><span class="p">](</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">points</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;fejer 1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">fejer_1</span> <span class="c1">#argument is # of points</span>
<span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;fejer 1&#39;</span><span class="p">](</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;fejer 1&#39;</span><span class="p">](</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">points</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;fejer 2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">fejer_2</span> <span class="c1">#argument is # of points</span>
<span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;fejer 2&#39;</span><span class="p">](</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;fejer 2&#39;</span><span class="p">](</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">points</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;gauss lobatto&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">gauss_lobatto</span> <span class="c1">#argument is # of points</span>
<span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;gauss lobatto&#39;</span><span class="p">](</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="p">(</span><span class="n">quadratures</span><span class="p">[</span><span class="s1">&#39;gauss lobatto&#39;</span><span class="p">](</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#argument is number of pts, (optional) bias left, bias right (maybe try flipping?)</span>
<span class="c1">#quadratures[&#39;gauss radau&#39;] = quadpy.line_segment.gauss_radau</span>
<span class="c1">#quadratures[&#39;gauss radau&#39;](3).show()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#argument is n which makes the number of pts n+1</span>
<span class="c1">#quadratures[&#39;newton cotes closed&#39;] = quadpy.line_segment.newton_cotes_closed</span>
<span class="c1">#quadratures[&#39;newton cotes closed&#39;](2).show()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#quadratures[&#39;newton cotes open&#39;] = quadpy.line_segment.newton_cotes_open #argument num of pts</span>
<span class="c1">#quadratures[&#39;newton cotes open&#39;](3).show()</span>
</pre></div>
</div>
</div>
<p>Some other possible quadratures are shown below.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Gauss-kronrod</span>
<span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">gauss_kronrod</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1">#argument is n which makes the number off pts 2*n+1</span>
<span class="c1">#Gauss-jacobi</span>
<span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">gauss_jacobi</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1">#argument is # of points, left weighting, right weighting &gt; -1</span>
<span class="c1">#Gauss-patterson</span>
<span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">gauss_patterson</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1">#argument is the order n, num pts is [1, 3, 7, 15, 31, 63, 127, 255 or 511]</span>
</pre></div>
</div>
</div>
<p>The code below calculates the error of each approach over the number of points used. For the monte-carlo approaches, the results are averaged over 10 simulations and the standard deviation is provided for error bars. The computational cost is also determined by determined by taking the number of simulations needed for each (which is 1 per point (from simulating the nominal) and a fraction based on the injection time of the simulation (faults injected later take less time in simulation)).</p>
</section>
<section id="Experimental-setup">
<h3>Experimental setup<a class="headerlink" href="#Experimental-setup" title="Permalink to this headline"></a></h3>
<p>The following function calculates the expected resilience of a model <code class="docutils literal notranslate"><span class="pre">mdl</span></code> (as well as a few other useful things) over the fault sampling approach defined in <code class="docutils literal notranslate"><span class="pre">approach</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">resilquant</span><span class="p">(</span><span class="n">approach</span><span class="p">,</span> <span class="n">mdl</span><span class="p">):</span>
    <span class="n">endclasses</span><span class="p">,</span> <span class="n">mdlhists</span> <span class="o">=</span> <span class="n">propagate</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">approach</span><span class="p">,</span> <span class="n">showprogress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">fmea</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">tabulate</span><span class="o">.</span><span class="n">summfmea</span><span class="p">(</span><span class="n">endclasses</span><span class="p">,</span> <span class="n">approach</span><span class="p">)</span>
    <span class="n">fmea2</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="n">tabulate</span><span class="o">.</span><span class="n">phasefmea</span><span class="p">(</span><span class="n">endclasses</span><span class="p">,</span> <span class="n">approach</span><span class="p">)</span>
    <span class="n">util</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">fmea</span><span class="p">[</span><span class="s1">&#39;expected cost&#39;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">util</span><span class="p">,</span> <span class="n">fmea</span><span class="p">,</span> <span class="n">fmea2</span>
</pre></div>
</div>
</div>
<p>This experiment will test how well the quadratures approximate the expected costs of resilience by sampling different points in interval. This is done for the pump model introduced above using the blockage fault.</p>
<p>Below each of the cost types are shown: - repair costs (which is a step function due to the conditional fault that occurs due to delays) - water costs (which is linear due to the water lost at each timestep) - EE costs (which is constant and then exponentially decreasing due to the interval of adverse high current draw) - all costs together</p>
<p>where the delay for degradation is 20 time-steps</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">costs</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;repair&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;water&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;ee&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;repair&#39;</span><span class="p">,</span> <span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">}]</span>
<span class="n">costtitle</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;repair&#39;</span><span class="p">:</span><span class="s1">&#39;Repair&#39;</span><span class="p">,</span> <span class="s1">&#39;water&#39;</span><span class="p">:</span><span class="s1">&#39; Decreased Flow&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">:</span> <span class="s1">&#39;Increased Current&#39;</span><span class="p">}</span>
<span class="n">costfig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">costfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">})</span>
<span class="n">n</span><span class="o">=</span><span class="mi">1</span>
<span class="k">for</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">costs</span><span class="p">:</span>
    <span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:</span><span class="n">cost</span><span class="p">,</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">})</span>
    <span class="n">app_full</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
    <span class="n">endclasses</span><span class="p">,</span> <span class="n">mdlhists</span> <span class="o">=</span> <span class="n">propagate</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_full</span><span class="p">,</span> <span class="n">showprogress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">costfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="n">an</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">metricovertime</span><span class="p">(</span><span class="n">endclasses</span><span class="p">,</span> <span class="n">app_full</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;cost&#39;</span><span class="p">,</span> <span class="n">metrictype</span><span class="o">=</span><span class="s1">&#39;cost&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Composite&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">costtitle</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">cost</span><span class="p">)[</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">30000</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">55</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">%</span><span class="k">2</span>&lt;1:
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cost (USD)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
<span class="n">costfig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Cost of Faults Over Injection Times&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;costsovertime.pdf&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">pad_inches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Comparing-Quadrature-Error">
<h3>Comparing Quadrature Error<a class="headerlink" href="#Comparing-Quadrature-Error" title="Permalink to this headline"></a></h3>
<p>The functions below compare the result from a set of sampling approaches with the full integral given that quadrature can use a certain amount of points to approximate the function. The error being used is absolute error.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calcerror</span><span class="p">(</span><span class="n">fullutil</span><span class="p">,</span> <span class="n">util</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">((</span><span class="n">fullutil</span><span class="o">-</span><span class="n">util</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">fullutil</span><span class="o">+</span><span class="mf">0.000001</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calc_errors</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">quadratures</span><span class="p">,</span> <span class="n">possible_pts</span><span class="p">,</span> <span class="n">util_full</span><span class="p">):</span>
    <span class="n">errs</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">quadratures</span><span class="p">)</span>
    <span class="n">num_samps</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">quadratures</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">quadname</span><span class="p">,</span> <span class="n">quad</span> <span class="ow">in</span> <span class="n">quadratures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errs</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">num_samps</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">quadname</span><span class="o">==</span><span class="s1">&#39;likeliest&#39;</span><span class="p">:</span>
            <span class="n">app</span><span class="o">=</span><span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span><span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span> <span class="p">,</span><span class="s1">&#39;block&#39;</span><span class="p">)],</span><span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;likeliest&#39;</span><span class="p">})</span>
            <span class="n">util</span><span class="p">,</span> <span class="n">fmea</span><span class="p">,</span> <span class="n">phasefmea</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
            <span class="n">errs</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">=</span> <span class="n">errs</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util</span><span class="p">)]</span>
            <span class="n">num_samps</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_samps</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">([(</span><span class="mi">55</span><span class="o">-</span><span class="n">scen</span><span class="o">.</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">55</span> <span class="k">for</span> <span class="n">scen</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">scenlist</span><span class="p">])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">possible_pts</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">quadname</span> <span class="o">==</span> <span class="s1">&#39;evenspacing&#39;</span><span class="p">:</span> <span class="n">app</span><span class="o">=</span><span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span><span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span> <span class="p">,</span><span class="s1">&#39;block&#39;</span><span class="p">)],</span><span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;evenspacing&#39;</span><span class="p">,</span><span class="s1">&#39;numpts&#39;</span><span class="p">:</span><span class="n">pt</span><span class="p">})</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">quadobj</span> <span class="o">=</span> <span class="n">quad</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
                        <span class="n">app</span><span class="o">=</span><span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span><span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span> <span class="p">,</span><span class="s1">&#39;block&#39;</span><span class="p">)],</span><span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;quadrature&#39;</span><span class="p">,</span><span class="s1">&#39;quad&#39;</span><span class="p">:{</span><span class="s1">&#39;nodes&#39;</span><span class="p">:</span><span class="n">quadobj</span><span class="o">.</span><span class="n">points</span><span class="p">,</span><span class="s1">&#39;weights&#39;</span><span class="p">:</span><span class="n">quadobj</span><span class="o">.</span><span class="n">weights</span><span class="p">}})</span>
                    <span class="n">util</span><span class="p">,</span> <span class="n">fmea</span><span class="p">,</span> <span class="n">phasefmea</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
                    <span class="n">errs</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">=</span> <span class="n">errs</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util</span><span class="p">)]</span>
                    <span class="n">num_samps</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_samps</span><span class="p">[</span><span class="n">quadname</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">([(</span><span class="mi">55</span><span class="o">-</span><span class="n">scen</span><span class="o">.</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">55</span> <span class="k">for</span> <span class="n">scen</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">scenlist</span><span class="p">])]</span>
                <span class="k">except</span><span class="p">:</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">errs</span><span class="p">,</span> <span class="n">num_samps</span>
</pre></div>
</div>
</div>
<p>Paremeters for the experiment:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">possible_pts</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span> <span class="c1"># points for the quadrature</span>
<span class="c1">#quadratures[&#39;evenspacing&#39;] = 1   # adding evenly spaced sampling</span>
<span class="c1">#quadratures[&#39;likeliest&#39;] = 1     # adding likeliest phase sampling</span>
<span class="n">delaytimes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>        <span class="c1"># delay times to test</span>
</pre></div>
</div>
</div>
<p>Calculating the error over each cost type, delay, and number of points</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">errovercosts</span><span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">costs</span><span class="p">:</span>
    <span class="n">errovercosts</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cost</span><span class="p">)]</span><span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">delaytimes</span><span class="p">:</span>
        <span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
        <span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:</span><span class="n">cost</span><span class="p">,</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="n">delay</span><span class="p">})</span>
        <span class="n">app_full</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
        <span class="n">util_full</span><span class="p">,</span> <span class="n">fmea_full</span><span class="p">,</span> <span class="n">phasefmea_full</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
        <span class="n">errovercosts</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span><span class="n">delay</span><span class="p">],</span> <span class="n">num_samps</span> <span class="o">=</span> <span class="n">calc_errors</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">quadratures</span><span class="p">,</span> <span class="n">possible_pts</span><span class="p">,</span> <span class="n">util_full</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Plotting results:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">figure</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>
<span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">costs</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">delaytimes</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">costs</span><span class="p">)</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">delaytimes</span><span class="p">))</span>
<span class="n">n</span><span class="o">=</span><span class="mi">0</span>
<span class="n">markers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gauss-legendre&quot;</span><span class="p">:</span><span class="s2">&quot;o&quot;</span><span class="p">,</span><span class="s2">&quot;fejer 1&quot;</span><span class="p">:</span><span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;fejer 2&quot;</span><span class="p">:</span><span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;gauss lobatto&quot;</span><span class="p">:</span><span class="s2">&quot;s&quot;</span><span class="p">}</span>
<span class="n">labs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gauss-legendre&quot;</span><span class="p">:</span><span class="s2">&quot;Gauss-Legendre&quot;</span><span class="p">,</span><span class="s2">&quot;fejer 1&quot;</span><span class="p">:</span><span class="s2">&quot;Fejer 1&quot;</span><span class="p">,</span> <span class="s2">&quot;fejer 2&quot;</span><span class="p">:</span><span class="s2">&quot;Fejer 2&quot;</span><span class="p">,</span> <span class="s2">&quot;gauss lobatto&quot;</span><span class="p">:</span><span class="s2">&quot;Gauss-Lobatto&quot;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">costs</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">delaytimes</span><span class="p">:</span>
        <span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">costs</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">delaytimes</span><span class="p">),</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">quad</span> <span class="ow">in</span> <span class="n">errovercosts</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span> <span class="n">delay</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_samps</span><span class="p">[</span><span class="n">quad</span><span class="p">],</span> <span class="n">errovercosts</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span> <span class="n">delay</span><span class="p">][</span><span class="n">quad</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="n">markers</span><span class="p">[</span><span class="n">quad</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">labs</span><span class="p">[</span><span class="n">quad</span><span class="p">])</span><span class="c1">#, label=labels[quad], marker=markers[quad])</span>
        <span class="n">title</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Composite&quot;</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">title</span> <span class="o">=</span> <span class="n">costtitle</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">cost</span><span class="p">)[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="o">+</span><span class="s2">&quot;, &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">delay</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s2">&quot;symlog&quot;</span><span class="p">,</span> <span class="n">linthresh</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">delay</span> <span class="o">!=</span> <span class="nb">min</span><span class="p">(</span><span class="n">delaytimes</span><span class="p">):</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
        <span class="k">if</span> <span class="n">title</span> <span class="o">!=</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>
        <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Error of Quadratures Over # of Points, Cost Types, and Delay Parameter&quot;</span><span class="p">)</span>
<span class="n">figure</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;center right&quot;</span><span class="p">)</span> <span class="c1">#bbox_to_anchor=(1.1, 0.5))</span>
<span class="n">figure</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">,</span> <span class="s1">&#39;Number of Full Model Runs&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">figure</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.04</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>

<span class="n">figure</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.80</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.91</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;quad_errors.pdf&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">pad_inches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">avg_cost</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="k">for</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">costs</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">delaytimes</span><span class="p">:</span>
        <span class="n">ed</span><span class="o">=</span><span class="n">errovercosts</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span> <span class="n">delay</span><span class="p">]</span>
        <span class="n">df_cost</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">ed</span><span class="o">.</span><span class="n">items</span><span class="p">()]))</span>
        <span class="n">df_cost</span><span class="p">[</span><span class="s2">&quot;gauss lobatto&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">df_cost</span><span class="p">[</span><span class="s2">&quot;gauss lobatto&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">avg_cost</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span><span class="n">delay</span><span class="p">]</span><span class="o">=</span><span class="n">df_cost</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">11</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">avg_cost</span> <span class="o">=</span> <span class="n">avg_cost</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">avg_cost</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">averages</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">avg_cost</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="n">avg_cost</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="p">,</span><span class="n">avg_cost</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">avg_cost</span><span class="p">[</span><span class="mi">9</span><span class="p">:</span><span class="mi">12</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">avg_cost</span><span class="o">.</span><span class="n">mean</span><span class="p">()])</span>
<span class="n">averages</span><span class="p">[</span><span class="s2">&quot;names&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;repair&quot;</span><span class="p">,</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span> <span class="s2">&quot;ee&quot;</span><span class="p">,</span> <span class="s2">&quot;composite&quot;</span><span class="p">,</span> <span class="s2">&quot;average&quot;</span><span class="p">]</span>
<span class="n">averages</span><span class="o">=</span> <span class="n">averages</span><span class="p">[[</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="s2">&quot;gauss-legendre&quot;</span><span class="p">,</span> <span class="s2">&quot;fejer 1&quot;</span><span class="p">,</span> <span class="s2">&quot;fejer 2&quot;</span><span class="p">,</span> <span class="s2">&quot;gauss lobatto&quot;</span><span class="p">]]</span>
<span class="n">averages</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">averages</span><span class="o">.</span><span class="n">to_latex</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>If individual plots are desired:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_errors</span><span class="p">(</span><span class="n">errs</span><span class="p">,</span> <span class="n">num_samps</span><span class="p">,</span> <span class="n">showlegend</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">quad</span> <span class="ow">in</span> <span class="n">errs</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_samps</span><span class="p">[</span><span class="n">quad</span><span class="p">],</span> <span class="n">errs</span><span class="p">[</span><span class="n">quad</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">quad</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">showlegend</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Number of Full Model Runs&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">yscale</span><span class="p">(</span><span class="s2">&quot;symlog&quot;</span><span class="p">,</span> <span class="n">linthreshy</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Percent Error&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">delaytimes</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">costs</span><span class="p">:</span>
        <span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:</span><span class="n">cost</span><span class="p">,</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="n">delay</span><span class="p">})</span>
        <span class="n">app_full</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
        <span class="n">util_full</span><span class="p">,</span> <span class="n">fmea_full</span><span class="p">,</span> <span class="n">phasefmea_full</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
        <span class="n">errs</span><span class="p">,</span> <span class="n">num_samps</span> <span class="o">=</span> <span class="n">calc_errors</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">quadratures</span><span class="p">,</span> <span class="n">possible_pts</span><span class="p">,</span> <span class="n">util_full</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Error of Sampling Approaches (cost: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; delay: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">delay</span><span class="p">))</span>
        <span class="n">plot_errors</span><span class="p">(</span><span class="n">errs</span><span class="p">,</span> <span class="n">num_samps</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>What if the form of the integral was known beforehand? In that case one would be interested in knowing the points that best represente the space for future iteration. There are two options for that in this model: ‘single-point’ and ‘piecewise’</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:{</span><span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="s1">&#39;repair&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">},</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span>
<span class="n">app_full</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
<span class="n">app_piecewise</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
<span class="n">app_bestpt</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
<span class="n">endclasses</span><span class="p">,</span> <span class="n">mdlhists</span> <span class="o">=</span> <span class="n">propagate</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_full</span><span class="p">,</span> <span class="n">showprogress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">app_piecewise</span><span class="o">.</span><span class="n">prune_scenarios</span><span class="p">(</span><span class="n">endclasses</span><span class="p">,</span> <span class="n">samptype</span><span class="o">=</span><span class="s1">&#39;piecewise&#39;</span><span class="p">)</span>
<span class="n">app_bestpt</span><span class="o">.</span><span class="n">prune_scenarios</span><span class="p">(</span><span class="n">endclasses</span><span class="p">,</span> <span class="n">samptype</span><span class="o">=</span><span class="s1">&#39;bestpt&#39;</span><span class="p">)</span>

<span class="n">delaytimes</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">piecewiseerr</span><span class="o">=</span><span class="p">[]</span>
<span class="n">bestpterr</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">delaytimes</span><span class="p">:</span>
    <span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:{</span><span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="s1">&#39;repair&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">},</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="n">delay</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;hrs&#39;</span><span class="p">})</span>
    <span class="n">util_full</span><span class="p">,</span>  <span class="n">fmea_full</span><span class="p">,</span> <span class="n">phasefmea_full</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
    <span class="n">util_piecewise</span><span class="p">,</span>  <span class="n">fmea_piecewise</span><span class="p">,</span> <span class="n">phasefmea_piecewise</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_piecewise</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
    <span class="n">util_bestpt</span><span class="p">,</span>  <span class="n">fmea_bestpt</span><span class="p">,</span> <span class="n">phasefmea_bestpt</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_bestpt</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
    <span class="n">piecewiseerr</span><span class="o">=</span><span class="n">piecewiseerr</span><span class="o">+</span><span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util_piecewise</span><span class="p">)]</span>
    <span class="n">bestpterr</span> <span class="o">=</span> <span class="n">bestpterr</span> <span class="o">+</span><span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util_bestpt</span><span class="p">)]</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">delaytimes</span><span class="p">,</span> <span class="n">piecewiseerr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;piecewise&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">delaytimes</span><span class="p">,</span> <span class="n">bestpterr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;bestpt&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>This may change over the delay time parameters chosen. The code below plots the value over a set of possible delay paremeters.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">postplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>
<span class="n">postplot</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">n</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">initdelay</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">36</span><span class="p">]:</span>
    <span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
    <span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:{</span><span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="s1">&#39;repair&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">},</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="n">initdelay</span><span class="p">})</span>
    <span class="n">app_full</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
    <span class="n">app_piecewise</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
    <span class="n">app_bestpt</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
    <span class="n">endclasses</span><span class="p">,</span> <span class="n">mdlhists</span> <span class="o">=</span> <span class="n">propagate</span><span class="o">.</span><span class="n">approach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">app_full</span><span class="p">,</span> <span class="n">showprogress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">app_piecewise</span><span class="o">.</span><span class="n">prune_scenarios</span><span class="p">(</span><span class="n">endclasses</span><span class="p">,</span> <span class="n">samptype</span><span class="o">=</span><span class="s1">&#39;piecewise&#39;</span><span class="p">)</span>
    <span class="n">app_bestpt</span><span class="o">.</span><span class="n">prune_scenarios</span><span class="p">(</span><span class="n">endclasses</span><span class="p">,</span> <span class="n">samptype</span><span class="o">=</span><span class="s1">&#39;bestpt&#39;</span><span class="p">)</span>

    <span class="n">delays</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">46</span><span class="p">,</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">piecewiseerr</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">bestpterr</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">delays</span><span class="p">:</span>
        <span class="n">mdl</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cost&#39;</span><span class="p">:{</span><span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="s1">&#39;repair&#39;</span><span class="p">,</span> <span class="s1">&#39;ee&#39;</span><span class="p">},</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span><span class="n">delay</span><span class="p">})</span>
        <span class="n">util_full</span><span class="p">,</span> <span class="n">fmea_full</span><span class="p">,</span> <span class="n">phasefmea_full</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
        <span class="n">util_piecewise</span><span class="p">,</span>  <span class="n">fmea_piecewise</span><span class="p">,</span> <span class="n">phasefmea_piecewise</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_piecewise</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
        <span class="n">util_bestpt</span><span class="p">,</span>  <span class="n">fmea_bestpt</span><span class="p">,</span> <span class="n">phasefmea_bestpt</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_bestpt</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
        <span class="n">piecewiseerr</span><span class="o">=</span><span class="n">piecewiseerr</span><span class="o">+</span><span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util_piecewise</span><span class="p">)]</span>
        <span class="n">bestpterr</span> <span class="o">=</span> <span class="n">bestpterr</span> <span class="o">+</span><span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util_bestpt</span><span class="p">)]</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">postplot</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">delays</span><span class="p">,</span> <span class="n">piecewiseerr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;piecewise&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">delays</span><span class="p">,</span> <span class="n">bestpterr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;bestpt&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
    <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">initdelay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;init. delay&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Initial delay = &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">initdelay</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">%</span><span class="k">2</span>&lt;1:
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time (min)&quot;</span><span class="p">)</span>
<span class="n">postplot</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;A Posteriori Approach Robustness&quot;</span><span class="p">)</span>
<span class="n">postplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">postplot</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.88</span><span class="p">)</span>
<span class="n">postplot</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">postplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;posthoc_err.pdf&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">pad_inches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This gives an overall look at how quadratures compare with other types of fault sampling approaches:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app_full</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;fullint&#39;</span><span class="p">})</span>
<span class="n">util_full</span><span class="p">,</span> <span class="n">fmea_full</span><span class="p">,</span> <span class="n">phasefmea_full</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">possible_pts</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">45</span><span class="p">)</span>
<span class="n">samp_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;evenspacing&#39;</span><span class="p">,</span> <span class="s1">&#39;randtimes&#39;</span><span class="p">,</span> <span class="s1">&#39;symrandtimes&#39;</span><span class="p">,</span> <span class="s1">&#39;quadrature&#39;</span><span class="p">]</span>
<span class="n">errs</span><span class="o">=</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">samp_types</span><span class="p">)</span>
<span class="n">errbars</span><span class="o">=</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">samp_types</span><span class="p">)</span>
<span class="n">errbar_samps</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">samp_types</span><span class="p">)</span>
<span class="n">num_samples</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">samp_types</span><span class="p">)</span>
<span class="n">ave_pts</span><span class="o">=</span><span class="mi">20</span>

<span class="n">util_full</span><span class="p">,</span> <span class="n">fmea_full</span><span class="p">,</span> <span class="n">phasefmea_full</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_full</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
<span class="k">for</span> <span class="n">samp_type</span> <span class="ow">in</span> <span class="n">samp_types</span><span class="p">:</span>
    <span class="n">errs</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">errbars</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">num_samples</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">errbar_samps</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">possible_pts</span><span class="p">:</span> <span class="c1">#calc errors</span>
        <span class="k">if</span> <span class="n">samp_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;randtimes&#39;</span><span class="p">,</span> <span class="s1">&#39;arandtimes&#39;</span><span class="p">,</span> <span class="s1">&#39;symrandtimes&#39;</span><span class="p">]:</span>
            <span class="n">samperrs</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">samps</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">ave_pt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ave_pts</span><span class="p">):</span>
                <span class="n">app</span><span class="o">=</span><span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="n">samp_type</span><span class="p">,</span> <span class="s1">&#39;numpts&#39;</span><span class="p">:</span><span class="n">pt</span><span class="p">})</span>
                <span class="n">util</span><span class="p">,</span> <span class="n">fmea</span><span class="p">,</span> <span class="n">phasefmea</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
                <span class="n">samperrs</span><span class="o">=</span><span class="n">samperrs</span><span class="o">+</span><span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util</span><span class="p">)]</span>
                <span class="n">samps</span> <span class="o">=</span> <span class="n">samps</span> <span class="o">+</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">([(</span><span class="mi">55</span><span class="o">-</span><span class="n">scen</span><span class="o">.</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">55</span> <span class="k">for</span> <span class="n">scen</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">scenlist</span><span class="p">])]</span>
            <span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">samperrs</span><span class="p">)</span>
            <span class="n">errbar</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">samperrs</span><span class="p">)</span>
            <span class="n">num_samps</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">samps</span><span class="p">)</span>
            <span class="n">errbar_samp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">samps</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">samp_type</span><span class="o">==</span><span class="s1">&#39;quadrature&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">quadrature</span> <span class="o">=</span> <span class="n">quadpy</span><span class="o">.</span><span class="n">c1</span><span class="o">.</span><span class="n">gauss_legendre</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
                <span class="n">app</span><span class="o">=</span><span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;quadrature&#39;</span><span class="p">,</span> <span class="s1">&#39;quad&#39;</span><span class="p">:{</span><span class="s1">&#39;nodes&#39;</span><span class="p">:</span><span class="n">quadrature</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="s1">&#39;weights&#39;</span><span class="p">:</span><span class="n">quadrature</span><span class="o">.</span><span class="n">weights</span><span class="p">}})</span>
                <span class="n">util</span><span class="p">,</span>  <span class="n">fmea</span><span class="p">,</span> <span class="n">phasefmea</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util</span><span class="p">)</span>
                <span class="n">errbar</span><span class="o">=</span><span class="mf">0.0</span>
                <span class="n">num_samps</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">([(</span><span class="mi">55</span><span class="o">-</span><span class="n">scen</span><span class="o">.</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">55</span> <span class="k">for</span> <span class="n">scen</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">scenlist</span><span class="p">])</span>
                <span class="n">errbar_samp</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">app</span><span class="o">=</span><span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="n">samp_type</span><span class="p">,</span> <span class="s1">&#39;numpts&#39;</span><span class="p">:</span><span class="n">pt</span><span class="p">})</span>
            <span class="n">util</span><span class="p">,</span>  <span class="n">fmea</span><span class="p">,</span> <span class="n">phasefmea</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
            <span class="n">err</span> <span class="o">=</span> <span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util</span><span class="p">)</span>
            <span class="n">errbar</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="n">num_samps</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">([(</span><span class="mi">55</span><span class="o">-</span><span class="n">scen</span><span class="o">.</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">55</span> <span class="k">for</span> <span class="n">scen</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">scenlist</span><span class="p">])</span>
            <span class="n">errbar_samp</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">errs</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span><span class="o">=</span><span class="n">errs</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">err</span><span class="p">]</span>
        <span class="n">errbars</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span><span class="o">=</span><span class="n">errbars</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">errbar</span><span class="p">]</span>
        <span class="n">num_samples</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_samples</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">num_samps</span><span class="p">]</span>
        <span class="n">errbar_samps</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">errbar_samps</span><span class="p">[</span><span class="n">samp_type</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">errbar_samp</span><span class="p">]</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">})</span>
<span class="n">errbar_samps</span><span class="p">[</span><span class="s1">&#39;full&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
<span class="n">errs</span><span class="p">[</span><span class="s1">&#39;full&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
<span class="n">errbars</span><span class="p">[</span><span class="s1">&#39;full&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
<span class="n">num_samples</span><span class="p">[</span><span class="s1">&#39;full&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">app_full</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">([(</span><span class="mi">55</span><span class="o">-</span><span class="n">scen</span><span class="o">.</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">55</span> <span class="k">for</span> <span class="n">scen</span> <span class="ow">in</span> <span class="n">app_full</span><span class="o">.</span><span class="n">scenlist</span><span class="p">])]</span>


<span class="n">app_maxlike</span> <span class="o">=</span> <span class="n">SampleApproach</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">faults</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;ExportWater&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">)],</span> <span class="n">defaultsamp</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;samp&#39;</span><span class="p">:</span><span class="s1">&#39;likeliest&#39;</span><span class="p">})</span>
<span class="n">util_maxlike</span><span class="p">,</span> <span class="n">fmea_maxlike</span><span class="p">,</span> <span class="n">phasefmea_maxlike</span> <span class="o">=</span> <span class="n">resilquant</span><span class="p">(</span><span class="n">app_maxlike</span><span class="p">,</span> <span class="n">mdl</span><span class="p">)</span>
<span class="n">errbar_samps</span><span class="p">[</span><span class="s1">&#39;likeliest&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
<span class="n">errs</span><span class="p">[</span><span class="s1">&#39;likeliest&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">calcerror</span><span class="p">(</span><span class="n">util_full</span><span class="p">,</span> <span class="n">util_maxlike</span><span class="p">)]</span>
<span class="n">errbars</span><span class="p">[</span><span class="s1">&#39;likeliest&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>
<span class="n">num_samples</span><span class="p">[</span><span class="s1">&#39;likeliest&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">app_maxlike</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">([(</span><span class="mi">55</span><span class="o">-</span><span class="n">scen</span><span class="o">.</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">55</span> <span class="k">for</span> <span class="n">scen</span> <span class="ow">in</span> <span class="n">app_maxlike</span><span class="o">.</span><span class="n">scenlist</span><span class="p">])]</span>


<span class="n">markers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;evenspacing&quot;</span><span class="p">:</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;randtimes&quot;</span><span class="p">:</span><span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;symrandtimes&quot;</span><span class="p">:</span><span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;full&quot;</span><span class="p">:</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;likeliest&quot;</span><span class="p">:</span><span class="s2">&quot;P&quot;</span><span class="p">,</span> <span class="s2">&quot;quadrature&quot;</span><span class="p">:</span><span class="s2">&quot;s&quot;</span><span class="p">}</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;evenspacing&quot;</span><span class="p">:</span><span class="s2">&quot;Evenly-Spaced&quot;</span><span class="p">,</span> <span class="s2">&quot;randtimes&quot;</span><span class="p">:</span><span class="s2">&quot;Monte Carlo&quot;</span><span class="p">,</span> <span class="s2">&quot;symrandtimes&quot;</span><span class="p">:</span><span class="s2">&quot;Monte Carlo (AV)&quot;</span><span class="p">,</span> <span class="s2">&quot;full&quot;</span><span class="p">:</span><span class="s2">&quot;Full&quot;</span><span class="p">,</span> <span class="s2">&quot;likeliest&quot;</span><span class="p">:</span><span class="s2">&quot;Likeliest&quot;</span><span class="p">,</span> <span class="s2">&quot;quadrature&quot;</span><span class="p">:</span><span class="s2">&quot;Gauss-Legendre&quot;</span><span class="p">}</span>
<span class="c1">#for samp in num_samples:</span>
<span class="c1">#    plt.errorbar(num_samples[samp], errs[samp], yerr=errbars[samp],marker = markers[samp], label=samp)</span>
<span class="k">for</span> <span class="n">samp</span> <span class="ow">in</span> <span class="n">num_samples</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">samp</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;evenspacing&quot;</span><span class="p">,</span> <span class="s2">&quot;randtimes&quot;</span><span class="p">,</span> <span class="s2">&quot;symrandtimes&quot;</span><span class="p">,</span> <span class="s2">&quot;quadrature&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">samp</span><span class="o">==</span><span class="s2">&quot;quadrature&quot;</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">possible_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">22</span><span class="p">],</span> <span class="n">errs</span><span class="p">[</span><span class="n">samp</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">22</span><span class="p">],</span><span class="n">marker</span> <span class="o">=</span> <span class="n">markers</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">samp</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">possible_pts</span><span class="p">,</span> <span class="n">errs</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span><span class="n">marker</span> <span class="o">=</span> <span class="n">markers</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">samp</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">samp</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;symrandtimes&quot;</span><span class="p">,</span> <span class="s2">&quot;randtimes&quot;</span><span class="p">]:</span>
            <span class="n">errline</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">errs</span><span class="p">[</span><span class="n">samp</span><span class="p">])</span>
            <span class="n">bars</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">errbars</span><span class="p">[</span><span class="n">samp</span><span class="p">])</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">possible_pts</span><span class="p">,</span><span class="n">errline</span><span class="o">+</span><span class="n">bars</span><span class="p">,</span><span class="n">errline</span><span class="o">-</span><span class="n">bars</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
    <span class="k">elif</span> <span class="n">samp</span><span class="o">==</span><span class="s2">&quot;likeliest&quot;</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">errs</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">yerr</span><span class="o">=</span><span class="n">errbars</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span><span class="n">marker</span> <span class="o">=</span> <span class="n">markers</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">samp</span><span class="o">==</span><span class="s2">&quot;full&quot;</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">errs</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">yerr</span><span class="o">=</span><span class="n">errbars</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span><span class="n">marker</span> <span class="o">=</span> <span class="n">markers</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">samp</span><span class="p">],</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1">#plt.errorbar(range(len(num_samps)), list(num_samps.values(), )</span>
<span class="c1">#plt.xticks(range(len(num_samps)), list(num_samps.keys())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">,</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Number of Points Used&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yscale</span><span class="p">(</span><span class="s2">&quot;symlog&quot;</span><span class="p">,</span> <span class="n">linthreshy</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">0.0001</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="c1">#plt.xscale(&quot;log&quot;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Error of Sampling Approaches&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;hl_error.pdf&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">pad_inches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">avgoverallerr</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">errs</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">avgoverallerr</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../AST_Sampling.html" class="btn btn-neutral float-left" title="fmdtools-AdaStress integration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../multirotor/Demonstration.html" class="btn btn-neutral float-right" title="fmdtools Paper Demonstration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>